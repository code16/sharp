(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+lRy":function(t,e){},0:function(t,e,n){n("9HjO"),n("+lRy"),t.exports=n("NBBh")},1:function(t,e){},"9HjO":function(t,e,n){"use strict";n.r(e);n("qxpy"),n("rmf8"),n("u8M4"),n("eOqu"),n("V4S9"),n("6Csg"),n("3PMH"),n("Si7d"),n("H0pb"),n("mjWP");var r=n("XuX8"),i=n.n(r),a=n("L2JU"),o=n("jE9Z"),s=n("rX62"),l=n.n(s),c=n("dV7z"),u=n("7pj7"),d=n.n(u),h=n("SJdT"),f=n.n(h),p=n("j4aL"),m=n.n(p),v=n("3M0M"),y=n.n(v),b=n("PtZe"),g=n.n(b),_=n("stYL"),w=n.n(_),S=n("IvRd"),C=n.n(S),x={fr:m.a,ru:y.a,es:g.a,en:w.a,de:C.a};var O={name:"SharpActionBar",props:{container:Boolean,rightClass:String},computed:{hasExtras:function(){return this.$slots.extras||this.$slots["extras-right"]}},methods:{layout:function(t){document.documentElement.style.setProperty("--navbar-height","".concat(t.height,"px"))}},mounted:function(){var t=this;this.layout(this.$refs.bar.getBoundingClientRect()),window.ResizeObserver&&new ResizeObserver((function(e){t.layout(e[0].target.getBoundingClientRect())})).observe(this.$refs.bar)}},k=n("KHd+"),j=Object(k.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpActionBar"},[n("div",{ref:"bar",staticClass:"SharpActionBar__bar sticky-top"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row align-items-center mx-n2"},[n("div",{staticClass:"col-auto col-md left px-2 my-1 my-sm-0"},[t._t("left")],2),t._v(" "),n("div",{staticClass:"col col-md-auto right px-2 my-1 my-sm-0",class:t.rightClass},[t._t("right")],2)])])]),t._v(" "),t.hasExtras?[n("div",{class:{container:t.container}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"SharpActionBar__extras"},[t._t("extras")],2)]),t._v(" "),t.$slots["extras-right"]?[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"SharpActionBar__extras"},[t._t("extras-right")],2)])]:t._e()],2)])]:t._e()],2)}),[],!1,null,null,null);j.options.__file="ActionBar.vue";var L=j.exports,E={props:{items:Array},computed:{icon:function(){var t;return null===(t=this.$store.state.currentEntity)||void 0===t?void 0:t.icon}},methods:{isActive:function(t){return t===this.items.length-1}}},P=Object(k.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[n("div",{staticClass:"input-group input-group-sm w-auto"},[t.icon?[n("div",{staticClass:"input-group-text"},[n("i",{staticClass:"fa fa-sm",class:t.icon,staticStyle:{opacity:".75","font-size":".75rem"}})])]:t._e(),t._v(" "),n("div",{staticClass:"form-control"},[n("div",{staticClass:"breadcrumb p-0 m-0"},[t._l(t.items,(function(e,r){return[n("div",{staticClass:"breadcrumb-item",class:{active:t.isActive(r)}},[t.isActive(r)?[n("span",[t._v(t._s(e.name))])]:[n("a",{attrs:{href:e.url}},[t._v(t._s(e.name))])]],2)]}))],2)])],2)])}),[],!1,null,null,null);P.options.__file="Breadcrumb.vue";var $=P.exports,B={props:{variant:{type:String,default:"primary"},text:Boolean,outline:Boolean,small:Boolean,large:Boolean,active:Boolean,block:Boolean,href:String},computed:{variantClass:function(){return!this.hasTextStyle&&this.variant?"btn".concat(this.outline?"-outline":"","-").concat(this.variant):null},classes:function(){return[this.variantClass,{"btn-sm":this.small,"btn-lg":this.large,"btn-text":this.hasTextStyle,"btn-block":this.block,active:this.active}]},hasTextStyle:function(){return!0===this.text},tag:function(){return this.href?"a":"button"}},methods:{focus:function(){this.$el.focus()}}},A=Object(k.a)(B,(function(){var t=this.$createElement;return(this._self._c||t)(this.tag,this._g({tag:"component",staticClass:"SharpButton btn",class:this.classes,attrs:{href:this.href}},this.$listeners),[this._t("default")],2)}),[],!1,null,null,null);A.options.__file="Button.vue";var I=A.exports,D={props:{formControl:{type:Boolean,default:!0}},computed:{classes:function(){return{"SharpClearButton--form-control":this.formControl}}},methods:{click:function(){this.$el.click()}}},F=Object(k.a)(D,(function(){var t=this.$createElement,e=this._self._c||t;return e("button",this._g({staticClass:"SharpClearButton btn",class:this.classes,attrs:{type:"button"}},this.$listeners),[e("svg",{staticClass:"SharpClearButton__icon",attrs:{"aria-label":"close",width:"10",height:"10",viewBox:"0 0 10 10","fill-rule":"evenodd"}},[e("path",{attrs:{d:"M9.8 8.6L8.4 10 5 6.4 1.4 10 0 8.6 3.6 5 .1 1.4 1.5 0 5 3.6 8.6 0 10 1.4 6.4 5z"}})])])}),[],!1,null,null,null);F.options.__file="ClearButton.vue";var T=F.exports,M={name:"SharpNavItem",props:{current:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},link:String},data:function(){return{}}},V=Object(k.a)(M,(function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"SharpLeftNav__item",class:{"SharpLeftNav__item--active":this.current,"SharpLeftNav__item--disabled":this.disabled},attrs:{role:"menuitem"}},[this.disabled?[e("span",{staticClass:"SharpLeftNav__item-link"},[this._t("default")],2)]:[e("a",{staticClass:"SharpLeftNav__item-link",attrs:{href:this.link}},[this._t("default")],2)]],2)}),[],!1,null,null,null);V.options.__file="NavItem.vue";var z=V.exports,R={components:{BCollapse:n("WEOK").a},props:{label:String,opened:Boolean},data:function(){return{expanded:this.opened}},methods:{toggle:function(){this.expanded=!this.expanded}}},N=Object(k.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"SharpLeftNav__item SharpLeftNav__item--has-children",class:{"SharpLeftNav__item--expanded":t.expanded},attrs:{tabindex:"0"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toggle(e)}}},[n("a",{staticClass:"SharpLeftNav__item-link",on:{click:t.toggle}},[n("div",{staticClass:"row gx-2 align-items-center flex-nowrap"},[n("div",{staticClass:"col",staticStyle:{"min-width":"0"}},[t._t("label",[t._v("\n                    "+t._s(t.label)+"\n                ")])],2),t._v(" "),n("div",{staticClass:"col-auto"},[n("div",{staticClass:"SharpLeftNav__item-icon"},[n("svg",{staticClass:"SharpLeftNav__icon",attrs:{width:"10",height:"5",viewBox:"0 0 10 5","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M10 0L5 5 0 0z"}})])])])])]),t._v(" "),n("b-collapse",{attrs:{visible:t.expanded}},[n("ul",{staticClass:"SharpLeftNav__list SharpLeftNav__list--nested",attrs:{role:"menu","aria-hidden":"true"}},[t._t("default")],2)])],1)}),[],!1,null,null,null);N.options.__file="CollapsibleItem.vue";var K=N.exports,q=n("o0o1"),U=n.n(q),H={name:"SharpPagination",inheritAttrs:!1,components:{BPagination:n("JtJI").a},props:{totalRows:Number,perPage:Number,minPageEndButtons:{type:Number,default:0}},computed:{hideGotoEndButtons:function(){return Math.ceil(this.totalRows/Math.max(this.perPage,1))<this.minPageEndButtons}}},G=Object(k.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-pagination",t._g(t._b({staticClass:"SharpPagination",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,"hide-goto-end-buttons":t.hideGotoEndButtons},scopedSlots:t._u([{key:"first-text",fn:function(){return[n("i",{staticClass:"fas fa-angle-double-left",attrs:{"aria-hidden":"true"}})]},proxy:!0},{key:"prev-text",fn:function(){return[n("i",{staticClass:"fas fa-angle-left",attrs:{"aria-hidden":"true"}})]},proxy:!0},{key:"next-text",fn:function(){return[n("i",{staticClass:"fas fa-angle-right",attrs:{"aria-hidden":"true"}})]},proxy:!0},{key:"last-text",fn:function(){return[n("i",{staticClass:"fas fa-angle-double-right",attrs:{"aria-hidden":"true"}})]},proxy:!0}])},"b-pagination",t.$attrs,!1),t.$listeners))}),[],!1,null,null,null);G.options.__file="Pagination.vue";var W=G.exports;function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q={props:{columns:Array,row:{type:Object,default:function(){return{}}},url:String,header:Boolean,highlight:Boolean},data:function(){return{isHighlighted:this.highlight}},watch:{highlight:function(){this.isHighlighted=this.highlight}},computed:{hasLink:function(){return!!this.url},classes:function(){return{"SharpDataList__row--header":this.header,"SharpDataList__row--disabled":!this.header&&!this.hasLink,"SharpDataList__row--highlight":this.isHighlighted,"SharpDataList__row--full-width":this.isFullWidth}},isFullWidth:function(){return!this.$scopedSlots.append}},methods:{colClasses:function(t){var e;return Y(e={},"col-".concat(t.sizeXS),!0),Y(e,"col-md-".concat(t.size),!0),Y(e,"d-none d-md-flex",t.hideOnXS),e},toggleHighlight:function(t){this.isHighlighted=t}}},X=Object(k.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpDataList__row container",class:t.classes},[n("div",{staticClass:"SharpDataList__cols"},[n("div",{staticClass:"row mx-n2 mx-md-n3"},[t._l(t.columns,(function(e){return[n("div",{staticClass:"px-2 px-md-3",class:[t.header?"SharpDataList__th":"SharpDataList__td",t.colClasses(e)]},[t._t("cell",[e.html?[n("div",{staticClass:"SharpDataList__td-html-container",domProps:{innerHTML:t._s(t.row[e.key])}})]:[t._v("\n                            "+t._s(t.row[e.key])+"\n                        ")]],{row:t.row,column:e})],2)]}))],2),t._v(" "),t.hasLink?[n("a",{staticClass:"SharpDataList__row-link",attrs:{href:t.url}})]:t._e()],2),t._v(" "),t.$scopedSlots.append?[n("div",{staticClass:"SharpDataList__row-append align-self-center"},[t._t("append",null,null,this)],2)]:[n("div",{staticClass:"SharpDataList__row-spacer"})]],2)}),[],!1,null,null,null);X.options.__file="DataListRow.vue";var J=X.exports,Z=n("FRYs"),tt=n.n(Z);function et(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function nt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var rt={components:{Pagination:W,DataListRow:J,Draggable:tt.a},props:{items:Array,columns:Array,paginated:Boolean,totalCount:Number,pageSize:Number,page:Number,reorderActive:Boolean,sort:String,dir:String,hideHeader:Boolean},data:function(){return{reorderedItems:null,appendWidth:0}},watch:{reorderActive:function(t){this.handleReorderActiveChanged(t)}},computed:{hasPagination:function(){return!!this.paginated&&this.totalCount/this.pageSize>1},draggableOptions:function(){return{disabled:!this.reorderActive}},currentItems:function(){return this.reorderActive?this.reorderedItems:this.items},isEmpty:function(){return 0===(this.items||[]).length},styles:function(){return{"--append-width":this.appendWidth?"".concat(this.appendWidth,"px"):null}}},methods:{handleItemsChanged:function(t){this.reorderedItems=t,this.$emit("change",t)},handleSortClicked:function(t){this.$emit("sort-change",{prop:t,dir:this.sort===t&&"asc"===this.dir?"desc":"asc"})},handlePageChanged:function(t){this.$emit("page-change",t)},handleReorderActiveChanged:function(t){this.reorderedItems=t?nt(this.items):null},getAppendWidth:function(t){if(!t)return 0;var e=t.querySelector(".SharpDataList__row-append");return e?e.offsetWidth:0},updateLayout:function(){var t,e=this;return(t=U.a.mark((function t(){var n,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.appendWidth=0,t.next=3,e.$nextTick();case 3:n=e.getAppendWidth(e.$refs.head),r=e.getAppendWidth(e.$refs.body),e.appendWidth=Math.max(n,r);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){et(a,r,i,o,s,"next",t)}function s(t){et(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},mounted:function(){this.updateLayout(),window.addEventListener("resize",this.updateLayout)},destroyed:function(){window.removeEventListener("resize",this.updateLayout)}},it=Object(k.a)(rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpDataList",class:{"SharpDataList--reordering":t.reorderActive},style:t.styles},[t.isEmpty?[n("div",{staticClass:"SharpDataList__empty p-3"},[t._t("empty"),t._v(" "),t._t("append-body")],2)]:[t.$slots["append-head"]?[n("div",{staticClass:"d-flex justify-content-end mb-3 d-sm-none"},[t._t("append-head")],2)]:t._e(),t._v(" "),n("div",{staticClass:"SharpDataList__table SharpDataList__table--border"},[t.hideHeader?t._e():[n("div",{ref:"head",staticClass:"SharpDataList__thead"},[n("DataListRow",{attrs:{columns:t.columns,header:""},scopedSlots:t._u([{key:"cell",fn:function(e){var r=e.column;return[n("span",[t._v(t._s(r.label))]),t._v(" "),r.sortable?[n("svg",{staticClass:"SharpDataList__caret",class:{"SharpDataList__caret--selected":t.sort===r.key,"SharpDataList__caret--ascending":t.sort===r.key&&"asc"===t.dir},attrs:{width:"10",height:"5",viewBox:"0 0 10 5","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M10 0L5 5 0 0z"}})]),t._v(" "),n("a",{staticClass:"SharpDataList__sort-link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.handleSortClicked(r.key)}}})]:t._e()]}},t.$slots["append-head"]?{key:"append",fn:function(){return[t._t("append-head")]},proxy:!0}:null],null,!0)})],1)],t._v(" "),n("div",{ref:"body",staticClass:"SharpDataList__tbody"},[n("Draggable",{attrs:{options:t.draggableOptions,value:t.reorderedItems},on:{input:t.handleItemsChanged}},[t._l(t.currentItems,(function(e){return[t._t("item",[n("DataListRow",{attrs:{columns:t.columns,row:e}})],{item:e})]}))],2),t._v(" "),t._t("append-body")],2)],2)],t._v(" "),t.hasPagination?[n("div",{staticClass:"SharpDataList__pagination-container"},[n("Pagination",{attrs:{"total-rows":t.totalCount,"per-page":t.pageSize,"min-page-end-buttons":3,limit:7,value:t.page},on:{change:t.handlePageChanged}})],1)]:t._e()],2)}),[],!1,null,null,null);it.options.__file="DataList.vue";var at=it.exports;function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){st(t,e,n[e])}))}return t}function st(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lt={name:"SharpDropdown",components:{BDropdown:n("3Zo4").a},props:ot(ot({},I.props),{},{text:[Boolean,String],showCaret:{type:Boolean,default:!0},disabled:Boolean}),computed:ot({},I.computed)},ct=Object(k.a)(lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-dropdown",t._b({staticClass:"SharpDropdown",attrs:{"toggle-class":t.classes,disabled:t.disabled,"no-caret":!t.showCaret,offset:"1",variant:"custom"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("span",{staticClass:"d-inline-block"},[t._t("text",[t._v(t._s(t.text))])],2)]},proxy:!0}],null,!0)},"b-dropdown",t.$attrs,!1),[t._v(" "),t._t("default")],2)}),[],!1,null,null,null);ct.options.__file="Dropdown.vue";var ut=ct.exports,dt=n("nqqA"),ht={name:"SharpDropdownItem",props:{active:Boolean,disabled:Boolean},components:{BDropdownItem:dt.a},methods:{handleClick:function(t){this.$emit("click",t)}}},ft=Object(k.a)(ht,(function(){var t=this.$createElement;return(this._self._c||t)("b-dropdown-item",{attrs:{active:this.active,disabled:this.disabled},on:{click:this.handleClick}},[this._t("default")],2)}),[],!1,null,null,null);ft.options.__file="DropdownItem.vue";var pt=ft.exports,mt={name:"SharpDropdownSeparator",components:{BDropdownDivider:n("9HyH").a}},vt=Object(k.a)(mt,(function(){var t=this.$createElement;return(this._self._c||t)("b-dropdown-divider")}),[],!1,null,null,null);vt.options.__file="DropdownSeparator.vue";var yt=vt.exports;function bt(t,e,n){var r=e.value;!n.children.length||n.children.every((function(t){return function(t){return t.text?0===t.text.trim().length:t.elm instanceof HTMLElement?"none"===t.elm.style.display:!t.tag}(t)}))?t.classList.add(r):t.classList.remove(r)}var gt=function(t,e){var n=e.value;n&&t.setAttribute("maxlength",n)};function _t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var wt={inserted:function(t){var e=window.getComputedStyle(t);if("sticky"===e.position){var n="".concat((parseInt(e.top)||0)+1,"px");new IntersectionObserver((function(t){var e=_t(t,1)[0];return e.target.classList.toggle("stuck",e.intersectionRatio<1&&e.rootBounds.top===e.intersectionRect.top)}),{threshold:[1],rootMargin:"-".concat(n," 0px 0px 0px")}).observe(t)}}};function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ct={name:"SharpGrid",props:{rows:{type:Array,required:!0},rowClass:[Function,String],colClass:{type:Function,default:function(){return null}}},methods:{colClasses:function(t){var e,n=t.size,r=t.sizeXS,i=!!n;return[(e={},St(e,"col-".concat(r),r),St(e,"col-md-".concat(n),i),St(e,"col-md",!i),e),this.colClass(t)]},rowClasses:function(t){return"function"==typeof this.rowClass?this.rowClass(t):this.rowClass}},directives:{"empty-class":{inserted:bt,componentUpdated:bt}}},xt=Object(k.a)(Ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpGrid"},[t._l(t.rows,(function(e){return[n("div",{staticClass:"SharpGrid__row row",class:t.rowClasses(e)},[t._l(e,(function(e){return[n("div",{directives:[{name:"empty-class",rawName:"v-empty-class",value:"SharpGrid__col--empty",expression:"'SharpGrid__col--empty'"}],staticClass:"SharpGrid__col",class:t.colClasses(e)},[t._t("default",null,{itemLayout:e})],2)]}))],2)]}))],2)}),[],!1,null,null,null);xt.options.__file="Grid.vue";var Ot=xt.exports,kt={name:"SharpItemVisual",props:{item:Object,iconClass:String,imageClass:String},computed:{iconClasses:function(){var t=[this.item.icon];return this.iconClass&&t.push(this.iconClass),t}}},jt=Object(k.a)(kt,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this.item.icon?[e("i",{staticClass:"fa",class:this.iconClasses})]:this.item.image?[e("img",{attrs:{src:this.item.image}})]:this._e()],2)}),[],!1,null,null,null);jt.options.__file="ItemVisual.vue";var Lt=jt.exports,Et={props:{visible:{type:Boolean,default:!0},small:Boolean,medium:Boolean},computed:{classes:function(){return{"SharpLoading--small":this.small,"SharpLoading--medium":this.medium}}}},Pt=Object(k.a)(Et,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"SharpLoading",class:this.classes},[e("div",{staticClass:"SharpLoading__content"},[e("svg",{staticClass:"SharpLoading__svg",attrs:{viewBox:"-75 -75 150 150"}},[e("circle",{attrs:{cx:"0",cy:"0",r:"37.5"}})])])])}),[],!1,null,null,null);Pt.options.__file="Loading.vue";var $t=Pt.exports,Bt={components:{Loading:$t},props:{visible:{type:Boolean,default:!0},absolute:Boolean},computed:{classes:function(){return{"SharpLoading__overlay--absolute":this.absolute}}}},At=Object(k.a)(Bt,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"SharpLoading__overlay",class:this.classes},[e("Loading",this._b({},"Loading",this.$attrs,!1))],1)}),[],!1,null,null,null);At.options.__file="LoadingOverlay.vue";var It=At.exports,Dt={methods:{getMergedIdentifier:function(t,e){for(var n=this.$parent;n&&null==n[t];)n=n.$parent;var r="";return n&&(r=n[t]+"."),"".concat(r).concat(e)}}},Ft={mixins:[Dt],props:{errorIdentifier:{type:[String,Number],required:!0}},computed:{mergedErrorIdentifier:function(){return this.getMergedIdentifier("mergedErrorIdentifier",this.errorIdentifier)}}},Tt={inject:["$field"],props:{focused:Boolean},watch:{focused:function(t){t&&this.$focusableElm.focus()}},data:function(){return{$focusableElm:null}},methods:{setFocusable:function(t){var e=this;this.$focusableElm=t,this.$field&&this.$focusableElm.addEventListener("blur",(function(t){e.$field.$emit("blur")}))}}},Mt=n("vDqi"),Vt=n.n(Mt),zt=n("eqyj"),Rt=n.n(zt);var Nt,Kt=(Nt=document.head.querySelector("meta[name=base-url]"))?"/".concat(Nt.content):"/sharp",qt="".concat(Kt,"/api"),Ut="".concat(qt,"/upload"),Ht=n("Qyje"),Gt=n.n(Ht);function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Yt(t,e,n[e])}))}return t}function Yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Xt(t){return Object.entries(t).reduce((function(t,e){var n=Qt(e,2),r=n[0],i=n[1];return Wt(Wt({},t),{},Yt({},r,function(t){return Array.isArray(t)&&!t.length?null:t}(i)))}),t||{})}function Jt(t){var e=Xt(t);return Gt.a.stringify(e,{strictNullHandling:!0})}function Zt(t){return new Promise((function(e){var n=new FileReader;n.addEventListener("loadend",(function(){e(JSON.parse(n.result))})),n.readAsText(t)}))}function te(t){return window.i18n[t]||""}var ee={state:{loading:!1,dialogs:[],currentEntity:null},mutations:{setLoading:function(t,e){t.loading=!!e},setDialogs:function(t,e){t.dialogs=e},setCurrentEntity:function(t,e){t.currentEntity=e}},getters:{isLoading:function(t){return!!t.loading}},actions:{setLoading:function(t,e){(0,t.commit)("setLoading",e)},setDialogs:function(t,e){(0,t.commit)("setDialogs",e)},setCurrentEntity:function(t,e){(0,t.commit)("setCurrentEntity",e)}}},ne=null;function re(){return ne||(ne=new a.a.Store(ee))}function ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ae(t,e,n[e])}))}return t}function ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function se(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var le=0;function ce(t){var e=t.text,n=t.okCallback,r=void 0===n?function(){}:n,i=t.okCloseOnly,a=t.isError,o=se(t,["text","okCallback","okCloseOnly","isError"]),s=le++;re().dispatch("setDialogs",[].concat(oe(re().state.dialogs),[{id:s,props:ie(ie({},o),{},{okOnly:i,noCloseOnBackdrop:i,noCloseOnEsc:i,visible:!0,isError:a}),okCallback:r,hiddenCallback:function(){re().dispatch("setDialogs",re().state.dialogs.filter((function(t){return t.id!==s})))},text:e}]))}function ue(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.title,r=se(e,["title"]);return ce(ie({okCloseOnly:!0,text:t,title:n},r))}function de(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.title,r=se(e,["title"]);return ce(ie({text:t,title:n},r))}function he(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function fe(t){t.interceptors.response.use((function(t){return t}),function(){var t,e=(t=U.a.mark((function t(e){var n,r,i,a,o,s;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.response,r=e.config.method,!(n.data instanceof Blob&&"application/json"===n.data.type)){t.next=6;break}return t.next=5,Zt(n.data);case 5:n.data=t.sent;case 6:if(i=n.data,a=n.status,o=i.message||te("modals.".concat(a,".message"))||te("modals.error.message"),s=te("modals.".concat(a,".title"))||te("modals.error.title"),(404!==a||"get"!==r)&&422!==a){t.next=11;break}return t.abrupt("return",Promise.reject(e));case 11:return ue(o,401===a||419===a?{title:s,isError:!0,okCallback:function(){location.reload()}}:{title:s,isError:!0}),t.abrupt("return",Promise.reject(e));case 13:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){he(a,r,i,o,s,"next",t)}function s(t){he(a,r,i,o,s,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}())}var pe=me();function me(){var t=Vt.a.create({baseURL:qt,paramsSerializer:Jt});return fe(t),t}function ve(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.params;return pe.getUri({url:"".concat(qt,"/").concat(t.replace(/^\//,"")),params:n})}var ye=n("qLf8"),be=n.n(ye);function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){_e(t,e,n[e])}))}return t}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var we={caseSensitive:!1,include:[],minMatchCharLength:1,shouldSort:!0,tokenize:!0,matchAllTokens:!1,findAllMatches:!1,id:null,keys:["value"],location:0,threshold:0,distance:0,maxPatternLength:64};var Se=n("wd/R"),Ce=n.n(Se);function xe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Oe(t){return Gt.a.stringify(t,{addQueryPrefix:!0,skipNulls:!0})}function ke(t){return Gt.a.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function je(t){return"SHARP : ".concat(t)}function Le(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).log.apply(e,[je(t)].concat(r))}function Ee(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).error.apply(e,[je(t)].concat(r))}var Pe=n("zuWl"),$e=n.n(Pe);function Be(t){if("fr"===t)return{KB:"Ko",MB:"Mo"}}function Ae(t){var e=(navigator.language||"").slice(0,2)||"en",n=Math.max($e()(t,{output:"exponent"}),1),r=Math.max(t,128),i=$e()(r,{standard:"jedec",round:2,exponent:n,locale:!0,symbols:Be(e)});return t<128?"< ".concat(i):i}function Ie(t){var e=t[t.length-2];return e?e.url:null}function De(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Fe=/^custom-(.+)$/;function Te(t){return Fe.test(t)}function Me(t){var e=De(t.match(Fe)||[],2),n=(e[0],e[1]),r=n?i.a.options.components["SharpCustomField_".concat(n)]:null;return r||Ee("unknown custom field type '".concat(t,"', make sure you register it correctly (https://sharp.code16.fr/docs/guide/custom-form-fields.html#register-the-custom-field)")),r}function Ve(t){setTimeout((function(){var e;null==t||null===(e=t.forEach)||void 0===e||e.call(t,(function(t){return n=(e=t).level,r=e.title,a=e.message,o=e.autoHide,void i.a.notify({title:r,type:n,text:a,duration:o?4e3:-1});var e,n,r,a,o}))}),500)}function ze(t){return re().dispatch("setLoading",!0),t.finally((function(){re().dispatch("setLoading",!1)}))}var Re=[],Ne=null;function Ke(t){return!Ne||t?Ne=new o.a({mode:"history",routes:Re,base:"".concat(Kt,"/"),parseQuery:ke,stringifyQuery:Oe}):Ne}function qe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.append,r=Ke().resolve(t),i=r.href,a=r.route;if(n){var o=Ke().currentRoute.path.replace(/\/$/,""),s=Ke().resolve(o+a.fullPath);i=s.href}return i}function Ue(t,e){return qe({name:"form",params:{entityKey:t.entityKey,instanceId:t.instanceId}},e)}function He(t,e){return qe({name:"show",params:{entityKey:t.entityKey,instanceId:t.instanceId}},e)}var Ge={computed:{language:function(){return document.documentElement.lang}},methods:{l:te}},We=function(t){return{methods:{lSub:function(e){return te("".concat(t,".").concat(e))}}}},Ye=n("sEfC"),Qe=n.n(Ye),Xe={mixins:[Dt],props:{configIdentifier:{type:String,required:!0}},computed:{mergedConfigIdentifier:function(){return this.getMergedIdentifier("mergedConfigIdentifier",this.configIdentifier)}}},Je={mixins:[{inject:["axiosInstance"],methods:{showLoading:function(){this.$store.dispatch("setLoading",!0)},hideLoading:function(){this.$store.dispatch("setLoading",!1)},installInterceptors:function(){var t=this;this.axiosInstance.interceptors.request.use((function(e){return t.showLoading(),e}),(function(t){return Promise.reject(t)})),this.axiosInstance.interceptors.response.use((function(e){return t.hideLoading(),e}),(function(e){return t.hideLoading(),Promise.reject(e)}))}},created:function(){this.synchronous||(this.installInterceptors(),this.showLoading())}}],inject:["axiosInstance"],data:function(){return{data:null,layout:null}},methods:{get:function(){var t=this;return this.axiosInstance.get(this.apiPath,{params:this.apiParams}).then((function(e){return t.mount(e.data),Ve(e.data.notifications),Promise.resolve(e)}))},post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.apiPath,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.data,n=arguments.length>2?arguments[2]:void 0;return this.axiosInstance.post(t,e,n)}}};function Ze(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function tn(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Ze(a,r,i,o,s,"next",t)}function s(t){Ze(a,r,i,o,s,"throw",t)}o(void 0)}))}}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){nn(t,e,n[e])}))}return t}function nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rn={data:function(){return{currentCommand:null,commandViewContent:null}},methods:{transformCommandForm:function(t){return en(en({},t),{},{layout:{tabs:[{columns:[{fields:t.layout}]}]}})},downloadCommandFile:function(t){var e=document.createElement("a");this.$el.appendChild(e),e.href=URL.createObjectURL(t.data),e.download=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t["content-disposition"];if(e&&e.includes("attachment")){var n=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,r=n.exec(e);if(null!=r&&r[1])return r[1].replace(/['"]/g,"")}return null}(t.headers),e.click()},handleCommandResponse:function(t){var e=this;return tn(U.a.mark((function n(){var r;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("application/json"!==t.data.type){n.next=7;break}return n.next=3,Zt(t.data);case 3:r=n.sent,e.handleCommandActionRequested(r.action,r),n.next=8;break;case 7:e.downloadCommandFile(t);case 8:case"end":return n.stop()}}),n)})))()},postCommandForm:function(t){var e=this;return tn(U.a.mark((function n(){var r,i;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.postFn,n.next=3,e.$refs.commandForm.submit({postFn:r});case 3:return i=n.sent,n.next=6,e.handleCommandResponse(i);case 6:e.currentCommand=null;case 7:case"end":return n.stop()}}),n)})))()},showCommandForm:function(t,e){var n=this;return tn(U.a.mark((function r(){var i,a,o,s;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.postForm,a=e.getFormData,!t.fetch_initial_data){r.next=7;break}return r.next=4,ze(a());case 4:r.t0=r.sent,r.next=8;break;case 7:r.t0={};case 8:o=r.t0,s=function(){return n.postCommandForm({postFn:i})},n.currentCommand=en(en({},t),{},{form:n.transformCommandForm(en(en({},t.form),{},{data:o}))}),n.$refs.commandForm.$on("submit",s),n.$refs.commandForm.$once("close",(function(){n.$refs.commandForm.$off("submit",s),n.currentCommand=null}));case 13:case"end":return r.stop()}}),r)})))()},sendCommand:function(t,e){var n=this;return tn(U.a.mark((function r(){var i,a,o,s,l,c;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.postCommand,a=e.getFormData,o=e.postForm,s=t.form,l=t.confirmation,!s){r.next=4;break}return r.abrupt("return",n.showCommandForm(t,{postForm:o,getFormData:a}));case 4:if(!l){r.next=7;break}return r.next=7,new Promise((function(t){de(l,{title:te("modals.command.confirm.title"),okCallback:t})}));case 7:return r.prev=7,r.next=10,ze(i());case 10:return c=r.sent,r.next=13,n.handleCommandResponse(c);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(7),console.error(r.t0);case 18:case"end":return r.stop()}}),r,null,[[7,15]])})))()},addCommandActionHandlers:function(t){this.commandHandlers=en(en({},this.commandHandlers),t)},handleCommandActionRequested:function(t,e){var n=this.commandHandlers[t];n&&n(e)},handleReloadCommand:function(){this.init()},handleInfoCommand:function(t){ue(t.message,{title:te("modals.command.info.title")})},handleViewCommand:function(t){this.commandViewContent=t.html},handleLinkCommand:function(t){window.location.href=t.link},handleCommandViewPanelClosed:function(){this.commandViewContent=null}},created:function(){this.addCommandActionHandlers({reload:this.handleReloadCommand,info:this.handleInfoCommand,link:this.handleLinkCommand,view:this.handleViewCommand})},mounted:function(){this.$refs.commandForm||console.error("withCommands: CommandForm not found")}},an={name:"SharpModal",mixins:[Ge],components:{LoadingOverlay:It,Loading:$t,BModal:n("aqyy").a},inheritAttrs:!1,props:{visible:Boolean,cancelTitle:String,title:String,okTitle:String,okOnly:Boolean,static:Boolean,isError:Boolean,loading:Boolean},methods:{show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()},handleVisiblityChanged:function(t){this.$emit("update:visible",t)}}},on=Object(k.a)(an,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",t._g(t._b({ref:"modal",attrs:{title:t.title,visible:t.visible,"ok-only":t.okOnly,static:t.static,"modal-class":"SharpModal","title-class":{"text-danger":t.isError},"header-class":{"pb-0":!t.title},"no-enforce-focus":""},on:{change:t.handleVisiblityChanged},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.cancel,i=e.ok;return[t.okOnly?t._e():[n("button",{staticClass:"btn btn-outline-primary",on:{click:r}},[t._v("\n                "+t._s(t.cancelTitle||t.l("modals.cancel_button"))+"\n            ")])],t._v(" "),n("button",{staticClass:"btn btn-primary position-relative",class:{"btn-lg":t.okOnly},attrs:{disabled:t.loading},on:{click:i}},[n("span",{class:{invisible:t.loading}},[t._v("\n                "+t._s(t.okTitle||t.l("modals.ok_button"))+"\n            ")]),t._v(" "),t.loading?[n("LoadingOverlay",{staticClass:"bg-transparent",attrs:{absolute:"",small:""}})]:t._e()],2)]}}])},"b-modal",t.$attrs,!1),t.$listeners),[t._t("default")],2)}),[],!1,null,null,null);on.options.__file="Modal.vue";var sn=on.exports,ln={components:{Modal:sn},props:{value:[Number,String],visible:Boolean,options:Array,title:String,okTitle:String,size:String},data:function(){var t;return{modalVisible:this.visible,selected:null!==(t=this.value)&&void 0!==t?t:null}},watch:{visible:function(t){this.modalVisible=t}},methods:{itemClass:function(t){return{"active bg-white text-primary":this.isSelected(t)}},isSelected:function(t){return t.value===this.selected},handleOptionSelected:function(t){this.$emit("select",t),this.selected=t.value},handleButtonClicked:function(){this.modalVisible=!0,this.$emit("update:visible",!0)},handleVisibleChanged:function(t){this.modalVisible=t,this.$emit("update:visible",t)},handleModalOkClicked:function(){this.$emit("input",this.selected),this.$emit("change",this.selected)}}},cn=Object(k.a)(ln,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default",null,{on:{click:t.handleButtonClicked}}),t._v(" "),n("Modal",{attrs:{visible:t.modalVisible,title:t.title,"ok-title":t.okTitle,"ok-only":"",size:t.size},on:{ok:t.handleModalOkClicked,change:t.handleVisibleChanged}},[n("div",{staticClass:"list-group",attrs:{role:"menu"}},[t._l(t.options,(function(e){return[n("div",{key:e.value,staticClass:"list-group-item list-group-item-action pe-2",class:t.itemClass(e),staticStyle:{cursor:"pointer","outline-offset":"4px"},attrs:{role:"menuitemradio",tabindex:"0","aria-checked":t.isSelected(e)},on:{click:function(n){return t.handleOptionSelected(e)},keydown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")&&t._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:t.handleOptionSelected(e)}}},[n("div",{staticClass:"py-1"},[n("div",{staticClass:"row align-items-center gx-3"},[t.$scopedSlots["item-prepend"]?[n("div",{staticClass:"col-auto"},[t._t("item-prepend",null,{option:e})],2)]:t._e(),t._v(" "),n("div",{staticClass:"col"},[t._v("\n                                "+t._s(e.label)+"\n                            ")]),t._v(" "),n("div",{staticClass:"col-auto",class:{invisible:!t.isSelected(e)}},[n("div",{staticClass:"bg-primary text-inverted d-inline-flex rounded-circle justify-content-center align-items-center",staticStyle:{width:"1.5em",height:"1.5em"}},[n("i",{staticClass:"fas fa-check fa-sm"})])])],2)])])]}))],2)])],2)}),[],!1,null,null,null);cn.options.__file="ModalSelect.vue";var un=cn.exports,dn=n("jl8+"),hn=n.n(dn);function fn(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function pn(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){fn(a,r,i,o,s,"next",t)}function s(t){fn(a,r,i,o,s,"throw",t)}o(void 0)}))}}function mn(t){return vn.apply(this,arguments)}function vn(){return(vn=pn(U.a.mark((function t(e){var n,r;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,10)}));case 2:n=e.$el.querySelector(".multiselect__content"),(r=n.getBoundingClientRect()).bottom>window.innerHeight&&window.scrollBy({top:r.bottom-window.innerHeight+20,behavior:"smooth"});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var bn={name:"SharpMultiselect",functional:!0,render:function(t,e){var n=e.data,r=e.children,i=void 0===r?[]:r,a=e.props;return a.placeholder||(n.attrs.placeholder=te("form.multiselect.placeholder")),n.class=["form-control",n.class],n.attrs.showPointer=!1,a.disabled&&(n.attrs.tabindex=-1),t({extends:hn.a,watch:{isOpen:function(t){t&&mn(this)}},computed:{isSingleLabelVisible:function(){return 0===this.singleValue||hn.a.computed.isSingleLabelVisible.call(this)}},mounted:function(){var t=this;this.$el.addEventListener("blur",(function(){return t.deactivate()}))}},n,[t("template",{slot:"maxElements"},te("form.multiselect.max_text"))].concat(yn(i)))}},gn=Object(k.a)(bn,void 0,void 0,!1,null,null,null);gn.options.__file="Multiselect.vue";var _n=gn.exports,wn={props:{value:String,placeholder:String,active:Boolean,disabled:Boolean},data:function(){return{localActive:!!this.active}},watch:{active:function(t){this.localActive=t}},computed:{clearVisible:function(){return this.value&&this.value.length>0}},methods:{handleClearButtonClicked:function(){this.$emit("clear"),this.$emit("input",""),this.$refs.input.focus()},handleInput:function(t){this.$emit("input",t.target.value)},handleFocused:function(){this.localActive=!0,this.$emit("focus"),this.$emit("update:active",!0)},handleBlur:function(){this.localActive=!1,this.$emit("blur"),this.$emit("update:active",!1)},handleSubmitted:function(){this.$emit("submit")}}},Sn=Object(k.a)(wn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpSearch",attrs:{role:"search"}},[n("form",{staticClass:"h-100",on:{submit:function(e){return e.preventDefault(),t.handleSubmitted(e)}}},[n("label",{staticClass:"SharpSearch__label visually-hidden",attrs:{id:"ab-search-label",for:"ab-search-input"}},[t._v(t._s(t.placeholder))]),t._v(" "),n("div",{staticClass:"position-relative"},[n("svg",{staticClass:"SharpSearch__magnifier",attrs:{width:"16",height:"16",viewBox:"0 0 16 16","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M6 2c2.2 0 4 1.8 4 4s-1.8 4-4 4-4-1.8-4-4 1.8-4 4-4zm0-2C2.7 0 0 2.7 0 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zM16 13.8L13.8 16l-3.6-3.6 2.2-2.2z"}}),t._v(" "),n("path",{attrs:{d:"M16 13.8L13.8 16l-3.6-3.6 2.2-2.2z"}})]),t._v(" "),n("input",{ref:"input",staticClass:"SharpSearch__input form-control form-control-sm",attrs:{placeholder:t.placeholder,disabled:t.disabled,type:"text",id:"ab-search-input",role:"search","aria-labelledby":"ab-search-label"},domProps:{value:t.value},on:{input:t.handleInput,focus:t.handleFocused,blur:t.handleBlur}}),t._v(" "),n("button",{staticClass:"btn btn-sm SharpSearch__close text-muted h-100 d-inline-flex align-items-center",class:{invisible:!t.clearVisible},attrs:{type:"button","aria-label":"Clear search"},on:{click:t.handleClearButtonClicked}},[n("svg",{attrs:{width:"1.25em",height:"1.25em",viewBox:"0 0 16 16","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm3.5 10.1l-1.4 1.4L8 9.4l-2.1 2.1-1.4-1.4L6.6 8 4.5 5.9l1.4-1.4L8 6.6l2.1-2.1 1.4 1.4L9.4 8l2.1 2.1z"}})])])])])])}),[],!1,null,null,null);Sn.options.__file="Search.vue";var Cn=Sn.exports,xn={name:"SharpStateIcon",props:{color:{required:!0,type:String}},computed:{style:function(){return{background:this.color}}}},On=Object(k.a)(xn,(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"StateIcon",style:this.style})}),[],!1,null,null,null);On.options.__file="StateIcon.vue";var kn=On.exports;function jn(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Ln={name:"SharpTab",components:{BTab:n("YZAB").a},provide:function(){return{$tab:this}},props:{title:String},data:function(){return{errors:{}}},computed:{hasError:function(){return Object.keys(this.errors).length>0},classes:function(){return{"is-invalid":this.hasError}}},methods:{setError:function(t){this.$set(this.errors,t,!0)},clearError:function(t){this.$delete(this.errors,t)},handleActiveChanged:function(t){var e,n=this;return(e=U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,n.$nextTick();case 3:n.$emit("active");case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(t){jn(a,r,i,o,s,"next",t)}function s(t){jn(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},created:function(){var t=this;this.$on("error",(function(e){return t.setError(e)})),this.$on("clear",(function(e){return t.clearError(e)}))}},En=Object(k.a)(Ln,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-tab",{attrs:{"title-link-class":t.classes},on:{"update:active":t.handleActiveChanged},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n        "+t._s(t.title)+"\n    ")]},proxy:!0}])},[t._v(" "),t._t("default")],2)}),[],!1,null,null,null);En.options.__file="Tab.vue";var Pn=En.exports,$n={name:"SharpTabs",components:{BTabs:n("+QIf").a},computed:{dropdownButtonClasses:function(){return this.tabs[this.currentTab].hasError?"error-dot":this.tabsHaveError?"error-dot--partial":""}}},Bn=Object(k.a)($n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-tabs",{staticClass:"SharpTabs",attrs:{"nav-class":"SharpTabs__nav mb-4 align-items-center",pills:""},scopedSlots:t._u([{key:"tabs-start",fn:function(){return[n("li",{staticClass:"nav-item me-sm-auto"},[t._t("nav-prepend")],2)]},proxy:!0},{key:"tabs-end",fn:function(){return[n("li",{staticClass:"ms-auto"})]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);Bn.options.__file="Tabs.vue";var An=Bn.exports,In={name:"SharpTabbedLayout",props:{layout:Object},components:{Tabs:An,Tab:Pn},computed:{showTabs:function(){return this.layout.tabbed&&this.layout.tabs.length>1}}},Dn=Object(k.a)(In,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpTabbedLayout"},[t.showTabs?[n("Tabs",{scopedSlots:t._u([{key:"nav-prepend",fn:function(){return[t._t("nav-prepend")]},proxy:!0}],null,!0)},[t._v(" "),t._l(t.layout.tabs,(function(e,r){return[n("Tab",{key:"tab-"+r,attrs:{title:e.title}},[t._t("default",null,{tab:e})],2)]}))],2)]:[n("div",{staticClass:"tab-pane"},[t.$slots["nav-prepend"]?[n("div",{staticClass:"mb-3"},[t._t("nav-prepend")],2)]:t._e(),t._v(" "),t._l(t.layout.tabs,(function(e){return[t._t("default",null,{tab:e})]}))],2)]],2)}),[],!1,null,null,null);Dn.options.__file="TabbedLayout.vue";var Fn=Dn.exports;function Tn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Mn={name:"SharpTemplate",props:{name:String,templateData:Object,templateProps:Array,template:String},computed:{component:function(){var t,e;return{name:"SharpTemplate".concat(this.name),template:'<div class="SharpTemplate">'.concat(null!==(t=this.template)&&void 0!==t?t:"","</div>"),props:[].concat(Tn(this.templateProps||[]),Tn(Object.keys(null!==(e=this.templateData)&&void 0!==e?e:{}))),mounted:function(){var t;(null===(t=this.$el.children)||void 0===t?void 0:t.length)>0&&this.$el.classList.add("SharpTemplate--has-children")}}}}},Vn=Object(k.a)(Mn,(function(){var t=this.$createElement;return(this._self._c||t)(this.component,this._b({tag:"component"},"component",this.templateData,!1))}),[],!1,null,null,null);Vn.options.__file="TemplateRenderer.vue";var zn=Vn.exports,Rn={props:{name:String}},Nn=(n("ynHM"),Object(k.a)(Rn,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"unknown-field"},[e("span",[this._v("Unknown field «"+this._s(this.name)+"»")])])}),[],!1,null,"d6c36028",null));Nn.options.__file="UnknownField.vue";var Kn=Nn.exports;function qn(t){var e,n,r,i=t.url,a=t.method,o=t.locale,s=t.searchAttribute,l=t.query,c=t.dataWrapper,u=t.fieldKey,d=t.cancelToken,h="get"===a.toLowerCase(),f=(r=l,(n=s)in(e={locale:o})?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e);return Vt()({url:i,method:a,params:h?f:void 0,data:h?void 0:f,cancelToken:d}).then((function(t){var e,n,r;return function(t){var e=t.results,n=t.dataWrapper,r=t.fieldKey,i=t.url;if(e){if(n&&!e.hasOwnProperty(n))return Ee("Autocomplete (".concat(r,'): dataWrapper "').concat(n,'" seems to be invalid :')),Ee('- search url "'.concat(i,'"')),Ee("- results",e),!1;if(!n&&!Array.isArray(e))return Ee("Autocomplete (".concat(r,"): search results response is not an array, please use setDataWrapper() if results are wrapped inside an object (https://sharp.code16.fr/docs/guide/form-fields/autocomplete.html#setdatawrapper)")),Ee('- search url "'.concat(i,'"')),Ee("- response",e),!1}return!0}({results:t.data,dataWrapper:c,fieldKey:u,url:i})?c?null!==(e=null===(n=t.data)||void 0===n?void 0:n[c])&&void 0!==e?e:[]:null!==(r=t.data)&&void 0!==r?r:[]:[]}))}var Un={inject:{$form:{default:function(){return new i.a}}},props:{locale:String,localized:Boolean},computed:{locales:function(){return this.$form.locales},isLocalized:function(){return this.$form.localized&&this.localized}}};function Hn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Gn(t,e,n[e])}))}return t}function Gn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Qn=["text","textarea"];function Xn(t){return Qn.includes(t.type)}function Jn(t){var e,n=t.localeObject,r=t.locale,i=t.value,a=Hn(Hn({},n),{},Gn({},r,i));return e=a,Object.entries(e).every((function(t){var e=Wn(t,2);return e[0],function(t){return null===t||""===t}(e[1])}))?null:a}function Zn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var tr={mixins:[Un],computed:{localizedSearchKeys:function(){var t=this;return this.localized?this.searchKeys.map((function(e){var n=e;return t.localizedDataKeys.includes(e)&&(n+=".".concat(t.locale)),n})):this.searchKeys},localizedDataKeys:function(){var t=this;return Array.isArray(this.localValues)&&this.localValues.length?Object.keys(this.localValues[0]).filter((function(e){return t.isLocaleObject(t.localValues[0][e])})):[]}},methods:{isLocaleObject:function(t){return this.locales&&function(t,e){return!(!t||"object"!==Yn(t))&&e.every((function(e){return e in t}))}(t,this.locales)},localizedTemplateData:function(t){var e=this;return this.localized?Object.entries(t).reduce((function(t,n){var r=Zn(n,2),i=r[0],a=r[1];return t[i]=e.isLocaleObject(a)?a[e.locale]:a,t}),{}):t}}},er=n("mwIZ"),nr=n.n(er),rr=n("7wO+"),ir=n.n(rr);function ar(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){or(t,e,n[e])}))}return t}function or(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sr(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var lr=/{{([\s\S]+?)}}/g;function cr(t,e){return(t||[]).find((function(t){return t.name===e}))}function ur(t){var e=t.dynamicOptions,n=void 0===e?{}:e,r=t.attributeValue;return"map"===n.type?n.path:"template"===n.type?sr(r.matchAll(lr)).map((function(t){return t[1].trim()})):[]}function dr(t){var e=t.dynamicOptions,n=t.attributeValue,r=t.contextData,i=t.contextSources;return"map"===e.type?function(t){var e=t.map,n=t.path,r=t.contextData,i=n.map((function(t){return r[t]}));return nr()(e,i)}({map:n,path:e.path,contextData:r}):"template"===e.type?function(t){var e=t.template,n=t.sources,r=t.contextData,i=ir()(e,{interpolate:lr,evaluate:!1,escape:!1}),a=(n||[]).reduce((function(t,e){return ar(ar({},t),{},or({},e,null))}),{});return i(ar(ar({},a),r))}({template:n,sources:i,contextData:r}):n}function hr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){fr(t,e,n[e])}))}return t}function fr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function mr(t,e,n){var r=Object.entries(t||{}).reduce((function(t,r){var i=pr(r,2),a=i[0],o=function(t,e,n){var r=n.dynamicAttributes,i=n.contextData,a=cr(r,t),o=ur({dynamicOptions:a,attributeValue:e});return a?function(t){var e=t.contextSources,n=t.contextData;return e.filter((function(t){var e=n[t];return null==e||""===e}))}({contextSources:o,contextData:i}).length>0?{isEmpty:null==a.default,value:a.default}:{value:dr({dynamicOptions:a,attributeValue:e,contextData:i,contextSources:o})}:{value:e}}(a,i[1],{dynamicAttributes:e,contextData:n}),s=t.resolvedEmptyAttributes||[];return o.isEmpty&&s.push(a),hr(hr({},t),{},{resolvedEmptyAttributes:s,attributes:hr(hr({},t.attributes),{},fr({},a,o.value))})}),{});return{attributes:r.attributes,resolvedEmptyAttributes:r.resolvedEmptyAttributes}}function vr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){yr(t,e,n[e])}))}return t}function yr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function br(t,e,n){return Object.values(t).filter((function(t){return n=e,r=t.dynamicAttributes,i=t,(r||[]).some((function(t){return ur({dynamicOptions:t,attributeValue:i[t.name]}).includes(n)}));var n,r,i})).reduce((function(t,e){return vr(vr({},t),{},yr({},e.key,n?n(e,null):null))}),{})}function gr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.dependantAttributes,i=t.$attrs.dynamicAttributes,a=(r||[]).some((function(t){return cr(i,t)}));a?t.$nextTick(e):e()}function _r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){wr(t,e,n[e])}))}return t}function wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Cr(t,e){var n=function(t,e){return Object.entries(t).reduce((function(t,n){var r=Sr(n,2),i=r[0],a=r[1],o=e[i];return _r(_r({},t),{},wr({},i,function(t,e){return"autocomplete"===t&&e?e.id:e}(o.type,a)))}),{})}(e,t);return Object.entries(t).reduce((function(t,e){var r=Sr(e,2),i=r[0],a=r[1],o=mr(a,a.dynamicAttributes,n),s=o.attributes,l=o.resolvedEmptyAttributes,c=s.readOnly||l.length>0;return _r(_r({},t),{},wr({},i,_r(_r({},s),{},{readOnly:c})))}),{})}function xr(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Or={name:"SharpAutocomplete",components:{Multiselect:hn.a,TemplateRenderer:zn,Loading:$t,ClearButton:T},mixins:[Ge,tr],props:{fieldKey:String,value:[String,Number,Object,Array],mode:String,localValues:{type:Array,default:function(){return[]}},placeholder:{type:String,default:function(){return te("form.multiselect.placeholder")}},remoteEndpoint:String,remoteMethod:String,remoteSearchAttribute:{type:String,default:"query"},itemIdAttribute:{type:String,default:"id"},searchMinChars:{type:Number,default:1},searchKeys:{type:Array,default:function(){return["value"]}},dataWrapper:String,readOnly:Boolean,listItemTemplate:String,resultItemTemplate:String,noResultItem:Boolean,multiple:Boolean,hideSelected:Boolean,searchable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},clearOnSelect:Boolean,preserveSearch:{type:Boolean,default:!0},showPointer:{type:Boolean,default:!0},dynamicAttributes:Array,debounceDelay:{type:Number,default:400},nowrap:Boolean},data:function(){return{ready:!1,query:"",suggestions:this.localValues,opened:!1,isLoading:!1}},watch:{localValues:function(){this.isRemote||this.updateLocalSuggestions(this.query)}},computed:{isRemote:function(){return"remote"===this.mode},hideDropdown:function(){return this.isQueryTooShort},isQueryTooShort:function(){return this.isRemote&&this.query.length<this.searchMinChars},clearButtonVisible:function(){return!!this.value&&!this.opened},classes:function(){return{"SharpAutocomplete--remote":this.isRemote,"SharpAutocomplete--disabled":this.readOnly,"SharpAutocomplete--wrap":!this.nowrap}},overlayVisible:function(){var t=!!this.fieldKey;return this.value&&t}},methods:{updateSuggestions:function(t){this.query=t,this.isQueryTooShort||(this.isRemote?(this.isLoading=!0,this.updateRemoteSuggestions(t)):this.updateLocalSuggestions(t))},updateLocalSuggestions:function(t){this.suggestions=t.length>=this.searchMinChars?function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.searchKeys,i=new be.a(t,ge(ge({},we),{},{keys:r}));return i.search(e)}(this.localValues,t,{searchKeys:this.searchKeys}):this.localValues},updateRemoteSuggestions:function(t){var e,n=this;return null===(e=this.cancelSource)||void 0===e||e.cancel(),this.cancelSource=Mt.CancelToken.source(),qn({url:this.remoteEndpoint,method:this.remoteMethod,locale:this.locale,searchAttribute:this.remoteSearchAttribute,dataWrapper:this.dataWrapper,fieldKey:this.fieldKey,query:t,cancelToken:this.cancelSource.token}).then((function(t){n.suggestions=t,n.scroll()})).finally((function(){n.isLoading=!1}))},scroll:function(){mn(this)},handleSelect:function(t){this.$emit("input",t)},handleDropdownClose:function(){this.opened=!1,this.$emit("close")},handleDropdownOpen:function(){this.opened=!0,this.$emit("open"),this.scroll()},handleClearButtonClicked:function(){var t=this;this.$emit("input",null),this.$nextTick((function(){t.$refs.multiselect.activate()}))},itemMatchValue:function(t){return t[this.itemIdAttribute]==this.value[this.itemIdAttribute]},findLocalValue:function(){return this.value&&null!=this.value[this.itemIdAttribute]?this.localValues.some(this.itemMatchValue)?this.localValues.find(this.itemMatchValue):(Ee("Autocomplete (key: ".concat(this.fieldKey,") can't find local value matching : ").concat(JSON.stringify(this.value))),null):null},setDefault:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("input",e.findLocalValue(),{force:!0}),t.next=3,e.$nextTick();case 3:e.ready=!0;case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){xr(a,r,i,o,s,"next",t)}function s(t){xr(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},created:function(){this.updateRemoteSuggestions=Qe()(this.updateRemoteSuggestions,this.debounceDelay),"local"!==this.mode||this.searchKeys||function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).warn.apply(e,[je(t)].concat(r))}("Autocomplete (key: ".concat(this.fieldKey,") has local mode but no searchKeys, default set to ['value']")),this.isRemote?this.ready=!0:gr(this,this.setDefault,{dependantAttributes:["localValues"]})}},kr=Object(k.a)(Or,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpAutocomplete",class:t.classes},[t.overlayVisible?[n("div",{staticClass:"form-control clearable SharpAutocomplete__result"},[n("TemplateRenderer",{attrs:{name:"ResultItem",template:t.resultItemTemplate,"template-data":t.localizedTemplateData(t.value),"template-props":t.searchKeys}}),t._v(" "),n("ClearButton",{on:{click:t.handleClearButtonClicked}})],1)]:t.ready?[n("Multiselect",{ref:"multiselect",staticClass:"SharpAutocomplete__multiselect form-control",class:{"form-select":!this.isRemote,"SharpAutocomplete__multiselect--hide-dropdown":t.hideDropdown},attrs:{value:t.value,options:t.suggestions,"track-by":t.itemIdAttribute,"internal-search":!1,placeholder:t.placeholder,loading:t.isLoading,multiple:t.multiple,disabled:t.readOnly,"hide-selected":t.hideSelected,"allow-empty":t.allowEmpty,"preserve-search":t.preserveSearch,"show-pointer":t.showPointer,searchable:t.searchable,readonly:t.readOnly,tabindex:t.readOnly?-1:0},on:{"search-change":function(e){return t.updateSuggestions(e)},select:t.handleSelect,input:function(e){return t.$emit("multiselect-input",e)},close:t.handleDropdownClose,open:t.handleDropdownOpen},scopedSlots:t._u([{key:"clear",fn:function(){return[t.clearButtonVisible?[n("ClearButton",{on:{click:t.handleClearButtonClicked}})]:t._e()]},proxy:!0},{key:"singleLabel",fn:function(e){var r=e.option;return[n("TemplateRenderer",{attrs:{name:"ResultItem",template:t.resultItemTemplate,"template-data":t.localizedTemplateData(r),"template-props":t.searchKeys}})]}},{key:"option",fn:function(e){var r=e.option;return[n("TemplateRenderer",{attrs:{name:"ListItem",template:t.listItemTemplate,"template-data":t.localizedTemplateData(r),"template-props":t.searchKeys}})]}},{key:"loading",fn:function(){return[n("Loading",{attrs:{visible:t.isLoading,small:""}})]},proxy:!0},{key:"noResult",fn:function(){return[t._v("\n                "+t._s(t.l("form.autocomplete.no_results_text"))+"\n            ")]},proxy:!0}])})]:t._e()],2)}),[],!1,null,null,null);kr.options.__file="Autocomplete.vue";var jr=kr.exports,Lr={name:"SharpTextarea",props:{value:{type:String},placeholder:String,readOnly:Boolean,maxLength:Number,rows:Number},data:function(){return{}},methods:{handleInput:function(t){this.$emit("input",t.target.value)}},directives:{maxlength:gt}},Er=Object(k.a)(Lr,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"maxlength",rawName:"v-maxlength",value:t.maxLength,expression:"maxLength"}],staticClass:"SharpTextarea form-control",attrs:{rows:t.rows,placeholder:t.placeholder,disabled:t.readOnly},domProps:{value:t.value},on:{input:t.handleInput}},[t._v(t._s(t.value))])}),[],!1,null,null,null);Er.options.__file="Textarea.vue";var Pr=Er.exports,$r={name:"SharpText",mixins:[Tt],props:{value:[String,Number],placeholder:String,readOnly:Boolean,maxLength:Number,inputType:{type:String,default:"text"}},data:function(){return{}},methods:{handleInput:function(t){this.$emit("input",t.target.value)}},mounted:function(){this.setFocusable(this.$refs.input)},directives:{maxlength:gt}},Br=Object(k.a)($r,(function(){var t=this.$createElement;return(this._self._c||t)("input",{directives:[{name:"maxlength",rawName:"v-maxlength",value:this.maxLength,expression:"maxLength"}],ref:"input",staticClass:"SharpText form-control",attrs:{type:this.inputType,placeholder:this.placeholder,disabled:this.readOnly},domProps:{value:this.value},on:{input:this.handleInput}})}),[],!1,null,null,null);Br.options.__file="Text.vue";var Ar=Br.exports,Ir=n("6/sb"),Dr=n.n(Ir),Fr=n("d90G"),Tr=n("lcPr"),Mr=n.n(Tr),Vr={props:{compactThumbnail:Boolean},computed:{modifiers:function(){return{compacted:this.compactThumbnail}}}},zr={props:{modifiers:{type:Object,default:function(){}}},computed:{modifiersClasses:function(){return{"SharpUpload--compacted":this.modifiers.compacted}}}};function Rr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Nr(t,e,n[e])}))}return t}function Nr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kr(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var qr={name:"SharpVueClip",extends:Fr.a,components:{Modal:sn,VueCropper:Mr.a,Button:I},inject:["axiosInstance","$form","$field"],mixins:[Ge,zr],props:{downloadId:String,pendingKey:String,ratioX:Number,ratioY:Number,value:Object,croppableFileTypes:Array,readOnly:Boolean,root:Boolean},data:function(){return{showEditModal:!1,croppedImg:null,allowCrop:!1,cropData:null,isNew:!this.value,canDownload:!!this.value}},watch:{value:function(t){t||(this.files=[])},"file.status":function(t){t in this.statusFunction&&this[this.statusFunction[t]]()}},computed:{file:function(){return this.files[0]},originalImageSrc:function(){return this.file&&(this.file.thumbnail||this.file.dataUrl)},imageSrc:function(){return this.croppedImg||this.originalImageSrc},size:function(){return null!=this.file.size?Ae(this.file.size):null},operationFinished:function(){return{crop:this.hasInitialCrop?!!this.croppedImg:null}},operations:function(){return Object.keys(this.operationFinished)},activeOperationsCount:function(){var t=this;return this.operations.filter((function(e){return null!==t.operationFinished[e]})).length},operationFinishedCount:function(){var t=this;return this.operations.filter((function(e){return t.operationFinished[e]})).length},progress:function(){var t=this.file?this.file.progress:100,e=1-.05*(this.activeOperationsCount-this.operationFinishedCount);return Math.floor(t)*e},inProgress:function(){return this.file&&"exist"!==this.file.status&&this.progress<100},statusFunction:function(){return{error:"onStatusError",success:"onStatusSuccess",added:"onStatusAdded"}},fileName:function(){var t=this.file.name.split("/");return t.length?t[t.length-1]:""},fileExtension:function(){var t=this.fileName.split(".").pop();return t?".".concat(t):null},downloadUrl:function(){return t={entityKey:this.$form.entityKey,instanceId:this.$form.instanceId,fieldKey:this.downloadId,fileName:this.fileName},e=t.entityKey,n=t.instanceId,r=t.fieldKey,i=t.fileName,ve("form/download/".concat(r,"/").concat(e,"/").concat(n),{params:{fileName:i}});var t,e,n,r,i},showThumbnail:function(){return this.imageSrc},hasInitialCrop:function(){return!(!this.ratioX||!this.ratioY)&&this.isCroppable},isCroppable:function(){var t;return!((null===(t=this.file)||void 0===t?void 0:t.type)&&!this.file.type.match(/^image\//))&&(!this.croppableFileTypes||this.croppableFileTypes.includes(this.fileExtension))}},methods:{setPending:function(t){var e;null===(e=this.$form)||void 0===e||e.setUploading(this.pendingKey,t)},onStatusAdded:function(){this.$emit("reset"),this.setPending(!0)},onStatusError:function(){var t,e=this;return(t=U.a.mark((function t(){var n;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.file.errorMessage,e.remove(),t.next=4,e.$nextTick();case 4:e.$emit("error",n);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Kr(a,r,i,o,s,"next",t)}function s(t){Kr(a,r,i,o,s,"throw",t)}o(void 0)}))})()},onStatusSuccess:function(){var t=this,e={};try{e=JSON.parse(this.file.xhrResponse.responseText)}catch(t){console.log(t)}e.uploaded=!0,this.$emit("success",e),this.$emit("input",e),this.setPending(!1),this.allowCrop=!0,this.$nextTick((function(){t.isCropperReady()&&t.onCropperReady()}))},remove:function(){this.canDownload=!1,this.removeFile(this.file),this.files.splice(0,1),this.setPending(!1),this.resetEdit(),this.$emit("input",null),this.$emit("reset")},resetEdit:function(){this.croppedImg=null,this.cropData=null},onEditButtonClick:function(){this.$emit("active"),this.showEditModal=!0,this.allowCrop=!0},handleImageLoaded:function(){this.isNew&&this.$emit("image-updated")},handleRemoveClicked:function(){this.remove(),this.$emit("removed")},onEditModalHidden:function(){this.$emit("inactive")},onEditModalOk:function(){this.updateCroppedImage(this.$refs.modalCropper),this.updateCropData(this.$refs.modalCropper)},isCropperReady:function(){return this.$refs.cropper&&this.$refs.cropper.cropper.ready},onCropperReady:function(){this.hasInitialCrop&&(this.updateCroppedImage(this.$refs.cropper),this.updateCropData(this.$refs.cropper))},updateCropData:function(t){var e=t.getData(!0),n=t.getImageData(),r=n.naturalWidth,i=n.naturalHeight;Math.abs(e.rotate)%180&&(r=n.naturalHeight,i=n.naturalWidth);var a={width:e.width/r,height:e.height/i,x:e.x/r,y:e.y/i,rotate:-1*e.rotate};if(this.cropData=Rr({},e),this.allowCrop){var o=Rr(Rr({},this.value),{},{cropData:a});this.$emit("input",o),this.$emit("updated",o)}},updateCroppedImage:function(t){this.allowCrop&&(this.isNew=!0,this.croppedImg=t.getCroppedCanvas().toDataURL())},rotate:function(t){!function(t,e){var n=t.getCropBoxData(),r=t.getContainerData();n.width=2,n.height=2,n.top=0;var i=r.width/2-1;n.left=i,t.setCropBoxData(n),t.rotate(e);var a=t.getCanvasData(),o=a.height,s=r.height,l=s/o,c=a.width*l;a.height=s,a.width=c,a.top=0,a.width>=r.width?a.left=0:a.left=(r.width-a.width)/2,t.setCanvasData(a),n.left=0,n.top=0,n.width=a.width,n.height=a.height,t.setCropBoxData(n)}(this.$refs.modalCropper.cropper,t)}},created:function(){this.options.thumbnailWidth=null,this.options.thumbnailHeight=null,this.options.maxFiles=1,this.value&&(this.addedFile(Rr(Rr({},this.value),{},{upload:{}})),this.file.thumbnail=this.value.thumbnail,this.file.status="exist")},mounted:function(){var t=this.$refs.button.$el;this.uploader._uploader.disable(),this.uploader._uploader.listeners.forEach((function(e){return e.element=t})),this.uploader._uploader.clickableElements=[t],this.uploader._uploader.enable()},beforeDestroy:function(){this.setPending(!1),this.uploader._uploader.destroy()}},Ur=Object(k.a)(qr,(function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"SharpUpload",class:[{"SharpUpload--empty":!e.file,"SharpUpload--disabled":e.readOnly},e.modifiersClasses]},[r("div",{class:{"card card-body":e.file}},[r("form",{directives:[{name:"show",rawName:"v-show",value:!e.file,expression:"!file"}],staticClass:"dropzone"},[r("Button",{ref:"button",staticClass:"dz-message",attrs:{text:"",block:"",disabled:e.readOnly,type:"button"}},[e._v("\n                "+e._s(e.l("form.upload.browse_button"))+"\n            ")])],1),e._v(" "),e.file?[r("div",{staticClass:"SharpUpload__container",class:{row:e.showThumbnail}},[e.showThumbnail?r("div",{staticClass:"SharpUpload__thumbnail",class:[e.modifiers.compacted?"col-4 col-sm-3 col-xl-2":"col-4 col-md-4"]},[r("img",{attrs:{src:e.imageSrc},on:{load:e.handleImageLoaded}})]):e._e(),e._v(" "),r("div",{staticClass:"SharpUpload__infos",class:(t={},t[e.modifiers.compacted?"col-8 col-sm-9 col-xl-10":"col-8 col-md-8"]=e.showThumbnail,t)},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"SharpUpload__filename text-truncate d-block"},[e._v(e._s(e.fileName))]),e._v(" "),r("div",{staticClass:"SharpUpload__info mt-2"},[r("div",{staticClass:"row g-2"},[e.size?[r("div",{staticClass:"col-auto"},[e._v(e._s(e.size))])]:e._e(),e._v(" "),e.canDownload?[r("div",{staticClass:"col-auto"},[r("a",{staticClass:"SharpUpload__download-link",attrs:{href:e.downloadUrl,download:e.fileName}},[r("i",{staticClass:"fas fa-download"}),e._v("\n                                            "+e._s(e.l("form.upload.download_link"))+"\n                                        ")])])]:e._e()],2)]),e._v(" "),r("transition",{attrs:{name:"SharpUpload__progress"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.inProgress,expression:"inProgress"}],staticClass:"SharpUpload__progress mt-2"},[r("div",{staticClass:"SharpUpload__progress-bar",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"}})])])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}]},[r("Button",{directives:[{name:"show",rawName:"v-show",value:!!e.originalImageSrc&&!e.inProgress,expression:"!!originalImageSrc && !inProgress"}],attrs:{outline:"",small:"",disabled:!e.isCroppable},on:{click:e.onEditButtonClick}},[e._v("\n                            "+e._s(e.l("form.upload.edit_button"))+"\n                        ")]),e._v(" "),r("Button",{staticClass:"SharpUpload__remove-button",attrs:{variant:"danger",outline:"",small:"",disabled:e.readOnly},on:{click:e.handleRemoveClicked}},[e._v("\n                            "+e._s(e.l("form.upload.remove_button"))+"\n                        ")])],1)])])]:e._e(),e._v(" "),r("div",{ref:"clip-preview-template",staticClass:"clip-preview-template",staticStyle:{display:"none"}},[r("div")])],2),e._v(" "),e.originalImageSrc&&e.isCroppable?[r("Modal",{ref:"modal",attrs:{visible:e.showEditModal,"no-close-on-backdrop":"",title:e.l("modals.cropper.title")},on:{"update:visible":function(t){e.showEditModal=t},ok:e.onEditModalOk,hidden:e.onEditModalHidden}},[r("vue-cropper",{ref:"modalCropper",staticClass:"SharpUpload__modal-vue-cropper",attrs:{"view-mode":2,"drag-mode":"crop","aspect-ratio":e.ratioX/e.ratioY,"auto-crop-area":1,zoomable:!1,guides:!1,background:!0,rotatable:!0,src:e.originalImageSrc,data:e.cropData,alt:"Source image"}}),e._v(" "),r("div",{staticClass:"mt-3"},[r("Button",{on:{click:function(t){return e.rotate(-90)}}},[r("i",{staticClass:"fas fa-undo"})]),e._v(" "),r("Button",{on:{click:function(t){return e.rotate(90)}}},[r("i",{staticClass:"fas fa-redo"})])],1)],1),e._v(" "),r("vue-cropper",{ref:"cropper",staticClass:"d-none",attrs:{"aspect-ratio":e.ratioX/e.ratioY,"auto-crop-area":1,src:e.originalImageSrc,ready:e.onCropperReady}})]:e._e(),e._v(" "),r("a",{ref:"dlLink",staticStyle:{display:"none"}})],2)}),[],!1,null,null,null);Ur.options.__file="VueClip.vue";var Hr=Ur.exports,Gr={headers:{"X-XSRF-TOKEN":Rt.a.read("XSRF-TOKEN")}};function Wr(t){var e=1024*t*1024;return te("form.upload.message.file_too_big").replace(":size",Ae(e))}function Yr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qr=["Backspace","Enter"],Xr=["ArrowLeft","ArrowUp","ArrowDown","ArrowRight","Escape","Tab"],Jr=i.a.extend({mixins:[Vr],components:{VueClip:Hr},props:{downloadId:String,pendingKey:String,id:Number,value:Object,maxFileSize:Number,fileFilter:Array,ratioX:Number,ratioY:Number,croppableFileTypes:Array},data:function(){return{show:this.value,marker:null}},computed:{options:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Yr(t,e,n[e])}))}return t}({},Gr);return t.url=Ut,t.uploadMultiple=!1,this.fileFilter&&(t.acceptedFiles={extensions:this.fileFilter,message:te("form.upload.message.bad_extension")}),this.maxFileSize&&(t.maxFilesize={limit:this.maxFileSize,message:Wr(this.maxFileSize)}),t},dropzone:function(){return this.$refs.vueclip.uploader._uploader},fileInput:function(){return this.dropzone.hiddenFileInput}},methods:{handleAdded:function(){this.show=!0,this.$emit("added")},handleError:function(t){ue(t,{isError:!0,title:te("modals.error.title")}),this.$emit("error",t)},inputClick:function(){this.fileInput.click()}},mounted:function(){var t=this;this.$on("delete-intent",(function(){var e=t.$el.querySelector(".SharpUpload__remove-button");e.focus(),e.addEventListener("keydown",(function(e){Qr.includes(e.key)?t.$emit("remove"):Xr.includes(e.key)&&t.$emit("escape")}))}))}}),Zr=Object(k.a)(Jr,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("VueClip",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"vueclip",staticClass:"SharpMarkdownUpload",attrs:{"pending-key":t.pendingKey,"download-id":t.downloadId,options:t.options,value:t.value,ratioX:t.ratioX,ratioY:t.ratioY,"croppable-file-types":t.croppableFileTypes,modifiers:t.modifiers,"on-added-file":t.handleAdded},on:{error:t.handleError,success:function(e){return t.$emit("success",e)},removed:function(e){return t.$emit("remove")},updated:function(e){return t.$emit("update",e)},active:function(e){return t.$emit("active")},inactive:function(e){return t.$emit("inactive")},"image-updated":function(e){return t.$emit("refresh")}}})}),[],!1,null,null,null);Zr.options.__file="MarkdownUpload.vue";var ti=Zr.exports;function ei(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ni(t,e,n[e])}))}return t}function ni(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ri=function(t){var e=t.textProp;return{_localizedEditor:{textProp:e},mixins:[Un],computed:{localizedText:function(){return this.isLocalized?null!==this.value[e]?this.value[e][this.locale]:"":this.value[e]}},methods:{localizedValue:function(t){return ei(ei({},this.value),{},ni({},e,this.isLocalized?Jn({localeObject:this.value[e],locale:this.locale,value:t}):t))}}}},ii={bold:"fas fa-bold",italic:"fas fa-italic",strike:"fas fa-strikethrough",link:"fas fa-link",h1:"fas fa-heading",h2:"fas fa-heading fa-sm",h3:"fas fa-heading fa-xs",quote:"fas fa-quote-right",code:"fas fa-code",ul:"fas fa-list-ul",ol:"fas fa-list-ol",indent:"fas fa-indent","de-indent":"fas fa-outdent",undo:"fas fa-undo",redo:"fas fa-redo",hr:"fas fa-minus",image:"far fa-image",document:"fas fa-paperclip"};function ai(t){return ii[t]||null}var oi={bold:{name:"bold",action:Dr.a.toggleBold,className:ai("bold"),title:"Bold"},italic:{name:"italic",action:Dr.a.toggleItalic,className:ai("italic"),title:"Italic"},"heading-1":{name:"heading-1",action:Dr.a.toggleHeading1,className:ai("h1"),title:"Big Heading"},"heading-2":{name:"heading-2",action:Dr.a.toggleHeading2,className:ai("h2"),title:"Medium Heading"},"heading-3":{name:"heading-3",action:Dr.a.toggleHeading3,className:ai("h3"),title:"Small Heading"},code:{name:"code",action:Dr.a.toggleCodeBlock,className:ai("code"),title:"Code"},quote:{name:"quote",action:Dr.a.toggleBlockquote,className:ai("quote"),title:"Quote"},"unordered-list":{name:"unordered-list",action:Dr.a.toggleUnorderedList,className:ai("ul"),title:"Generic List"},"ordered-list":{name:"ordered-list",action:Dr.a.toggleOrderedList,className:ai("ol"),title:"Numbered List"},link:{name:"link",action:Dr.a.drawLink,className:ai("link"),title:"Create Link"},image:{name:"image",action:Dr.a.drawImage,className:ai("image"),title:"Insert Image"},document:{name:"document",action:Dr.a.drawImage,className:ai("document"),title:"Insert Document"},"horizontal-rule":{name:"horizontal-rule",action:Dr.a.drawHorizontalRule,className:ai("hr"),title:"Insert Horizontal Line"},undo:{name:"undo",action:Dr.a.undo,className:ai("undo"),title:"Undo"},redo:{name:"redo",action:Dr.a.redo,className:ai("redo"),title:"Redo"}};function si(t){return function(e,n){t(n)}}function li(t,e){var n=t.value.substring(0,t.selectionStart||0),r=t.value.substring(t.selectionEnd||0),i=0===n.length||n.match(/\n$/)?"":"\n",a=n+i+e;t.value=a+r,t.selectionStart=a.length,t.selectionEnd=t.selectionStart,t.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),t.focus()}function ci(t){var e,n=t.dataTransfer;if(n&&!function(t){return Array.from(t.types).indexOf("Files")>=0}(n)){var r=vi(n);if(r){t.stopPropagation(),t.preventDefault();var i=null!==(e=t.currentTarget)&&void 0!==e?e:t.target;i instanceof HTMLTextAreaElement&&li(i,mi(r))}}}function ui(t){var e=t.dataTransfer;e&&(e.dropEffect="copy")}function di(t){var e;if(t.clipboardData){var n=vi(t.clipboardData);if(n){t.stopPropagation(),t.preventDefault();var r=null!==(e=t.currentTarget)&&void 0!==e?e:t.target;r instanceof HTMLTextAreaElement&&li(r,mi(n))}}}function hi(t){return(t.textContent||"").trim().replace(/\|/g,"\\|").replace(/\n/g," ")||" "}function fi(t){var e=t.align||t.style.textAlign;return e||(t.firstElementChild?fi(t.firstElementChild):void 0)}function pi(t,e){return Array.from(e.querySelectorAll("td, th")).map((function(e){var n=function(t,e){var n=Array.from(e.parentElement.children).indexOf(e),r=Array.from(t.querySelectorAll("td:nth-child(".concat(n+1,"), th:nth-child(").concat(n+1,")"))).filter((function(t){return(t.textContent||"").match(/\S/)}));if(!r.length)return null;var i=fi(r[0]);return r.every((function(t){return fi(t)===i}))?i:void 0}(t,e);return"right"===n?" --:":"center"===n?":--:":" -- "}))}function mi(t){var e=Array.from(t.querySelectorAll("tr")),n=e.shift();if(!n)return"";var r,i=(r=n,Array.from(r.querySelectorAll("td, th")).map(hi)),a=pi(t,n),o="".concat(i.join(" | "),"\n").concat(a.join("|"),"\n"),s=e.map((function(t){return Array.from(t.querySelectorAll("td")).map(hi).join(" | ")})).join("\n");return"\n".concat(o).concat(s,"\n\n")}function vi(t){if(-1===Array.from(t.types).indexOf("text/html"))return null;var e=t.getData("text/html");if(!/<table/i.test(e))return null;var n=function(t){var e=document.createElement("div");return e.innerHTML=t,e.querySelector("table")}(e);return!n||n.closest("[data-paste-markdown-skip]")?null:n}function yi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){gi(t,e,n[e])}))}return t}function gi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _i(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function wi(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){_i(a,r,i,o,s,"next",t)}function s(t){_i(a,r,i,o,s,"throw",t)}o(void 0)}))}}var Si=Symbol("fileIdSymbol"),Ci={name:"SharpMarkdown",mixins:[ri({textProp:"text"})],props:{uniqueIdentifier:String,fieldConfigIdentifier:String,value:{type:Object,default:function(){return{}}},placeholder:String,toolbar:Array,height:{type:Number,default:300},innerComponents:Object,readOnly:Boolean},inject:{$tab:{default:null}},data:function(){return{simplemdeInstances:{},cursorPos:{line:0,ch:0},uploaderId:(this.value.files||[]).length}},watch:{locale:function(){var t=this;return wi(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLocalized){e.next=4;break}return e.next=3,t.$nextTick();case 3:t.refreshOnExternalChange();case 4:case"end":return e.stop()}}),e)})))()}},computed:{simplemde:function(){return this.isLocalized?this.simplemdeInstances[this.locale]:this.simplemdeInstances},codemirror:function(){return(this.simplemde||{}).codemirror},idSymbol:function(){return Si},filesByName:function(){return this.value.files.reduce((function(t,e){return t[e.name]=e,t}),{})},indexByFileId:function(){var t=this;return this.value.files.reduce((function(e,n,r){return e[n[t.idSymbol]]=r,e}),{})},text:function(){return this.localizedText},transformedToolbar:function(){return(this.toolbar||[]).map((function(t){return"|"!==t?oi[t]:t}))}},methods:{localizedTextareaRef:function(t){return"textarea_".concat(t)},indexedFiles:function(){var t=this;return(this.value.files||[]).map((function(e,n){return bi(gi({},t.idSymbol,n),e)}))},createUploader:function(t){var e,n=this,r=t.id,i=t.value,a=t.removeOptions,o=new ti({mixins:[(e=this,{parent:e})],propsData:bi(bi({id:r,value:i},this.innerComponents.upload),{},{downloadId:this.fieldConfigIdentifier,pendingKey:"".concat(this.uniqueIdentifier,".upload.").concat(r)})});return o.$on("success",(function(t){return n.updateUploaderData(o,t)})),o.$on("refresh",(function(){return n.refreshCodemirror()})),o.$on("remove",(function(){return n.removeMarker(o,a)})),o.$on("update",(function(t){return n.updateFileData(o,t)})),o.$on("active",(function(){return n.setMarkerActive(o)})),o.$on("inactive",(function(){return n.setMarkerInactive(o)})),o.$on("escape",(function(){return n.escapeMarker()})),o.$on("error",wi(U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$nextTick();case 2:n.removeMarker(o,a);case 3:case"end":return t.stop()}}),t)})))),o.$mount(),o},createUserUploader:function(t){var e=this,n=null;return this.lastUploader&&this.lastUploader.$destroy(),(n=this.lastUploader=this.createUploader(t)).inputClick(),new Promise((function(t){n.$on("added",(function(){e.lastUploader=null,t(n)}))}))},refreshCodemirror:function(){console.log("refresh codemirror"),this.codemirror.refresh(),this.codemirror.focus()},removeMarker:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isCMEvent,i=n.relativeFallbackLine,a=t.id,o=t.marker;if(!o.explicitlyCleared){if(!r){o.inclusiveLeft=o.inclusiveRight=!1;var s=o.find(),l=s.from.line,c=l-i;this.codemirror.replaceRange("",{line:c},{line:l+1,ch:0}),o.inclusiveLeft=o.inclusiveRight=!0,o.clear(),this.codemirror.focus()}t.$destroy(),this.value.files=this.value.files.filter((function(t){return t[e.idSymbol]!==a}))}},escapeMarker:function(){this.codemirror.focus()},updateUploaderData:function(t,e){var n=t.id,r=t.marker.find(),i=this.codemirror.getLine(r.from.line);this.codemirror.replaceRange(i.replace(/\(.*?\)/,"(".concat(e.name,")")),r.from,r.to),this.value.files.push(bi(gi({},this.idSymbol,n),e))},setMarkerActive:function(t){var e=t.marker;this.codemirror.addLineClass(e.lines[0],"wrap","SharpMarkdown__line--active")},setMarkerInactive:function(t){var e=t.marker;this.codemirror.removeLineClass(e.lines[0],"wrap","SharpMarkdown__line--active")},updateFileData:function(t,e){var n=t.id,r=this.indexByFileId[n],i=this.value.files[r];this.$set(this.value.files,r,bi(bi({},i),e))},insertUploadImage:function(){var t=this,e=arguments;return wi(U.a.mark((function n(){var r,i,a,o,s,l,c,u,d,h,f,p;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{},i=r.replaceBySelection,a=r.data,o=r.isInsertion,s=t.codemirror.getSelection(" "),l=t.codemirror.getLine(t.cursorPos.line)||"",c={id:a?t.filesByName[a.name][t.idSymbol]:t.uploaderId++,value:a&&t.filesByName[a.name],removeOptions:{relativeFallbackLine:1}},!o){n.next=10;break}return n.next=7,t.createUserUploader(c);case 7:n.t0=n.sent,n.next=11;break;case 10:n.t0=t.createUploader(c);case 11:return u=n.t0,s&&(t.codemirror.replaceSelection(""),l=t.codemirror.getLine(t.cursorPos.line)),(l.length||0===t.cursorPos.line&&0===t.cursorPos.ch||t.codemirror.findMarksAt({line:t.cursorPos.line-1,ch:0}).length)&&t.codemirror.replaceRange("\n",t.cursorPos),t.codemirror.getInputField().blur(),d=i?s:"![]()",h=o||t.cursorPos.line===t.codemirror.lineCount()-1?1:0,d+="\n".repeat(h),t.codemirror.replaceRange(d,t.cursorPos),t.codemirror.setCursor(t.cursorPos.line-h,0,{scroll:!!o}),f=t.cursorPos,p={line:t.cursorPos.line,ch:t.cursorPos.ch+d.length},u.marker=t.codemirror.markText(f,p,{replacedWith:u.$el,clearWhenEmpty:!1,inclusiveRight:!0,inclusiveLeft:!0,$component:u}),t.codemirror.addLineClass(u.marker.lines[0],"wrap","SharpMarkdown__upload-line"),u.marker.lines[0].on("delete",(function(){return t.removeMarker(u,{isCMEvent:!0,relativeFallbackLine:1})})),n.abrupt("return",u);case 25:case"end":return n.stop()}}),n)})))()},onCursorActivity:function(){this.codemirror&&(this.cursorPos=this.codemirror.getCursor())},onChange:function(){this.codemirror&&this.$emit("input",this.localizedValue(this.codemirror.getValue()))},onBeforeChange:function(t,e){if(e&&e.origin&&e.origin.includes("delete")){var n=t.findMarks(e.from,e.to);console.log(n),n.length&&n.forEach((function(t){t.$component&&(e.cancel(),t.$component.$emit("delete-intent"))}))}},codemirrorOn:function(t,e,n,r){r&&n(t),t.on(e,n)},setReadOnly:function(t){t.codemirror.setOption("readOnly",!0)},createToolbar:function(t){var e=this,n=this.transformedToolbar.map((function(t){return"|"===t?t:("image"!==t.name&&"document"!==t.name||(t.action=function(){return e.insertUploadImage({isInsertion:!0})}),bi(bi({},t),{},{className:"btn btn-light ".concat(t.className),action:function(n){e.readOnly||t.action(n)},title:te("form.markdown.icons.".concat(t.name.replace(/-/g,"_"),".title"))}))}));t.options.toolbar=n;var r=t.createToolbar();r&&(r.classList.remove("editor-toolbar"),r.classList.add("card-header"),r.classList.add("editor__toolbar"),yi(r.children).reduce((function(t,e){return e.matches(".separator")?(e.remove(),[].concat(yi(t),[[]])):(t[t.length-1].push(e),t)}),[[]]).forEach((function(t){var e=document.createElement("div");e.classList.add("btn-group"),t.forEach((function(t){return e.appendChild(t)})),r.appendChild(e)})))},parse:function(){var t=this,e=[];return this.codemirror.eachLine((function(n){var r=n.text,i=t.codemirror.getLineNumber(n),a=/!\[(.*?)\]\((.*?)\)/g.exec(r);if(a){var o=a.index,s=a[0].length,l=a[1],c=a[2];e.push({range:{start:{ch:o,line:i},end:{ch:o+s,line:i}},data:{name:c,title:l}})}})),e.reverse().forEach((function(e){var n=e.range,r=e.data;t.codemirror.setSelection(n.start,n.end,{scroll:!1}),t.insertUploadImage({replaceBySelection:!0,data:r})})),e},refreshOnExternalChange:function(){var t=this;if(!this.simplemde.parsed){var e=this.parse();this.simplemde.parsed=!0,e.length&&this.$nextTick((function(){return window.scrollTo(0,0)}))}setTimeout((function(){return t.codemirror.refresh()}),50)},createSimpleMDE:function(t){var e=t.element,n=t.initialValue,r=new Dr.a({element:e,initialValue:n,toolbar:!1,placeholder:this.placeholder,spellChecker:!1,autoDownloadFontAwesome:!1,status:!1});return this.readOnly&&this.setReadOnly(r),this.createToolbar(r),this.initCM(r.codemirror),r},initCM:function(t){t.setSize("auto",this.height),this.codemirrorOn(t,"cursorActivity",this.onCursorActivity,!0),this.codemirrorOn(t,"change",this.onChange),this.codemirrorOn(t,"beforeChange",this.onBeforeChange),function(t){t.on("dragover",si(ui)),t.on("drop",si(ci)),t.on("paste",si(di))}(t),t.getWrapperElement().classList.add("card-body"),t.getWrapperElement().classList.add("form-control")}},mounted:function(){var t=this;this.isLocalized?this.simplemdeInstances=this.locales.reduce((function(e,n){return bi(bi({},e),{},gi({},n,t.createSimpleMDE({element:t.$refs[t.localizedTextareaRef(n)][0],initialValue:(t.value.text||{})[n]})))}),{}):this.simplemdeInstances=this.createSimpleMDE({element:this.$refs.textarea,initialValue:this.value.text}),this.value.files=this.indexedFiles(),this.$tab?this.$tab.$once("active",(function(){return t.refreshOnExternalChange()})):this.$nextTick((function(){return t.refreshOnExternalChange()}))}},xi=Object(k.a)(Ci,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpMarkdown editor",class:{"SharpMarkdown--read-only":t.readOnly}},[t.isLocalized?[t._l(t.locales,(function(e){return[n("div",{directives:[{name:"show",rawName:"v-show",value:t.locale===e,expression:"locale === loc"}],staticClass:"card"},[n("textarea",{ref:t.localizedTextareaRef(e),refInFor:!0,attrs:{id:t.localizedTextareaRef(e)}})])]}))]:[n("div",{staticClass:"card"},[n("textarea",{ref:"textarea"})])]],2)}),[],!1,null,null,null);xi.options.__file="Markdown.vue";var Oi=xi.exports;function ki(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ji(t,e,n[e])}))}return t}function ji(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Li={name:"SharpNumber",functional:!0,render:function(t,e){var n=e.props,r=n.step,i=n.min,a=n.max,o=n.showControls,s=e.data;return t(Ar,ki(ki({},s),{},{class:ki({"hide-controls":!o},s.class),props:ki({inputType:"number"},s.props),attrs:ki({step:r,min:i,max:a},s.attrs)}))}},Ei=Object(k.a)(Li,void 0,void 0,!1,null,null,null);Ei.options.__file="Number.vue";var Pi=Ei.exports;function $i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bi={name:"SharpUpload",components:{VueClip:Hr},mixins:[Vr],inject:["$field"],props:{uniqueIdentifier:String,fieldConfigIdentifier:String,value:Object,fileFilter:Array,maxFileSize:Number,thumbnail:String,croppableFileTypes:Array,ratioX:Number,ratioY:Number,readOnly:Boolean,root:Boolean},computed:{options:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){$i(t,e,n[e])}))}return t}({},Gr);return t.url=Ut,t.uploadMultiple=!1,this.fileFilter&&(t.acceptedFiles={extensions:this.fileFilter,message:te("form.upload.message.bad_extension")}),this.maxFileSize&&(t.maxFilesize={limit:this.maxFileSize,message:Wr(this.maxFileSize)}),t}}},Ai=Object(k.a)(Bi,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("VueClip",{attrs:{"pending-key":t.uniqueIdentifier,"download-id":t.fieldConfigIdentifier,options:t.options,value:t.value,ratioX:t.ratioX,ratioY:t.ratioY,"croppable-file-types":t.croppableFileTypes,"read-only":t.readOnly,modifiers:t.modifiers,root:t.root},on:{input:function(e){return t.$emit("input",e)},error:function(e){return t.$field.$emit("error",e)},reset:function(e){return t.$field.$emit("clear")}}})}),[],!1,null,null,null);Ai.options.__file="Upload.vue";var Ii=Ai.exports,Di={mixins:[Un],methods:{localizeLabel:function(t){return this.isLocalized?t[this.locale]:t},localizedOptionLabel:function(t){return this.localizeLabel(t.label)}}},Fi={extends:Di,methods:{localizeLabel:function(t){return this.isLocalized?t[this.locale]||te("form.tags.unknown_label"):t},localizedTagLabel:function(t){var e,n,r,i,a=this;return this.isLocalized?(e={locales:this.locales,resolve:function(e){return e===a.locale?t:null}},n=e.locales,r=e.resolve,i=void 0===r?function(){return null}:r,n.reduce((function(t,e){return Hn(Hn({},t),{},Gn({},e,i(e)))}),{})):t},localizedCustomLabel:function(t){return this.localizeLabel(t.label)}}};function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zi(t){function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Ni(t);if(e()){var i=Ni(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ri(this,n)}}function Ri(t,e){return!e||"object"!==Ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ki(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ui=function(){function t(e){Ki(this,t),this.id=e.id,this.label=e.label}var e,n,r;return e=t,(n=[{key:"internalId",set:function(t){this._internalId=t},get:function(){return this._internalId}}])&&qi(e.prototype,n),r&&qi(e,r),t}(),Hi=function(t){Mi(n,t);var e=zi(n);function n(){return Ki(this,n),e.apply(this,arguments)}return n}(Ui),Gi=function(t){Mi(n,t);var e=zi(n);function n(){return Ki(this,n),e.apply(this,arguments)}return n}(Ui),Wi={name:"SharpTags",mixins:[Fi],components:{Multiselect:_n},props:{value:Array,options:Array,placeholder:String,maxTagCount:Number,createText:String,creatable:{type:Boolean,default:!0},readOnly:Boolean},data:function(){return{tags:[],lastIndex:0}},computed:{indexedOptions:function(){return this.options.map(this.patchOption)},dynamicPlaceholder:function(){return this.tags.length<(this.maxTagCount||1/0)?this.placeholder:""},ids:function(){return this.tags.map((function(t){return t.internalId}))}},watch:{tags:"onTagsChanged"},methods:{patchOption:function(t,e){var n=new Hi(t);return n.internalId=e,n},patchTag:function(t){var e=this.indexedOptions.find((function(e){return e.id===t.id})),n=new Gi(e);return n.internalId=e.internalId,n},handleNewTag:function(t){var e=new Gi({id:null,label:this.localizedTagLabel(t)});e.internalId=this.lastIndex++,this.tags.push(e)},handleInput:function(t){this.tags=t},handleTextInput:function(t){t.length>0&&this.$refs.multiselect.filteredOptions.length>1?this.$refs.multiselect.pointer=1:this.$refs.multiselect.pointer=0},onTagsChanged:function(){this.$emit("input",this.tags.map((function(t){return new Gi(t)})))}},created:function(){this.lastIndex+=this.options.length,this.tags=(this.value||[]).map(this.patchTag)}},Yi=Object(k.a)(Wi,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Multiselect",{ref:"multiselect",staticClass:"SharpTags form-select",attrs:{value:t.tags,options:t.indexedOptions,placeholder:t.dynamicPlaceholder,"tag-placeholder":t.createText,max:t.maxTagCount,taggable:t.creatable,"close-on-select":!1,disabled:t.readOnly,"track-by":"_internalId",label:"label","custom-label":t.localizedCustomLabel,multiple:"",searchable:"","hide-selected":"","show-labels":!1},on:{"search-change":t.handleTextInput,input:t.handleInput,tag:t.handleNewTag}})}),[],!1,null,null,null);Yi.options.__file="Tags.vue";var Qi=Yi.exports,Xi=n("OCip"),Ji=n("oihH"),Zi={name:"SharpDatepicker",extends:n.n(Ji).a,computed:{remainingDays:function(){var t=this.days.length+this.blankDays;return t>35?42-t:35-t}},methods:{init:function(){this.value&&this.setValue(this.value),this.showDayCalendar()},clickOutside:function(){}}},ta=Object(k.a)(Zi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpDate__datepicker",class:t.wrapperClass},[n("input",{class:t.inputClass,attrs:{type:t.inline?"hidden":"text",name:t.name,id:t.id,placeholder:t.placeholder,"clear-button":t.clearButton,disabled:t.disabledPicker,required:t.required,readonly:""},domProps:{value:t.formattedValue},on:{click:function(e){return t.showCalendar()}}}),t._v(" "),t.clearButton&&t.selectedDate?n("i",{staticClass:"vdp-datepicker__clear-button",on:{click:function(e){return t.clearDate()}}},[t._v("×")]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDayView,expression:"showDayView"}],staticClass:"SharpDate__calendar",class:{open:t.showDayView},style:t.calendarStyle},[n("header",[n("span",{staticClass:"prev",class:{disabled:t.previousMonthDisabled(t.pageTimestamp)},on:{click:t.previousMonth}},[n("svg",{attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])]),t._v(" "),n("span",{staticClass:"up",on:{click:t.showMonthCalendar}},[n("span",{staticClass:"SharpDate__cur-month"},[t._v(t._s(t.currMonthName))]),t._v(" "),n("span",{staticClass:"SharpDate__cur-year"},[t._v(t._s(t.currYear))])]),t._v(" "),n("span",{staticClass:"next",class:{disabled:t.nextMonthDisabled(t.pageTimestamp)},on:{click:t.nextMonth}},[n("svg",{attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"}})])])]),t._v(" "),n("div",{staticClass:"SharpDate__innerContainer"},[n("div",{staticClass:"SharpDate__rContainer"},[n("div",{staticClass:"SharpDate__weekdays"},t._l(t.daysOfWeek,(function(e){return n("span",{staticClass:"cell day-header"},[t._v(t._s(e))])})),0),t._v(" "),n("div",{staticClass:"SharpDate__days"},[n("div",{staticClass:"SharpDate__dayContainer"},[t._l(t.blankDays,(function(t){return n("span",{staticClass:"cell day blank"})})),t._v(" "),t._l(t.days,(function(e){return n("span",{staticClass:"cell day",class:t.dayClasses(e),on:{click:function(n){return t.selectDate(e)}}},[t._v(t._s(e.date)+"\n                        ")])})),t._v(" "),t._l(t.remainingDays,(function(t){return n("span",{staticClass:"cell day blank"})}))],2)])])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMonthView,expression:"showMonthView"}],staticClass:"SharpDate__calendar",class:{open:t.showMonthView},style:t.calendarStyle},[n("header",[n("span",{staticClass:"prev",class:{disabled:t.previousYearDisabled(t.pageTimestamp)},on:{click:t.previousYear}},[n("svg",{attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])]),t._v(" "),n("span",{staticClass:"up",on:{click:t.showYearCalendar}},[n("span",{staticClass:"SharpDate__cur-year"},[t._v(t._s(t.getPageYear()))])]),t._v(" "),n("span",{staticClass:"next",class:{disabled:t.nextYearDisabled(t.pageTimestamp)},on:{click:t.nextYear}},[n("svg",{attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"}})])])]),t._v(" "),n("div",{staticClass:"SharpDate__innerContainer"},[n("div",{staticClass:"SharpDate__rContainer"},[n("div",{staticClass:"SharpDate__monthContainer"},t._l(t.months,(function(e){return n("span",{staticClass:"cell month",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(n){return n.stopPropagation(),t.selectMonth(e)}}},[t._v(t._s(e.month))])})),0)])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showYearView,expression:"showYearView"}],staticClass:"SharpDate__calendar",class:{open:t.showYearView},style:t.calendarStyle},[n("header",[n("span",{staticClass:"prev",class:{disabled:t.previousDecadeDisabled(t.pageTimestamp)},on:{click:t.previousDecade}},[n("svg",{attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])]),t._v(" "),n("span",{staticClass:"up"},[n("span",{staticClass:"SharpDate__cur-decade"},[t._v(t._s(t.getPageDecade()))])]),t._v(" "),n("span",{staticClass:"next",class:{disabled:t.nextMonthDisabled(t.pageTimestamp)},on:{click:t.nextDecade}},[n("svg",{attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 10.6L4.7 6 0 1.4 1.4 0l6.1 6-6.1 6z"}})])])]),t._v(" "),n("div",{staticClass:"SharpDate__innerContainer"},[n("div",{staticClass:"SharpDate__rContainer"},[n("div",{staticClass:"SharpDate__yearContainer"},t._l(t.years,(function(e){return n("span",{staticClass:"cell year",class:{selected:e.isSelected,disabled:e.isDisabled},on:{click:function(n){return n.stopPropagation(),t.selectYear(e)}}},[t._v(t._s(e.year))])})),0)])])])])}),[],!1,null,null,null);ta.options.__file="Datepicker.vue";var ea=ta.exports,na=n("UX8W"),ra=n.n(na);function ia(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function aa(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){ia(a,r,i,o,s,"next",t)}function s(t){ia(a,r,i,o,s,"throw",t)}o(void 0)}))}}var oa=ra.a.methods.renderFormat,sa={name:"SharpTimePicker",mixins:[ra.a],props:{active:Boolean,min:String,max:String,minMaxFormat:{type:String,default:"HH:mm"}},data:function(){return{showDropdown:!0,isSelection:!1}},watch:{minute:"layout",hour:"layout",active:function(t){t&&this.layout(!1)}},computed:{minMoment:function(){var t=this.min?Ce()(this.min,this.minMaxFormat):Ce()("0:0",this.minMaxFormat);return{minutes:t.minutes(),hours:t.hours()}},maxMoment:function(){var t=this.max?Ce()(this.max,this.minMaxFormat):Ce()("23:59",this.minMaxFormat);return{minutes:t.minutes(),hours:t.hours()}},croppedHours:function(){var t=this;return this.hours.filter((function(e){return(e=parseInt(e))>=t.minMoment.hours&&e<=t.maxMoment.hours}))},croppedMinutes:function(){var t=this,e=parseInt(this.hour);return e===this.minMoment.hours?this.minutes.filter((function(e){return(e=parseInt(e))>=t.minMoment.minutes})):e===this.maxMoment.hours?this.minutes.filter((function(e){return(e=parseInt(e))<=t.maxMoment.minutes})):this.minutes}},methods:{select2:function(t,e){this.select(t,e),this.isSelection=!0},renderFormat:function(){oa.apply(this,arguments)},layout:function(){var t=this,e=arguments;return aa(U.a.mark((function n(){var r,i,a,o;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=!(e.length>0&&void 0!==e[0])||e[0],o=a?"smooth":"auto",n.next=4,t.$nextTick();case 4:null===(r=t.$refs.minutes.querySelector(".active"))||void 0===r||r.scrollIntoView({block:"center",behavior:o}),null===(i=t.$refs.hours.querySelector(".active"))||void 0===i||i.scrollIntoView({block:"center",behavior:o});case 6:case"end":return n.stop()}}),n)})))()}}},la=Object(k.a)(sa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"time-picker"},[n("header",[n("span",{staticClass:"hint",domProps:{textContent:t._s(t.hourType)}}),t._v(" "),n("span",{staticClass:"hint",domProps:{textContent:t._s(t.minuteType)}})]),t._v(" "),n("div",{staticClass:"dropdown"},[n("div",{staticClass:"select-list"},[n("ul",{ref:"hours",staticClass:"hours"},[t._l(t.croppedHours,(function(e){return[n("li",{class:{active:t.value&&t.hour===e},on:{click:function(n){return n.stopPropagation(),t.select2("hour",e)}}},[t._v(t._s(e))])]}))],2),t._v(" "),n("ul",{ref:"minutes",staticClass:"minutes"},[t._l(t.croppedMinutes,(function(e){return[n("li",{class:{active:t.value&&t.minute===e},on:{click:function(n){return n.stopPropagation(),t.select2("minute",e)}}},[t._v(t._s(e))])]}))],2)])])])}),[],!1,null,null,null);function ca(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}la.options.__file="Timepicker.vue";var ua={name:"SharpDate",components:{DatePicker:ea,TimePicker:la.exports,BPopover:Xi.a,ClearButton:T},inject:["$field"],mixins:[Tt,Ge],props:{value:{type:[Date,String]},hasDate:{type:Boolean,default:!0},hasTime:{type:Boolean,default:!1},displayFormat:{type:String,default:"DD/MM/YYYY HH:mm"},mondayFirst:Boolean,stepTime:{type:Number,default:30},minTime:String,maxTime:String,readOnly:Boolean},data:function(){return{showPicker:!1,localInputValue:null}},computed:{format:function(){return this.hasTime&&!this.hasDate?"HH:mm":null},dateObject:function(){return this.value?Ce()(this.value,this.format).toDate():null},timeObject:function(){return this.value?{HH:Ce()(this.value,this.format).format("HH"),mm:Ce()(this.value,this.format).format("mm")}:null},inputValue:function(){return"string"==typeof this.localInputValue?this.localInputValue:this.value?Ce()(this.value,this.format).format(this.displayFormat):""},popoverBoundary:function(){return document.querySelector("[data-popover-boundary]")}},methods:{popoverTarget:function(){return this.$refs.input},getMoment:function(){return this.value?Ce()(this.value,this.format):Ce()()},handleDateSelect:function(t){var e=this.getMoment();e.set({year:t.getFullYear(),month:t.getMonth(),date:t.getDate()}),this.$emit("input",e.toDate())},handleTimeSelect:function(t){var e=t.data,n=this.getMoment();n.set({hour:e.HH,minute:e.mm,second:e.ss}),this.getMoment().format("HH:mm")!==n.format("HH:mm")&&this.$emit("input",n.toDate())},handleInput:function(t){var e=Ce()(t.target.value,this.displayFormat,!0);this.localInputValue=t.target.value,e.isValid()?(this.rollback(),this.$emit("input",e.toDate()),this.showPicker=!0):(this.$field.$emit("error","".concat(te("form.date.validation_error.format")," (").concat(this.displayFormat,")")),this.showPicker=!1)},increase:function(t){this.translate(t.target,1)},decrease:function(t){this.translate(t.target,-1)},translate:function(t,e){var n,r=this;return(n=U.a.mark((function n(){var i;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=r.changeOnArrowPressed(t.selectionStart,e))){n.next=5;break}return n.next=4,r.$nextTick();case 4:t.setSelectionRange(i.start,i.end);case 5:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,i){var a=n.apply(t,e);function o(t){ca(a,r,i,o,s,"next",t)}function s(t){ca(a,r,i,o,s,"throw",t)}o(void 0)}))})()},add:function(t,e){var n=this.getMoment();n.add(t,e),this.$emit("input",n.toDate())},nearestMinutesDist:function(t){var e=this.getMoment().minutes();if(e%this.stepTime==0)return t*this.stepTime;var n=t<0?"floor":"ceil";return this.stepTime*Math[n](e/this.stepTime)-e},updateMoment:function(t,e){switch(t){case"H":this.add(e,"hours");break;case"m":this.add(this.nearestMinutesDist(e),"minutes");break;case"s":this.add(e,"seconds");break;case"Y":this.add(e,"years");break;case"M":this.add(e,"months");break;case"D":this.add(e,"days");break;default:return!1}return!0},changeOnArrowPressed:function(t,e){var n=t;if(!this.updateMoment(this.displayFormat[n],e)&&t&&(n--,!this.updateMoment(this.displayFormat[n],e)))return null;var r=this.displayFormat[n];return{start:this.displayFormat.indexOf(r),end:this.displayFormat.lastIndexOf(r)+1}},rollback:function(){this.$field.$emit("clear"),this.localInputValue=null},clear:function(){this.rollback(),this.$emit("input",null),this.$refs.input.focus()},handleBlur:function(){this.rollback()}},mounted:function(){this.setFocusable(this.$refs.input)}},da=Object(k.a)(ua,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpDate",class:{"SharpDate--open":t.showPicker}},[n("div",{staticClass:"SharpDate__input-wrapper"},[n("input",{ref:"input",staticClass:"form-control clearable SharpDate__input",class:{"SharpDate__input--valuated":t.value},attrs:{placeholder:t.displayFormat,disabled:t.readOnly,autocomplete:"off"},domProps:{value:t.inputValue},on:{input:t.handleInput,blur:t.handleBlur,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.increase(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.decrease(e))}]}}),t._v(" "),t.value?[n("ClearButton",{ref:"clearButton",on:{click:t.clear}})]:t._e()],2),t._v(" "),n("b-popover",{attrs:{target:t.popoverTarget,show:t.showPicker,boundary:t.popoverBoundary,"no-fade":"",triggers:"focus",placement:"bottom"},on:{"update:show":function(e){t.showPicker=e}}},[n("div",{staticClass:"SharpDate__picker position-static"},[t.hasDate?[n("DatePicker",{ref:"datepicker",staticClass:"SharpDate__date",attrs:{language:t.language,"monday-first":t.mondayFirst,inline:"",value:t.dateObject},on:{selected:t.handleDateSelect}})]:t._e(),t._v(" "),t.hasTime?[n("TimePicker",{ref:"timepicker",staticClass:"SharpDate__time",attrs:{value:t.timeObject,active:t.showPicker,format:t.displayFormat,"minute-interval":t.stepTime,min:t.minTime,max:t.maxTime},on:{change:t.handleTimeSelect}})]:t._e()],2)])],1)}),[],!1,null,null,null);da.options.__file="Date.vue";var ha=da.exports,fa={name:"SharpCheck",props:{value:Boolean,text:String,readOnly:Boolean,uniqueIdentifier:String,id:String},computed:{resolvedId:function(){var t;return null!==(t=this.id)&&void 0!==t?t:this.uniqueIdentifier}},methods:{handleCheck:function(t){this.$emit("input",t.target.checked)}}},pa=Object(k.a)(fa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpCheck form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:t.resolvedId,disabled:t.readOnly},domProps:{checked:t.value},on:{change:t.handleCheck}}),t._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:t.resolvedId}},[t._v("\n        "+t._s(t.text)+"\n    ")])])}),[],!1,null,null,null);pa.options.__file="Check.vue";var ma=pa.exports,va={name:"FieldsLayout",components:{Grid:Ot},props:{layout:{type:Array,required:!0},visible:{type:Object,default:function(){return{}}}},data:function(){return{fieldsetMap:{}}},methods:{isFieldset:function(t){return!!t.legend},isFieldsetVisible:function(t){var e=this;return(t.fields||[]).flat().some((function(t){return e.visible[t.key]}))},updateLayout:function(){this.$el.querySelectorAll(":scope > .SharpGrid__row").forEach((function(t){var e=!!t.querySelector(":scope > .SharpGrid__col > .SharpForm__form-item--has-label");t.classList.toggle("SharpGrid__row--has-label",e)}))}},mounted:function(){this.updateLayout()},updated:function(){this.updateLayout()}},ya=Object(k.a)(va,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Grid",{attrs:{rows:t.layout},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.itemLayout;return[t.isFieldset(r)?[n("fieldset",{directives:[{name:"show",rawName:"v-show",value:t.isFieldsetVisible(r),expression:"isFieldsetVisible(fieldLayout)"}]},[n("legend",{staticClass:"SharpForm__label form-label"},[t._v(t._s(r.legend))]),t._v(" "),n("div",{staticClass:"card SharpForm__fieldset shadow-sm"},[n("div",{staticClass:"card-body"},[n("FieldsLayout",{attrs:{layout:r.fields},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.fieldLayout;return[t._t("default",null,{fieldLayout:n})]}}],null,!0)})],1)])])]:[t._t("default",null,{fieldLayout:r})]]}}])})}),[],!1,null,null,null);ya.options.__file="FieldsLayout.vue";var ba=ya.exports,ga={name:"SharpListItem",extends:ba,mixins:[Ft]},_a=Object(k.a)(ga,void 0,void 0,!1,null,null,null);_a.options.__file="ListItem.vue";var wa=_a.exports;function Sa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ca(t,e,n[e])}))}return t}function Ca(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xa=function(t){return{_localizedForm:t,methods:{fieldLocalizedValue:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.data,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.fieldLocale,a=this[t][e];return this.localized&&a.localized&&Xn(a)?Jn({localeObject:r[e],locale:i[e],value:n}):n},defaultFieldLocaleMap:function(t,e){var n=t.fields,r=t.locales;return Object.values(n).filter((function(t){var e;return"list"===t.type?Object.values(null!==(e=t.itemFields)&&void 0!==e?e:{}).some((function(t){return t.localized})):t.localized})).reduce((function(t,n){return Sa(Sa({},t),{},Ca({},n.key,e||r&&r[0]))}),{})}}}};function Oa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ka(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ja(t,e,n[e])}))}return t}function ja(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function La(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Ea={name:"SharpList",inject:["$form"],mixins:[Ge,xa("itemFields")],components:{Draggable:tt.a,ListItem:wa,Button:I,TemplateRenderer:zn},props:{fieldKey:String,fieldLayout:Object,value:Array,addable:{type:Boolean,default:!0},sortable:{type:Boolean,default:!1},removable:{type:Boolean,default:!1},addText:{type:String,default:"Ajouter un élément"},itemFields:{type:Object,required:!0},collapsedItemTemplate:String,maxItemCount:Number,itemIdAttribute:String,readOnly:Boolean,locale:[String,Array]},data:function(){return{list:[],dragActive:!1,lastIndex:0}},watch:{list:"handleListChanged",locale:"handleLocaleChanged"},computed:{classes:function(){return{"SharpList--can-sort":this.showSortButton}},disabled:function(){return this.readOnly||this.dragActive},dragOptions:function(){return{disabled:!this.dragActive,handle:".SharpList__overlay-handle"}},showAddButton:function(){return this.addable&&(this.list.length<this.maxItemCount||!this.maxItemCount)&&!this.readOnly},showInsertButton:function(){return this.showAddButton&&this.sortable&&!this.disabled},showSortButton:function(){return!this.hasPendingActions&&this.sortable&&this.list.length>1},showRemoveButton:function(){return this.removable&&!this.disabled},dragIndexSymbol:function(){return Symbol("dragIndex")},indexSymbol:function(){return Symbol("index")},hasPendingActions:function(){var t;return null===(t=this.$form)||void 0===t?void 0:t.hasUploadingFields(this.fieldKey)},isReadOnly:function(){return this.readOnly||this.dragActive}},methods:{handleListChanged:function(){this.$emit("locale-change",this.list.map((function(t){return t._fieldsLocale})))},handleLocaleChanged:function(t){var e=this;"string"==typeof t&&this.list.forEach((function(n){Object.assign(n,e.withLocale(null,t))}))},itemData:function(t){t.id,t._fieldsLocale;return La(t,["id","_fieldsLocale"])},transformedFields:function(t){var e=this.list[t],n=this.itemData(e);return Cr(this.itemFields,n)},indexedList:function(){var t=this;return(this.value||[]).map((function(e,n){return t.withLocale(ka(ja({},t.indexSymbol,n),e))}))},createItem:function(){var t;return Object.entries(this.itemFields).reduce((function(t,e){var n=Oa(e,2),r=n[0],i=n[1];return t[r]="markdown"===i.type?{}:null,t}),this.withLocale((ja(t={},this.itemIdAttribute,null),ja(t,this.indexSymbol,this.lastIndex++),t)))},insertNewItem:function(t,e){e.target&&e.target.blur(),this.list.splice(t+1,0,this.createItem())},add:function(){this.list.push(this.createItem())},remove:function(t){this.list.splice(t,1)},update:function(t){var e=this;return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.forced,o=ka({},e.list[t]),s=ka(ka({},a?null:br(e.itemFields,n,(function(){return e.fieldLocalizedValue(n,null,o,o._fieldsLocale)}))),{},ja({},n,e.fieldLocalizedValue(n,r,o,o._fieldsLocale)));Object.assign(e.list[t],s)}},updateLocale:function(t,e,n){this.$set(this.list[t]._fieldsLocale,e,n),this.handleListChanged()},collapsedItemData:function(t){return ka({$index:t[this.dragIndexSymbol]},t)},toggleDrag:function(){var t=this;this.dragActive=!this.dragActive,this.list.forEach((function(e,n){return e[t.dragIndexSymbol]=n}))},withLocale:function(t,e){return ka(ka({},t),{},{_fieldsLocale:this.defaultFieldLocaleMap({fields:this.itemFields,locales:this.$form.locales},e)})},initList:function(){this.list=this.indexedList(),this.lastIndex=this.list.length,this.$emit("input",this.list)}},created:function(){this.localized=this.$form.localized,this.initList()}},Pa=Object(k.a)(Ea,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpList",class:t.classes},[n("div",{staticClass:"SharpList__sticky-wrapper text-end"},[t.showSortButton?[n("Button",{staticClass:"SharpList__sort-button",staticStyle:{"pointer-events":"auto"},attrs:{text:"",small:"",active:t.dragActive},on:{click:t.toggleDrag}},[t._v("\n                "+t._s(t.l("form.list.sort_button.inactive"))+"\n                "),n("svg",{staticStyle:{"margin-left":".5em"},attrs:{width:"1.125em",height:"1.125em",viewBox:"0 0 24 22","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M20 14V0h-4v14h-4l6 8 6-8zM4 8v14h4V8h4L6 0 0 8z"}})])])]:t._e()],2),t._v(" "),n("Draggable",{ref:"draggable",attrs:{options:t.dragOptions,list:t.list},scopedSlots:t._u([t.showAddButton?{key:"footer",fn:function(){return[n("div",{class:{"mt-3":t.list.length>0}},[n("Button",{key:-1,staticClass:"SharpList__add-button",attrs:{disabled:t.dragActive,text:"",block:""},on:{click:t.add}},[t._v("\n                    ＋ "+t._s(t.addText)+"\n                ")])],1)]},proxy:!0}:null],null,!0)},[n("transition-group",{staticClass:"list-group shadow-sm",attrs:{name:"expand",tag:"div"}},[t._l(t.list,(function(e,r){return[n("div",{key:e[t.indexSymbol],staticClass:"SharpList__item list-group-item",class:{"SharpList__item--collapsed":t.dragActive}},[t.dragActive&&t.collapsedItemTemplate?[n("TemplateRenderer",{attrs:{name:"CollapsedItem",template:t.collapsedItemTemplate,"template-data":t.collapsedItemData(e)}})]:[n("ListItem",{attrs:{layout:t.fieldLayout.item,"error-identifier":r},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.fieldLayout;return[n("FieldDisplay",{attrs:{"field-key":a.key,"context-fields":t.transformedFields(r),"context-data":e,"error-identifier":a.key,"config-identifier":a.key,"update-data":t.update(r),locale:e._fieldsLocale[a.key],"read-only":t.isReadOnly,list:!0},on:{"locale-change":function(e,n){return t.updateLocale(r,e,n)}}})]}}],null,!0)}),t._v(" "),t.showRemoveButton?[n("button",{staticClass:"SharpList__remove-button btn-close",attrs:{"aria-label":t.l("form.list.remove_button")},on:{click:function(e){return t.remove(r)}}})]:t._e()],t._v(" "),t.dragActive?[n("div",{staticClass:"SharpList__overlay-handle"})]:t._e(),t._v(" "),t.showInsertButton&&r<t.list.length-1?[n("div",{staticClass:"SharpList__new-item-zone"},[n("Button",{attrs:{small:""},on:{click:function(e){return t.insertNewItem(r,e)}}},[t._v("\n                                "+t._s(t.l("form.list.insert_button"))+"\n                            ")])],1)]:t._e()],2)]}))],2)],1),t._v(" "),t.readOnly&&!t.list.length?[n("em",{staticClass:"SharpList__empty-alert"},[t._v(t._s(t.l("form.list.empty")))])]:t._e()],2)}),[],!1,null,null,null);Pa.options.__file="List.vue";var $a=Pa.exports,Ba={components:{Multiselect:_n,ClearButton:T},props:{value:[Array,String,Number],options:Array,labels:Object,multiple:Boolean,clearable:Boolean,placeholder:String,maxSelected:Number,readOnly:Boolean},computed:{multiselectOptions:function(){return this.options.map((function(t){return t.id}))},hasClearButton:function(){return this.clearable&&!this.multiple&&null!=this.value}},methods:{multiselectLabel:function(t){return this.labels[t]},remove:function(){this.$emit("input",null),this.$refs.multiselect.activate()},handleInput:function(t){this.$emit("input",t)}}},Aa=Object(k.a)(Ba,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Multiselect",{ref:"multiselect",attrs:{value:t.value,searchable:!1,options:t.multiselectOptions,multiple:t.multiple,"hide-selected":t.multiple,"close-on-select":!t.multiple,"custom-label":t.multiselectLabel,placeholder:t.placeholder,disabled:t.readOnly,max:t.maxSelected,"allow-empty":t.clearable},on:{input:t.handleInput,open:function(e){return t.$emit("open")},close:function(e){return t.$emit("close")}},scopedSlots:t._u([t.hasClearButton?{key:"caret",fn:function(){return[n("ClearButton",{staticClass:"SharpSelect__clear-button",on:{click:t.remove}})]},proxy:!0}:null,{key:"tag",fn:function(e){var r=e.option,i=e.remove;return[n("span",{key:r,staticClass:"multiselect__tag"},[n("span",[t._v(t._s(t.multiselectLabel(r)))]),t._v(" "),n("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),i(r))},mousedown:function(t){return t.preventDefault(),t.stopPropagation(),i(r)}}})])]}},{key:"option",fn:function(){return[t._t("option")]},proxy:!0}],null,!0)})}),[],!1,null,null,null);Aa.options.__file="DropdownSelect.vue";var Ia=Aa.exports;function Da(t,e){return null!=t.id&&null!=e&&t.id==e}function Fa(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ta={components:{Check:ma},props:{value:Array,options:Array,readOnly:Boolean,labels:Object,showSelectAll:Boolean,inline:Boolean,root:Boolean,uniqueIdentifier:String},methods:{lang:te,isChecked:function(t){var e;return null===(e=this.value)||void 0===e?void 0:e.some((function(e){return Da(t,e)}))},checkboxId:function(t){return"".concat(this.uniqueIdentifier,".").concat(t)},handleSelectAllClicked:function(){this.$emit("input",this.options.map((function(t){return t.id})))},handleUnselectAllClicked:function(){this.$emit("input",[])},handleCheckboxChanged:function(t,e){var n,r;t?this.$emit("input",[].concat(Fa(null!==(n=this.value)&&void 0!==n?n:[]),[e.id])):this.$emit("input",(null!==(r=this.value)&&void 0!==r?r:[]).filter((function(t){return!Da(e,t)})))}}},Ma=Object(k.a)(Ta,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"card card-body form-control":t.root}},[n("div",{staticClass:"row gy-1 gx-3",class:t.inline?"row-cols-auto":"row-cols-1"},[t._l(t.options,(function(e,r){return[n("div",{staticClass:"col"},[n("Check",{key:e.id,staticClass:"mb-0",attrs:{id:t.checkboxId(r),value:t.isChecked(e),text:t.labels[e.id],"read-only":t.readOnly},on:{input:function(n){return t.handleCheckboxChanged(n,e)}}})],1)]}))],2),t._v(" "),t.showSelectAll?[n("div",{staticClass:"SharpSelect__links mt-3"},[n("div",{staticClass:"row gx-3"},[n("div",{staticClass:"col-auto"},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.handleSelectAllClicked(e)}}},[t._v(t._s(t.lang("form.select.select_all")))])]),t._v(" "),n("div",{staticClass:"col-auto"},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.handleUnselectAllClicked(e)}}},[t._v(t._s(t.lang("form.select.unselect_all")))])])])])]:t._e()],2)}),[],!1,null,null,null);Ma.options.__file="Checkboxes.vue";var Va=Ma.exports,za={props:{value:[String,Number],options:Array,labels:Object,uniqueIdentifier:String,readOnly:Boolean,inline:Boolean,root:Boolean},methods:{isSelected:function(t){return Da(t,this.value)},handleRadioChanged:function(t){this.$emit("input",t.id)}}},Ra=Object(k.a)(za,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"card card-body form-control":t.root}},[n("div",{staticClass:"row gy-1 gx-3",class:t.inline?"row-cols-auto":"row-cols-1"},[t._l(t.options,(function(e,r){return[n("div",{key:e.id,staticClass:"col"},[n("div",{staticClass:"form-check mb-0"},[n("input",{staticClass:"form-check-input",attrs:{type:"radio",tabindex:"0",id:t.uniqueIdentifier+"."+r,disabled:t.readOnly,name:t.uniqueIdentifier},domProps:{checked:t.isSelected(e),value:e.id},on:{change:function(n){return t.handleRadioChanged(e)}}}),t._v(" "),n("label",{staticClass:"form-check-label",attrs:{for:t.uniqueIdentifier+"."+r}},[t._v("\n                        "+t._s(t.labels[e.id])+"\n                    ")])])])]}))],2)])}),[],!1,null,null,null);Ra.options.__file="Radios.vue";var Na=Ra.exports,Ka={name:"SharpSelect",mixins:[Di],props:{value:[Array,String,Number],uniqueIdentifier:String,options:{type:Array,required:!0,default:function(){return[]}},multiple:{type:Boolean,default:!1},display:{type:String,default:"dropdown"},clearable:{type:Boolean,default:!1},showSelectAll:{type:Boolean,default:!0},placeholder:{type:String,default:"-"},maxSelected:Number,readOnly:Boolean,inline:{type:Boolean,default:!0},root:Boolean},watch:{options:function(){this.init()}},computed:{classes:function(){return["SharpSelect--".concat(this.display),{"SharpSelect--multiple":this.multiple}]},component:function(){return"dropdown"===this.display?Ia:this.multiple?Va:Na},optionsLabel:function(){var t=this;return this.options.reduce((function(e,n){return e[n.id]=t.localizedOptionLabel(n),e}),{})}},methods:{handleInput:function(t){this.$emit("input",t)},setDefault:function(){!this.clearable&&null==this.value&&this.options.length>0&&this.$emit("input",this.options[0].id,{force:!0})},init:function(){gr(this,this.setDefault,{dependantAttributes:["options"]})},blur:function(){var t;null===(t=this.$refs.component.$refs)||void 0===t||t.multiselect.deactivate()}},created:function(){this.init()}},qa=Object(k.a)(Ka,(function(){var t=this.$createElement;return(this._self._c||t)(this.component,this._b({ref:"component",tag:"component",staticClass:"SharpSelect",class:this.classes,attrs:{labels:this.optionsLabel},on:{input:this.handleInput}},"component",this.$props,!1))}),[],!1,null,null,null);qa.options.__file="Select.vue";var Ua=qa.exports,Ha={name:"SharpHtml",components:{TemplateRenderer:zn},props:{value:Object,template:String}},Ga=Object(k.a)(Ha,(function(){var t=this.$createElement;return(this._self._c||t)("TemplateRenderer",{attrs:{name:"Html",template:this.template,"template-data":this.value}})}),[],!1,null,null,null);Ga.options.__file="Html.vue";var Wa=Ga.exports;function Ya(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qa(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Xa={mapTypeControl:!1,streetViewControl:!1};function Ja(t){var e=t;return Array.isArray(e)?new google.maps.LatLngBounds(e[0],e[1]):null}function Za(t){var e=t.maxBounds,n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ya(t,e,n[e])}))}return t}({},Qa(t,["maxBounds"]));return Array.isArray(e)&&(n.restriction={latLngBounds:Ja(e)}),n}function to(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){eo(t,e,n[e])}))}return t}function eo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var no={name:"SharpGmaps",components:{GmapMap:c.Map,GmapMarker:c.Marker},props:{markerPosition:Object,center:Object,zoom:Number},computed:{options:function(){return Za(to(to({},Xa),{},{maxBounds:this.maxBounds,controlSize:32}))}}},ro=Object(k.a)(no,(function(){var t=this.$createElement,e=this._self._c||t;return e("GmapMap",{ref:"map",attrs:{center:this.center,zoom:this.zoom,options:this.options}},[e("GmapMarker",{attrs:{position:this.markerPosition}})],1)}),[],!1,null,null,null);ro.options.__file="Gmaps.vue";var io=ro.exports;function ao(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){oo(t,e,n[e])}))}return t}function oo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var so={name:"SharpGmapsEditable",components:{GmapMap:c.Map,GmapMarker:c.Marker},props:{markerPosition:Object,bounds:Array,center:Object,zoom:Number,maxBounds:Array},computed:{options:function(){return Za(ao(ao({},Xa),{},{maxBounds:this.maxBounds,draggableCursor:"crosshair"}))},hasMarker:function(){return!!this.markerPosition}},watch:{bounds:function(t){var e=Ja(t);e&&this.$refs.map.$mapObject.fitBounds(e)}},methods:{handleMapClicked:function(t){this.$emit("change",t.latLng.toJSON())},handleMarkerDragEnd:function(t){this.$emit("change",t.latLng.toJSON())}}},lo=Object(k.a)(so,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GmapMap",{ref:"map",attrs:{center:t.center,zoom:t.zoom,options:t.options},on:{click:t.handleMapClicked}},[t.hasMarker?[n("GmapMarker",{attrs:{position:t.markerPosition,draggable:""},on:{dragend:t.handleMarkerDragEnd}})]:t._e()],2)}),[],!1,null,null,null);lo.options.__file="GmapsEditable.vue";var co=lo.exports,uo=n("HZII"),ho=n.n(uo)()((function(t){var e=t.apiKey,n={v:3};return e&&(n.key=e),Object(c.loadGmapApi)(n),i.a.$gmapApiPromiseLazy()})),fo=null;var po=n("JpmB"),mo=n("Tith"),vo=n("pArE"),yo=n("4R65");function bo(t){var e=t;return Array.isArray(e)?Object(yo.latLngBounds)(e[0],e[1]):null}var go={name:"SharpOsm",components:{LMap:po.a,LMarker:mo.a,LTileLayer:vo.a},props:{markerPosition:Object,zoom:Number,center:Object,maxBounds:Array,tilesUrl:{type:String,default:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},computed:{transformedMaxBounds:function(){return bo(this.maxBounds)}}},_o=Object(k.a)(go,(function(){var t=this.$createElement,e=this._self._c||t;return e("LMap",{attrs:{zoom:this.zoom,center:this.center,"max-bounds":this.transformedMaxBounds}},[e("LTileLayer",{attrs:{url:this.tilesUrl}}),this._v(" "),e("LMarker",{attrs:{"lat-lng":this.markerPosition}})],1)}),[],!1,null,null,null);_o.options.__file="Osm.vue";var wo=_o.exports,So={name:"SharpOsmEditable",components:{LMap:po.a,LMarker:mo.a,LTileLayer:vo.a},props:{markerPosition:Object,center:Object,zoom:Number,bounds:Array,maxBounds:Array,tilesUrl:{type:String,default:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},computed:{hasMarker:function(){return!!this.markerPosition},transformedBounds:function(){return bo(this.bounds)},transformedMaxBounds:function(){return bo(this.maxBounds)}},methods:{handleMapClicked:function(t){this.$emit("change",t.latlng)},handleMarkerDragEnd:function(t){this.$emit("change",t.target.getLatLng())}}},Co=Object(k.a)(So,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LMap",{attrs:{zoom:t.zoom,center:t.center,bounds:t.transformedBounds,"max-bounds":t.transformedMaxBounds},on:{click:t.handleMapClicked}},[n("LTileLayer",{attrs:{url:t.tilesUrl}}),t._v(" "),t.hasMarker?[n("LMarker",{attrs:{"lat-lng":t.markerPosition,draggable:""},on:{dragend:t.handleMarkerDragEnd}})]:t._e()],2)}),[],!1,null,null,null);Co.options.__file="OsmEditable.vue";var xo=Co.exports;function Oo(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ko(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Oo(a,r,i,o,s,"next",t)}function s(t){Oo(a,r,i,o,s,"throw",t)}o(void 0)}))}}function jo(t){return Vt.a.get("https://nominatim.openstreetmap.org/search",{params:{q:t,format:"json"}}).then((function(t){return t.data}))}function Lo(t){return Vt.a.get("https://nominatim.openstreetmap.org/reverse",{params:{lat:t.lat,lon:t.lng,format:"json"}}).then((function(t){return[t.data]}))}function Eo(){return(Eo=ko(U.a.mark((function t(e){var n,r,i;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.address,!(r=e.latLng)){t.next=7;break}return t.next=4,Lo(r);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,jo(n);case 9:t.t0=t.sent;case 10:return i=t.t0,t.abrupt("return",i.map((function(t){return{location:{lat:Number(t.lat),lng:Number(t.lon)},bounds:[{lat:Number(t.boundingbox[0]),lng:Number(t.boundingbox[2])},{lat:Number(t.boundingbox[1]),lng:Number(t.boundingbox[3])}],address:t.display_name}})));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Po=function(t){return Eo.apply(this,arguments)};function $o(t,e,n){return"gmaps"===t?(i=(r=e).address,a=r.latLng,fo||(fo=new google.maps.Geocoder),new Promise((function(t,e){fo.geocode({address:i,location:a},(function(n,r){"OK"===r?t(n.map((function(t){return{location:t.geometry.location.toJSON(),bounds:(e=t.geometry.viewport,[e.getSouthWest().toJSON(),e.getNorthEast().toJSON()]),address:t.formatted_address};var e}))):"ZERO_RESULTS"===r?t([]):e(r)}))}))):"osm"===t?Po(e):Promise.resolve([]);var r,i,a}function Bo(t,e){var n=t<0?e?"W":"S":e?"E":"N",r=0|(t<0?t=-t:t),i=0|t%1*60,a=(0|60*t%1*6e3)/100;return"".concat(r,"°").concat(i,'"').concat(a,"' ").concat(n)}function Ao(t){return t?t.name:null}function Io(t){return t&&t.options||{}}function Do(t){return t?t.tilesUrl:null}var Fo={mixins:[We("form.geolocation.modal")],components:{Loading:$t,Modal:sn,TextField:Ar,Button:I},props:{location:Object,center:Object,bounds:Object,zoom:Number,maxBounds:Array,geocoding:Boolean,mapsProvider:{type:String,default:"gmaps"},mapsOptions:Object,geocodingProvider:{type:String,default:"gmaps"},geocodingOptions:Object},data:function(){return{loading:!1,search:null,message:null,currentLocation:this.location,currentBounds:this.bounds}},computed:{editableMapComponent:function(){return"gmaps"===(t=this.mapsProvider)?co:"osm"===t?xo:void 0;var t},hasGeocoding:function(){return this.geocoding},classes:function(){return{"SharpGeolocationEdit--loading":this.loading}},mapClasses:function(){return["SharpGeolocationEdit__map--".concat(this.mapsProvider)]},tilesUrl:function(){return Do(this.mapsOptions)}},methods:{handleSearchInput:function(t){this.search=t},handleMarkerPositionChanged:function(t){var e=this;this.currentLocation=t,this.message="",this.$emit("change",this.currentLocation),this.hasGeocoding&&(this.loading=!0,$o(this.geocodingProvider,{latLng:t},this.geocodingOptions).then((function(t){t.length>0&&(e.search=t[0].address)})).finally((function(){e.loading=!1})))},handleSearchSubmitted:function(){var t=this,e=this.search;this.message="",this.loading=!0,$o(this.geocodingProvider,{address:e},this.geocodingOptions).then((function(n){n.length>0?(t.currentLocation=n[0].location,t.currentBounds=n[0].bounds,t.$emit("change",t.currentLocation)):t.message=t.lSub("geocode_input.message.no_results").replace(":query",e||"")})).catch((function(e){t.message="".concat(t.lSub("geocode_input.message.error")).concat(e?" (".concat(e,")"):"")})).finally((function(){t.loading=!1}))}}},To=Object(k.a)(Fo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpGeolocationEdit",class:t.classes},[t.hasGeocoding?[n("div",{staticClass:"mb-2"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.handleSearchSubmitted(e)}}},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col position-relative"},[n("TextField",{staticClass:"SharpGeolocationEdit__input",attrs:{value:t.search,placeholder:t.lSub("geocode_input.placeholder")},on:{input:t.handleSearchInput}}),t._v(" "),n("Loading",{staticClass:"SharpGeolocationEdit__loading",attrs:{visible:t.loading,small:""}})],1),t._v(" "),n("div",{staticClass:"col-auto pl-2"},[n("Button",{attrs:{outline:""}},[t._v(t._s(t.lSub("search_button")))])],1)])]),t._v(" "),t.message?[n("small",[t._v(t._s(t.message))])]:t._e()],2)]:t._e(),t._v(" "),n(t.editableMapComponent,{tag:"component",staticClass:"SharpGeolocationEdit__map",class:t.mapClasses,attrs:{"marker-position":t.currentLocation,center:t.center,bounds:t.currentBounds,zoom:t.zoom,"max-bounds":t.maxBounds,"tiles-url":t.tilesUrl},on:{change:t.handleMarkerPositionChanged}})],2)}),[],!1,null,null,null);function Mo(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}To.options.__file="GeolocationEdit.vue";var Vo={name:"SharpGeolocation",mixins:[Ge],inject:{$tab:{default:null}},components:{GeolocationEdit:To.exports,Button:I,Modal:sn},props:{value:Object,readOnly:Boolean,uniqueIdentifier:String,geocoding:Boolean,apiKey:String,boundaries:Object,zoomLevel:{type:Number,default:4},initialPosition:{type:Object,default:function(){return{lat:46.1445458,lng:-2.4343779}}},displayUnit:{type:String,default:"DD",validator:function(t){return"DMS"===t||"DD"===t}},mapsProvider:{type:Object,default:function(){return{name:"gmaps"}}},geocodingProvider:{type:Object,default:function(){return{name:"gmaps"}}}},data:function(){return{ready:!1,modalVisible:!1,location:this.value}},computed:{isLoading:function(){return!this.ready},isEmpty:function(){return!this.value},latLngString:function(){return"DMS"===this.displayUnit?{lat:Bo(this.value.lat),lng:Bo(this.value.lng,!0)}:"DD"===this.displayUnit?this.value:void 0},mapComponent:function(){return"gmaps"===(t=Ao(this.mapsProvider))?io:"osm"===t?wo:void 0;var t},mapClasses:function(){return["SharpGeolocation__map--".concat(Ao(this.mapsProvider))]},tilesUrl:function(){return Do(Io(this.mapsProvider))},maxBounds:function(){return this.boundaries?[this.boundaries.sw,this.boundaries.ne]:null},modalTitle:function(){return this.geocoding?this.l("form.geolocation.modal.title"):this.l("form.geolocation.modal.title-no-geocoding")}},methods:{providerName:Ao,providerOptions:Io,handleModalSubmitted:function(){this.$emit("input",this.location)},handleRemoveButtonClicked:function(){this.$emit("input",null)},handleShowModalButtonClicked:function(){this.modalVisible=!0},handleEditButtonClicked:function(){this.modalVisible=!0},handleLocationChanged:function(t){this.location=t},loadProvider:function(t){var e,n=Ao(t),r=Io(t).apiKey;return e={apiKey:r},"gmaps"===n?Promise.resolve(ho(e)):Promise.resolve()},init:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadProvider(e.mapsProvider);case 2:if(!e.geocodingProvider){t.next=5;break}return t.next=5,e.loadProvider(e.geocodingProvider);case 5:e.ready=!0;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Mo(a,r,i,o,s,"next",t)}function s(t){Mo(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},created:function(){this.init()},mounted:function(){var t;null===(t=this.$tab)||void 0===t||t.$once("active",(function(){!function(){if("function"==typeof Event)window.dispatchEvent(new Event("resize"));else{var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}()}))}},zo=Object(k.a)(Vo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpGeolocation"},[t.isLoading?[t._v("\n        "+t._s(t.l("form.geolocation.loading"))+"\n    ")]:t.isEmpty?[n("Button",{attrs:{text:"",block:""},on:{click:t.handleShowModalButtonClicked}},[t._v("\n            "+t._s(t.l("form.geolocation.browse_button"))+"\n        ")])]:[n("div",{staticClass:"card card-body form-control"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-7"},[n(t.mapComponent,{tag:"component",staticClass:"SharpGeolocation__map",class:t.mapClasses,attrs:{"marker-position":t.value,center:t.value,zoom:t.zoomLevel,"max-bounds":t.maxBounds,"tiles-url":t.tilesUrl}})],1),t._v(" "),n("div",{staticClass:"col-5 pl-0"},[n("div",{staticClass:"d-flex flex-column justify-content-between h-100"},[n("div",[n("div",[n("small",[t._v("Latitude : "+t._s(t.latLngString.lat))])]),t._v(" "),n("div",[n("small",[t._v("Longitude : "+t._s(t.latLngString.lng))])])]),t._v(" "),n("div",[n("Button",{staticClass:"remove-button",attrs:{variant:"danger",small:"",outline:"",disabled:t.readOnly},on:{click:t.handleRemoveButtonClicked}},[t._v("\n                                "+t._s(t.l("form.geolocation.remove_button"))+"\n                            ")]),t._v(" "),n("Button",{attrs:{small:"",outline:"",disabled:t.readOnly},on:{click:t.handleEditButtonClicked}},[t._v("\n                                "+t._s(t.l("form.geolocation.edit_button"))+"\n                            ")])],1)])])])])],t._v(" "),n("Modal",{attrs:{title:t.modalTitle,visible:t.modalVisible,"no-close-on-backdrop":""},on:{"update:visible":function(e){t.modalVisible=e},ok:t.handleModalSubmitted}},[n("transition",{attrs:{duration:300}},[t.modalVisible?[n("GeolocationEdit",{attrs:{location:t.value,center:t.value||t.initialPosition,zoom:t.zoomLevel,"max-bounds":t.maxBounds,"maps-provider":t.providerName(t.mapsProvider),"maps-options":t.providerOptions(t.mapsProvider),geocoding:t.geocoding,"geocoding-provider":t.providerName(t.geocodingProvider),"geocoding-options":t.providerOptions(t.geocodingProvider)},on:{change:t.handleLocationChanged}})]:t._e()],2)],1)],2)}),[],!1,null,null,null);zo.options.__file="Geolocation.vue";var Ro=zo.exports,No={bold:{attribute:"bold",icon:ai("bold")},italic:{attribute:"italic",icon:ai("italic")},strike:{attribute:"strike",icon:ai("strike")},link:{action:"link",attribute:"href",icon:ai("link")},heading1:{attribute:"heading1",icon:ai("h1")},quote:{attribute:"quote",icon:ai("quote")},code:{attribute:"code",icon:ai("code")},bullet:{attribute:"bullet",icon:ai("ul")},number:{attribute:"number",icon:ai("ol")},increaseNestingLevel:{action:"increaseNestingLevel",icon:ai("indent")},decreaseNestingLevel:{action:"decreaseNestingLevel",icon:ai("de-indent")},undo:{action:"undo",icon:ai("undo")},redo:{action:"redo",icon:ai("redo")}};function Ko(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var qo={mixins:[We("form.wysiwyg")],props:{toolbar:Array},data:function(){return{buttons:No}},computed:{toolbarGroups:function(){return this.toolbar.reduce((function(t,e){return"|"===e?[].concat(Ko(t),[[]]):(t[t.length-1].push(e),t)}),[[]])}},directives:{buttonData:function(t,e){var n=e.value,r=n.attribute,i=n.action;r&&t.setAttribute("data-trix-attribute",r),i&&t.setAttribute("data-trix-action",i)}}},Uo=Object(k.a)(qo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t._l(t.toolbarGroups,(function(e){return[n("div",{staticClass:"btn-group"},[t._l(e,(function(e){return[n("button",{directives:[{name:"button-data",rawName:"v-button-data",value:t.buttons[e],expression:"buttons[part]"}],staticClass:"btn btn-light"},[n("i",{class:t.buttons[e].icon})])]}))],2)]}))],2),t._v(" "),n("div",{staticClass:"trix-dialogs",attrs:{"data-trix-dialogs":""}},[n("div",{staticClass:"trix-dialog trix-dialog--link border-0 shadow",attrs:{"data-trix-dialog":"href","data-trix-dialog-attribute":"href"}},[n("div",{staticClass:"trix-dialog__link-fields"},[n("input",{staticClass:"trix-input trix-input--dialog",attrs:{type:"url",name:"href",placeholder:t.lSub("dialogs.add_link.input_placeholder"),required:"","data-trix-input":""}}),t._v(" "),n("div",{staticClass:"trix-button-group"},[n("input",{staticClass:"trix-button trix-button--dialog",attrs:{type:"button",value:t.lSub("dialogs.add_link.link_button"),"data-trix-method":"setAttribute"}}),t._v(" "),n("input",{staticClass:"trix-button trix-button--dialog",attrs:{type:"button",value:t.lSub("dialogs.add_link.unlink_button"),"data-trix-method":"removeAttribute"}})])])])])])}),[],!1,null,null,null);Uo.options.__file="TrixCustomToolbar.vue";var Ho=Uo.exports,Go={name:"SharpTrix",mixins:[ri({textProp:"text"})],components:{TrixCustomToolbar:Ho},props:{value:Object,toolbar:Array,height:{type:Number,default:250},placeholder:String,readOnly:Boolean,uniqueIdentifier:String},watch:{locale:function(){this.localized&&this.$refs.trix.editor.loadHTML(this.text)}},computed:{inputId:function(){return"trix-input-".concat(this.uniqueIdentifier)},toolbarId:function(){return"trix-toolbar-".concat(this.uniqueIdentifier)},text:function(){return this.localized?this.localizedText:this.value.text}},methods:{handleChanged:function(t){this.$emit("input",this.localizedValue(t.target.value))}},created:function(){window.Trix.config.toolbar.getDefaultHTML=function(){return""}}},Wo=Object(k.a)(Go,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpTrix editor",class:{"SharpTrix--read-only":t.readOnly}},[n("div",{staticClass:"card"},[t.toolbar?n("trix-toolbar",{staticClass:"card-header editor__toolbar",attrs:{id:t.toolbarId}},[n("trix-custom-toolbar",{attrs:{toolbar:t.toolbar}})],1):t._e(),t._v(" "),n("trix-editor",{ref:"trix",staticClass:"card-body form-control",style:{height:t.height+"px",maxHeight:t.height+"px"},attrs:{input:t.inputId,toolbar:t.toolbarId,placeholder:t.placeholder},on:{"trix-change":t.handleChanged}})],1),t._v(" "),n("input",{attrs:{id:t.inputId,type:"hidden"},domProps:{value:t.text}})])}),[],!1,null,null,null);Wo.options.__file="TrixEditor.vue";var Yo=Wo.exports,Qo=n("wmP1"),Xo={components:{ElDatePicker:n.n(Qo).a},props:{value:{default:function(){return{start:null,end:null}}},displayFormat:{type:String,default:"DD/MM/YYYY"},startPlaceholder:{type:String,default:function(){return te("form.daterange.start_placeholder")}},endPlaceholder:{type:String,default:function(){return te("form.daterange.end_placeholder")}},clearable:{type:Boolean,default:!0},readOnly:Boolean,mondayFirst:Boolean},computed:{transformedValue:function(){var t=this.value||{};return t.start||t.end?[t.start,t.end]:null},transformedFormat:function(){return this.displayFormat.replace(/D/g,"d").replace(/Y/g,"y")},pickerOptions:function(){return{firstDayOfWeek:this.mondayFirst?1:7}},classes:function(){return{"SharpDateRange--clearable":this.clearable}}},methods:{handleChanged:function(t){var e=t||[];this.$emit("input",{start:e[0],end:e[1]})},handleFocused:function(){this.$emit("focus")},handleBlur:function(){this.$emit("blur")}}},Jo=Object(k.a)(Xo,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{ref:"picker",staticClass:"SharpDateRange",class:t.classes,attrs:{value:t.transformedValue,format:t.transformedFormat,"start-placeholder":t.startPlaceholder,"end-placeholder":t.endPlaceholder,disabled:t.readOnly,clearable:t.clearable,"picker-options":t.pickerOptions,type:"daterange","popper-class":"SharpDateRange__popper"},on:{input:t.handleChanged,focus:t.handleFocused,blur:t.handleBlur}})}),[],!1,null,null,null);Jo.options.__file="DateRange.vue";var Zo=Jo.exports,ts={autocomplete:jr,text:Ar,textarea:Pr,markdown:Oi,number:Pi,upload:Ii,tags:Qi,date:ha,check:ma,list:$a,select:Ua,html:Wa,geolocation:Ro,wysiwyg:Yo,daterange:Zo};function es(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ns(t,e,n[e])}))}return t}function ns(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rs(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var is={name:"SharpField",inheritAttrs:!1,provide:function(){return{$field:this}},props:{fieldKey:String,fieldType:String,fieldProps:Object,fieldLayout:Object,value:[String,Number,Boolean,Object,Array,Date],locale:[Array,String],uniqueIdentifier:String,fieldConfigIdentifier:String,updateData:Function,readOnly:Boolean,root:Boolean},computed:{isCustom:function(){return Te(this.fieldType)},component:function(){return this.isCustom?Me(this.fieldType):ts[this.fieldType]}},render:function(t){var e=this;if(!this.component)return this.custom||Ee("Unknown field type '".concat(this.fieldType,"'"),this.fieldProps),null;var n=this.fieldProps,r=(n.key,rs(n,["key"]));return t(this.component,{class:"SharpField",props:es({fieldKey:this.fieldKey,fieldLayout:this.fieldLayout,value:this.value,locale:this.locale,uniqueIdentifier:this.uniqueIdentifier,fieldConfigIdentifier:this.fieldConfigIdentifier,root:this.root},r),attrs:{dynamicAttributes:r.dynamicAttributes},on:es({input:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.fieldProps.readOnly&&!n.force?Le("SharpField '".concat(e.fieldKey,"', can't update because is readOnly")):e.updateData(e.fieldKey,t,{forced:n.force})},blur:function(){e.fieldProps.focused=!1}},this.$listeners)})}},as=Object(k.a)(is,void 0,void 0,!1,null,null,null);as.options.__file="Field.vue";var os=as.exports,ss={props:{locales:{type:Array,required:!0},currentLocale:{type:String,required:!0},fieldValue:[String,Number,Boolean,Object,Array],isLocaleObject:Boolean,errors:Array},methods:{isActive:function(t){return this.currentLocale===t},isEmpty:function(t){var e=this.isLocaleObject?(this.fieldValue||{})[t]:this.fieldValue;return Array.isArray(e)?!e.length:!e},hasError:function(t){var e;return null===(e=this.errors)||void 0===e?void 0:e.includes(t)},handleButtonClicked:function(t){this.$emit("change",t)}}},ls=Object(k.a)(ss,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpFieldLocaleSelect"},[n("div",{staticClass:"row gx-1"},[t._l(t.locales,(function(e){return[n("div",{staticClass:"col-auto d-flex"},[n("button",{staticClass:"SharpFieldLocaleSelect__btn ml-2",class:{"SharpFieldLocaleSelect__btn--active":t.isActive(e),"SharpFieldLocaleSelect__btn--empty":t.isEmpty(e),"SharpFieldLocaleSelect__btn--error":t.hasError(e)},on:{click:function(n){return t.handleButtonClicked(e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])])]}))],2)])}),[],!1,null,null,null);function cs(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function us(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ds(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){hs(t,e,n[e])}))}return t}function hs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ls.options.__file="FieldLocaleSelect.vue";var fs={name:"SharpFieldContainer",mixins:[Dt,Xe],components:{Field:os,FieldLocaleSelect:ls.exports},inject:{$form:{},$tab:{default:null}},props:ds(ds({},os.props),{},{label:String,helpMessage:String,originalValue:[String,Number,Boolean,Object,Array,Date],errorIdentifier:[String,Number],localizedErrorIdentifier:String}),data:function(){return{state:"default",stateMessage:""}},watch:{originalValue:{deep:!0,handler:"handleValueChanged"},"$form.errors":function(t){this.updateError(t)},locale:function(){this.updateError(this.$form.errors)}},computed:{formGroupClasses:function(){return["SharpForm__form-item--type-".concat(this.fieldType),{"SharpForm__form-item--danger":this.hasError,"SharpForm__form-item--success":"ok"===this.state,"SharpForm__form-item--has-label":this.showLabel,"SharpForm__form-item--no-label":!this.showLabel}]},extraStyle:function(){return this.fieldProps.extraStyle},hasError:function(){return"error"===this.state||this.errorsLocales.length>0},showLabel:function(){return!!this.label},resolvedOriginalValue:function(){return t={field:this.fieldProps,value:this.originalValue},e=t.field,n=t.value,"markdown"===e.type||"wysiwyg"===e.type?(n||{}).text:n;var t,e,n},isLocaleObject:function(){return Xn(this.fieldProps)},mergedErrorIdentifier:function(){return this.getMergedIdentifier("mergedErrorIdentifier",this.errorIdentifier)},mergedLocalizedErrorIdentifier:function(){return this.localizedErrorIdentifier?this.getMergedIdentifier("mergedErrorIdentifier",this.localizedErrorIdentifier):null},errorsLocales:function(){var t=this;return Object.entries(this.$form.errors).filter((function(t){var e=us(t,2);e[0];return!!e[1]})).reduce((function(e,n){var r=us(n,1)[0].match(new RegExp("^".concat(t.mergedErrorIdentifier,"\\.([^.]+)$"))),i=null==r?void 0:r[1];return i?[].concat(cs(e),[i]):e}),[])}},methods:{updateError:function(t){var e,n=null!==(e=t[this.mergedLocalizedErrorIdentifier])&&void 0!==e?e:t[this.mergedErrorIdentifier];if(Array.isArray(n))this.setError(n[0]);else if(this.errorsLocales.length>0){var r=this.errorsLocales.join(", ").toUpperCase(),i=te("form.validation_error.localized").replace(":locales",r);this.setError(i)}else null==n?this.clear(!1):Ee('FieldContainer : Not processable error "'.concat(this.mergedErrorIdentifier,'" : '),n)},setError:function(t){var e;this.state="error",this.stateMessage=t,null===(e=this.$tab)||void 0===e||e.$emit("error",this.mergedErrorIdentifier)},setOk:function(){this.state="ok",this.stateMessage=""},clear:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state="default",this.stateMessage="",t&&(this.emitClear(this.mergedErrorIdentifier),this.mergedLocalizedErrorIdentifier&&this.emitClear(this.mergedLocalizedErrorIdentifier))},emitClear:function(t){var e;null===(e=this.$tab)||void 0===e||e.$emit("clear",t),this.$form.$emit("error-cleared",t)},triggerFocus:function(){this.$set(this.fieldProps,"focused",!0)},handleBlur:function(){this.$set(this.fieldProps,"focused",!1)},handleValueChanged:function(){"error"===this.state&&this.clear()},handleLocaleChanged:function(t){this.$emit("locale-change",this.fieldKey,t)}},directives:{sticky:wt}},ps=Object(k.a)(fs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpFieldContainer SharpForm__form-item",class:t.formGroupClasses,style:t.extraStyle},[n("div",{directives:[{name:"sticky",rawName:"v-sticky"}],staticClass:"SharpForm__field-header"},[n("div",{staticClass:"row align-items-end"},[n("div",{staticClass:"col"},[t.showLabel?[n("label",{staticClass:"SharpForm__label form-label",on:{click:t.triggerFocus}},[t._v("\n                        "+t._s(t.label)+"\n                    ")])]:[n("div",{staticClass:"SharpForm__label SharpForm__label--placeholder form-label"})]],2),t._v(" "),t.fieldProps.localized?[n("div",{staticClass:"col-auto"},[n("FieldLocaleSelect",{attrs:{locales:t.$form.locales,"current-locale":t.locale,"field-value":t.resolvedOriginalValue,"is-locale-object":t.isLocaleObject,errors:t.errorsLocales},on:{change:t.handleLocaleChanged}})],1)]:t._e()],2)]),t._v(" "),n("div",{staticClass:"SharpForm__field-content"},[n("Field",t._b({ref:"field",attrs:{"unique-identifier":t.mergedErrorIdentifier,"field-config-identifier":t.mergedConfigIdentifier},on:{error:t.setError,ok:t.setOk,clear:t.clear,blur:t.handleBlur,"locale-change":t.handleLocaleChanged}},"Field",t.$props,!1))],1),t._v(" "),t.stateMessage?[n("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.stateMessage))])]:t._e(),t._v(" "),t.helpMessage?[n("div",{staticClass:"SharpForm__help-message form-text"},[t._v(t._s(t.helpMessage))])]:t._e()],2)}),[],!1,null,null,null);ps.options.__file="FieldContainer.vue";var ms=ps.exports,vs=function(t){var e=t.condValues,n=t.fieldValue,r=t.isSingleSelect;if(Array.isArray(e))return r?e.some((function(t){return t==n})):e.some((function(t){return n.some((function(e){return e==t}))}));if("!"===e[0]){var i=e.substring(1);return r?i!=n:!n.some((function(t){return t==i}))}return r?e==n:n.some((function(t){return t==e}))};function ys(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){bs(t,e,n[e])}))}return t}function bs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gs(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _s(t,e,n){return!n||function(t,e,n){var r=!0,i=n.operator;if("or"!==i&&"and"!==i)return Ee("Conditional display : unknown operator '".concat(i,"'"),n),!0;var a=!0,o=!1,s=void 0;try{for(var l,c=n.fields[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.key in t||(Ee("Conditional display : can't find a field with key '".concat(n.key,"' in 'fields'"),n),r=!0);var d=t[u.key],h=e[u.key];if("autocomplete"===d.type||"select"===d.type||"tags"===d.type?r=vs({condValues:u.values,fieldValue:"autocomplete"===d.type?h&&h.id:h,isSingleSelect:"select"===d.type&&!d.multiple||"autocomplete"===d.type}):"check"===d.type?"boolean"!=typeof u.values?(Ee("Conditional display : 'values' must be a boolean for a 'check' field ('".concat(u.key,"')"),n,d),r=!0):r=!!h===u.values:(Ee("Conditional display : unprocessable field type '".concat(d.type,"'"),d),r=!0),"and"===i&&!r)return!1;if("or"===i&&r)return!0}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return r}(t,e,n)}var ws=function(t,e,n,r){return t.localized&&e.localized&&n&&Xn(e)?n[r]:n},Ss={name:"SharpFieldDisplay",functional:!0,inject:["$form"],render:function(t,e){var n=e.props,r=e.injections,i=e.data,a=n.fieldKey,o=n.contextFields,s=n.contextData,l=n.errorIdentifier,c=n.updateVisibility,u=n.readOnly,d=gs(n,["fieldKey","contextFields","contextData","errorIdentifier","updateVisibility","readOnly"]),h=r.$form,f=o[a],p=s[a];if(!(a in o))return Ee("Field display ('layout') : Can't find a field with key '".concat(a,"' in 'fields'"),o),t(Kn,{props:{name:a}});var m=_s(o,s,f.conditionalDisplay);return c&&c(a,m),m?t(ms,ys(ys({},i),{},{attrs:ys({fieldKey:a,fieldProps:ys(ys({},f),{},{readOnly:u||f.readOnly}),fieldType:f.type,value:ws(h,f,p,n.locale),originalValue:p,label:f.label,helpMessage:f.helpMessage,errorIdentifier:l,localizedErrorIdentifier:f.localized?"".concat(l,".").concat(n.locale):null},d)})):null}},Cs={components:{Dropdown:ut,DropdownItem:pt},props:{locale:String,locales:Array},methods:{handleChanged:function(t){this.$emit("change",t)},isActive:function(t){return this.locale===t}}},xs=Object(k.a)(Cs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dropdown",{staticClass:"SharpForm__locale-dropdown",scopedSlots:t._u([{key:"text",fn:function(){return[t.locale?[t._v(t._s(t.locale))]:[t._v("-")]]},proxy:!0}])},[t._v(" "),t._l(t.locales,(function(e){return[n("DropdownItem",{key:e,staticClass:"text-uppercase small",attrs:{active:t.isActive(e)},on:{click:function(n){return t.handleChanged(e)}}},[t._v("\n            "+t._s(e)+"\n        ")])]}))],2)}),[],!1,null,null,null);xs.options.__file="LocaleSelect.vue";var Os=xs.exports;function ks(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function js(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Ls(t,e,n[e])}))}return t}function Ls(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Es(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ps(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Es(a,r,i,o,s,"next",t)}function s(t){Es(a,r,i,o,s,"throw",t)}o(void 0)}))}}function $s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Bs={name:"SharpForm",extends:Je,mixins:[Ge,xa("fields")],components:{TabbedLayout:Fn,FieldsLayout:ba,Grid:Ot,Dropdown:ut,DropdownItem:pt,LocaleSelect:Os},props:{entityKey:String,instanceId:String,independant:Boolean,ignoreAuthorizations:Boolean,showAlert:{type:Boolean,default:!0},props:Object},provide:function(){return{$form:this}},data:function(){return{ready:!1,fields:null,authorizations:null,breadcrumb:null,config:null,errors:{},fieldLocale:{},locales:null,fieldVisible:{},uploadingFields:{},curFieldsetId:0}},computed:{apiPath:function(){var t="form/".concat(this.entityKey);return this.instanceId&&(t+="/".concat(this.instanceId)),t},localized:function(){return Array.isArray(this.locales)&&!!this.locales.length},isSingle:function(){return!!this.config&&this.config.isSingle},isCreation:function(){return!this.isSingle&&!this.instanceId},isReadOnly:function(){return!this.ignoreAuthorizations&&(this.isCreation?!this.authorizations.create:!this.authorizations.update)},synchronous:function(){return this.independant},hasErrors:function(){return Object.values(this.errors).some((function(t){return!!t}))},baseEntityKey:function(){return this.entityKey.split(":")[0]},downloadLinkBase:function(){return"/download/".concat(this.entityKey,"/").concat(this.instanceId)},transformedFields:function(){return Cr(this.fields,this.data)},currentLocale:function(){var t,e=Object.values(this.fieldLocale).map((function(t){return Array.isArray(t)?t.map((function(t){return Object.values(t)})):t})).flat(2),n=$s(new Set(e));return n.length?1===n.length?n[0]:null:null===(t=this.locales)||void 0===t?void 0:t[0]},isUploading:function(){return Object.values(this.uploadingFields).some((function(t){return!!t}))},actionBarProps:function(){var t,e;return this.ready?{showSubmitButton:this.isCreation?!!this.authorizations.create:!!this.authorizations.update,showDeleteButton:!this.isCreation&&!this.isSingle&&!!this.authorizations.delete,showBackButton:this.isReadOnly,create:!!this.isCreation,uploading:this.isUploading,breadcrumb:null===(t=this.breadcrumb)||void 0===t?void 0:t.items,showBreadcrumb:!!(null===(e=this.breadcrumb)||void 0===e?void 0:e.visible)}:null},actionBarListeners:function(){return{submit:this.handleSubmitClicked,delete:this.handleDeleteClicked,cancel:this.handleCancelClicked}}},methods:{updateData:function(t,e){var n=this,r=arguments;return Ps(U.a.mark((function i(){var a,o;return U.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=r.length>2&&void 0!==r[2]?r[2]:{},o=a.forced,n.data=js(js(js({},n.data),o?null:br(n.fields,t,(function(t){return n.fieldLocalizedValue(t.key,null)}))),{},Ls({},t,n.fieldLocalizedValue(t,e)));case 2:case"end":return i.stop()}}),i)})))()},updateVisibility:function(t,e){this.$set(this.fieldVisible,t,e)},updateLocale:function(t,e){this.$set(this.fieldLocale,t,e)},handleLocaleChanged:function(t){this.fieldLocale=this.defaultFieldLocaleMap({fields:this.fields,locales:this.locales},t)},mount:function(t){var e=t.fields,n=t.layout,r=t.data,i=void 0===r?{}:r,a=t.authorizations,o=void 0===a?{}:a,s=t.locales,l=t.breadcrumb,c=t.config;this.fields=e,this.data=i,this.layout=this.patchLayout(n),this.locales=s,this.authorizations=o,this.breadcrumb=l,this.config=c,e&&(this.fieldVisible=Object.keys(this.fields).reduce((function(t,e){return t[e]=!0,t}),{}),this.fieldLocale=this.defaultFieldLocaleMap({fields:e,locales:s})),this.validate()},validate:function(){Object.keys(this.fieldLocale).length>0&&!this.locales.length&&ue("Some fields are localized but the form hasn't any locales configured",{title:"Data error",isError:!0})},handleError:function(t){var e;return 422===(null===(e=t.response)||void 0===e?void 0:e.status)&&(this.errors=t.response.data.errors||{}),Promise.reject(t)},patchLayout:function(t){if(t){var e=0,n=function t(n){n.legend?n.id="".concat(e++,"#").concat(n.legend):n.fields&&n.fields.forEach((function(e){e.forEach(t)}))};return t.tabs.forEach((function(t){return t.columns.forEach(n)})),t}},serialize:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;return Object.fromEntries(Object.entries(null!=e?e:{}).filter((function(e){var n,r=ks(e,1)[0];return"html"!==(null===(n=t.fields[r])||void 0===n?void 0:n.type)})))},init:function(){var t=this;return Ps(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.independant){e.next=5;break}t.mount(t.props),t.ready=!0,e.next=12;break;case 5:if(!t.entityKey){e.next=11;break}return e.next=8,t.get();case 8:t.ready=!0,e.next=12;break;case 11:Ee("no entity key provided");case 12:case"end":return e.stop()}}),e)})))()},redirectForResponse:function(t){location.href=t.data.redirectUrl},redirectToParentPage:function(){location.href=Ie(this.breadcrumb.items)},submit:function(){var t=this,e=arguments;return Ps(U.a.mark((function n(){var r,i,a,o,s;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:{},i=r.postFn,!t.isUploading){n.next=3;break}return n.abrupt("return");case 3:return t.$emit("loading",!0),a=t.serialize(),o=function(){return i?i(a):t.post(t.apiPath,a)},n.next=8,o().catch(t.handleError).finally((function(){t.$emit("loading",!1)}));case 8:if(s=n.sent,!t.independant){n.next=12;break}return t.$emit("submit",s),n.abrupt("return",s);case 12:t.$store.dispatch("setLoading",!0),t.redirectForResponse(s);case 14:case"end":return n.stop()}}),n)})))()},handleSubmitClicked:function(){this.submit().catch((function(){}))},handleDeleteClicked:function(){var t=this;this.axiosInstance.delete(this.apiPath).then((function(e){t.redirectForResponse(e)}))},handleCancelClicked:function(){this.redirectToParentPage()},setUploading:function(t,e){this.uploadingFields=js(js({},this.uploadingFields),{},Ls({},t,e))},hasUploadingFields:function(t){return Object.entries(this.uploadingFields).some((function(e){var n=ks(e,2),r=n[0],i=n[1];return r.startsWith("".concat(t,"."))&&i}))}},created:function(){var t=this;this.$on("error-cleared",(function(e){t.errors=js(js({},t.errors),{},Ls({},e,null))}))},mounted:function(){this.init()}},As=Object(k.a)(Bs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpForm",attrs:{"data-popover-boundary":""}},[t._t("action-bar",null,{props:t.actionBarProps,listeners:t.actionBarListeners}),t._v(" "),t.ready?[t.hasErrors&&t.showAlert?[n("div",{staticClass:"alert alert-danger SharpForm__alert",attrs:{role:"alert"}},[n("div",{staticClass:"fw-bold"},[t._v(t._s(t.l("form.validation_error.title")))]),t._v(" "),n("div",[t._v(t._s(t.l("form.validation_error.description")))])])]:t._e(),t._v(" "),n("TabbedLayout",{ref:"tabbedLayout",attrs:{layout:t.layout},scopedSlots:t._u([t.localized?{key:"nav-prepend",fn:function(){return[n("LocaleSelect",{attrs:{locale:t.currentLocale,locales:t.locales},on:{change:t.handleLocaleChanged}})]},proxy:!0}:null,{key:"default",fn:function(e){var r=e.tab;return[n("Grid",{ref:"columnsGrid",attrs:{rows:[r.columns]},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.itemLayout;return[n("FieldsLayout",{ref:"fieldLayout",attrs:{layout:r.fields,visible:t.fieldVisible},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.fieldLayout;return[n("FieldDisplay",{ref:"field",attrs:{"field-key":r.key,"context-fields":t.transformedFields,"context-data":t.data,"field-layout":r,locale:t.fieldLocale[r.key],"read-only":t.isReadOnly,"error-identifier":r.key,"config-identifier":r.key,root:"","update-data":t.updateData,"update-visibility":t.updateVisibility},on:{"locale-change":t.updateLocale}})]}}],null,!0)})]}}],null,!0)})]}}],null,!0)})]:t._e()],2)}),[],!1,null,null,null);As.options.__file="Form.vue";var Is=As.exports,Ds={name:"SharpActionBarForm",mixins:[Ge],components:{ActionBar:L,Button:I,Breadcrumb:$},props:{showSubmitButton:Boolean,showDeleteButton:Boolean,showBackButton:Boolean,create:Boolean,uploading:Boolean,breadcrumb:Array,showBreadcrumb:Boolean},data:function(){return{deleteFocused:!1}},computed:{submitLabel:function(){return this.uploading?te("action_bar.form.submit_button.pending.upload"):this.create?te("action_bar.form.submit_button.create"):te("action_bar.form.submit_button.update")}},methods:{handleSubmitClicked:function(){this.$emit("submit")},handleDeleteClicked:function(){this.$emit("delete")},handleCancelClicked:function(){this.$emit("cancel")}}},Fs=Object(k.a)(Ds,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActionBar",{scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"row gx-3"},[n("div",{staticClass:"col-auto"},[n("Button",{attrs:{variant:"light",large:"",outline:""},on:{click:t.handleCancelClicked}},[t.showBackButton?[t._v("\n                        "+t._s(t.l("action_bar.form.back_button"))+"\n                    ")]:[t._v("\n                        "+t._s(t.l("action_bar.form.cancel_button"))+"\n                    ")]],2)],1),t._v(" "),t.showDeleteButton?[n("div",{staticClass:"col-auto"},[t.deleteFocused?[n("Button",{attrs:{variant:"danger",large:""},on:{click:t.handleDeleteClicked,blur:function(e){t.deleteFocused=!1}}},[t._v("\n                            "+t._s(t.l("action_bar.form.delete_button"))+"\n                        ")])]:[n("Button",{staticClass:"px-3",attrs:{variant:"light",large:"",outline:""},on:{click:function(e){t.deleteFocused=!0}}},[n("svg",{attrs:{width:"1.125em",height:"1.125em",viewBox:"0 0 16 24","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M4 0h8v2H4zM0 3v4h1v17h14V7h1V3H0zm13 18H3V8h10v13z"}}),t._v(" "),n("path",{attrs:{d:"M5 10h2v9H5zm4 0h2v9H9z"}})])])]],2)]:t._e()],2)]},proxy:!0},{key:"right",fn:function(){return[t.showSubmitButton?[n("Button",{attrs:{variant:"light",large:"",disabled:t.uploading},on:{click:t.handleSubmitClicked}},[t._v("\n                "+t._s(t.submitLabel)+"\n            ")])]:t._e()]},proxy:!0},{key:"extras",fn:function(){return[t.showBreadcrumb?[n("Breadcrumb",{attrs:{items:t.breadcrumb}})]:t._e()]},proxy:!0}])})}),[],!1,null,null,null);Fs.options.__file="ActionBar.vue";var Ts={components:{Form:Is,ActionBarForm:Fs.exports},computed:{entityKey:function(){return this.$route.params.entityKey},instanceId:function(){return this.$route.params.instanceId}}},Ms=Object(k.a)(Ts,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"FormPage"},[n("div",{staticClass:"container"},[n("Form",{attrs:{"entity-key":t.entityKey,"instance-id":t.instanceId},scopedSlots:t._u([{key:"action-bar",fn:function(e){var r=e.props,i=e.listeners;return[n("ActionBarForm",t._g(t._b({},"ActionBarForm",r,!1),i))]}}])})],1)])}),[],!1,null,null,null);Ms.options.__file="FormPage.vue";var Vs=[{name:"form",path:"/(.*)?/s-form/:entityKey/:instanceId?",component:Ms.exports}],zs={components:{Modal:sn,Form:Is,LoadingOverlay:It},props:{command:Object},data:function(){return{visible:!1,loading:!1}},watch:{command:function(t){this.visible=!!(null==t?void 0:t.form)}},computed:{title:function(){var t,e,n;return null!==(t=null===(e=this.command)||void 0===e?void 0:e.modal_title)&&void 0!==t?t:null===(n=this.command)||void 0===n?void 0:n.label}},methods:{submit:function(){var t;return(t=this.$refs.form).submit.apply(t,arguments)},handleSubmitButtonClicked:function(t){t.preventDefault(),this.$emit("submit")},handleClosed:function(){this.$emit("close")},handleLoadingChanged:function(t){this.loading=t}}},Rs=Object(k.a)(zs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{visible:t.visible,loading:t.loading,title:t.title},on:{"update:visible":function(e){t.visible=e},ok:t.handleSubmitButtonClicked,hidden:t.handleClosed}},[n("transition",[t.visible?n("Form",{ref:"form",staticStyle:{"transition-duration":"300ms"},attrs:{props:t.command.form,"show-alert":!1,independant:"","ignore-authorizations":""},on:{loading:t.handleLoadingChanged}}):t._e()],1)],1)}),[],!1,null,null,null);Rs.options.__file="CommandFormModal.vue";var Ns=Rs.exports,Ks={name:"SharpCommandsDropdown",components:{Dropdown:ut,DropdownItem:pt,DropdownSeparator:yt},props:{commands:{type:Array},small:{type:Boolean,default:!0},hasState:Boolean},computed:{commandGroups:function(){return this.commands.filter((function(t){return t.length>0}))},classes:function(){return{"SharpCommandsDropdown--has-state":this.hasState}}},methods:{handleCommandClicked:function(t){this.$emit("select",t)}}},qs=Object(k.a)(Ks,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dropdown",t._b({staticClass:"SharpCommandsDropdown",class:t.classes,attrs:{small:t.small,right:""},scopedSlots:t._u([{key:"text",fn:function(){return[t._t("text")]},proxy:!0}],null,!0)},"Dropdown",t.$attrs,!1),[t._v(" "),t._t("prepend"),t._v(" "),t._l(t.commandGroups,(function(e,r){return[r>0?[n("DropdownSeparator")]:t._e(),t._v(" "),t._l(e,(function(e){return[n("DropdownItem",{key:e.key,on:{click:function(n){return t.handleCommandClicked(e)}}},[t._v("\n                "+t._s(e.label)+"\n                "),e.description?[n("div",{staticClass:"SharpCommandsDropdown__description"},[t._v("\n                        "+t._s(e.description)+"\n                    ")])]:t._e()],2)]}))]}))],2)}),[],!1,null,null,null);qs.options.__file="CommandsDropdown.vue";var Us=qs.exports,Hs={name:"SharpViewPanel",props:{content:String},computed:{visible:function(){return!!this.content}},methods:{handleBackdropClicked:function(){this.$emit("close")}},directives:{srcdoc:{inserted:function(t,e){var n=e.value;t.contentWindow.document.write(n)}}}},Gs=Object(k.a)(Hs,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"SharpViewPanel__glasspane",on:{click:this.handleBackdropClicked}}),this._v(" "),e("transition",{attrs:{"enter-class":"SharpViewPanel--collapsed","enter-active-class":"SharpViewPanel--expanding","enter-to-class":"SharpViewPanel--expanded","leave-class":"SharpViewPanel--expanded","leave-active-class":"SharpViewPanel--collapsing","leave-to-class":"SharpViewPanel--collapsed"}},[this.visible?[e("div",{staticClass:"SharpViewPanel"},[e("iframe",{directives:[{name:"srcdoc",rawName:"v-srcdoc",value:this.content,expression:"content"}],attrs:{src:"about:blank",sandbox:"allow-forms allow-scripts allow-same-origin allow-popups allow-modals allow-downloads"}})])]:this._e()],2)],1)}),[],!1,null,null,null);Gs.options.__file="CommandViewPanel.vue";var Ws=Gs.exports;var Ys,Qs,Xs,Js={namespaced:!0,state:{commands:null},mutations:(Ys={},Qs="SET_COMMANDS",Xs=function(t,e){t.commands=e},Qs in Ys?Object.defineProperty(Ys,Qs,{value:Xs,enumerable:!0,configurable:!0,writable:!0}):Ys[Qs]=Xs,Ys),getters:{forType:function(t){return function(e){return t.commands?t.commands[e]:null}}},actions:{update:function(t,e){(0,t.commit)("SET_COMMANDS",e.commands)}}};function Zs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){tl(t,e,n[e])}))}return t}function tl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function el(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){nl(t,e,n[e])}))}return t}function nl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var il,al=new RegExp("^".concat("filter_"));function ol(t){return"".concat("filter_").concat(t)}function sl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ll(t,e,n[e])}))}return t}function ll(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cl={namespaced:!0,state:function(){return{filters:null,values:{}}},mutations:(il={},ll(il,"SET_FILTERS",(function(t,e){t.filters=e})),ll(il,"SET_FILTER_VALUE",(function(t,e){var n=e.key,r=e.value;i.a.set(t.values,n,r)})),il),getters:{value:function(t){return function(e){return t.values[e]}},filters:function(t){return t.filters||[]},values:function(t){return t.values},filter:function(t){return function(e){return(t.filters||[]).find((function(t){return t.key===e}))}},defaultValue:function(){return function(t){return(t||{}).default}},isDateRange:function(){return function(t){return"daterange"===(t||{}).type}},filterQueryKey:function(){return function(t){return ol(t)}},getQueryParams:function(t,e){return function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return Object.entries(t).reduce((function(t,n){var r=rl(n,2),i=r[0],a=r[1];return el(el({},t),{},nl({},ol(i),e(a,i)))}),{})}(t,(function(t,n){return e.serializeValue({filter:e.filter(n),value:t})}))}},getValuesFromQuery:function(){return function(t){return function(t){return Object.entries(t||{}).filter((function(t){var e=rl(t,1)[0];return al.test(e)})).reduce((function(t,e){var n=rl(e,2),r=n[0],i=n[1];return el(el({},t),{},nl({},r.replace(al,""),i))}),{})}(t)}},resolveFilterValue:function(t,e){return function(t){var n,r,i,a=t.filter,o=t.value;return null==o?e.defaultValue(a):a.multiple&&!Array.isArray(o)?[o]:e.isDateRange(a)?(n=xe((o||"").split(".."),2),r=n[0],i=n[1],{start:r?Ce()(r,"YYYYMMDD").toDate():null,end:i?Ce()(i,"YYYYMMDD").toDate():null}):o}},serializeValue:function(t,e){return function(t){var n=t.filter,r=t.value;return e.isDateRange(n)?function(t){if("string"==typeof t)return t;var e=(t||{}).start,n=(t||{}).end;return e&&(e=Ce()(e).format("YYYYMMDD")),n&&(n=Ce()(n).format("YYYYMMDD")),e||n?"".concat(e||"","..").concat(n||""):null}(r):r}},nextValues:function(t){return function(e){var n=e.filter,r=e.value,i=t.values;return n.master&&(i=Object.keys(t.values).reduce((function(t,e){return sl(sl({},t),{},ll({},e,null))}),{})),sl(sl({},i),{},ll({},n.key,r))}},nextQuery:function(t,e){return function(t){var n=t.filter,r=t.value;return e.getQueryParams(e.nextValues({filter:n,value:r}))}}},actions:{update:function(t,e){var n=t.commit,r=t.dispatch,i=e.filters,a=e.values;return n("SET_FILTERS",i),Promise.all((i||[]).map((function(t){r("setFilterValue",{filter:t,value:(a||{})[t.key]})})))},setFilterValue:function(t,e){var n=t.commit,r=t.getters,i=e.filter,a=e.value;n("SET_FILTER_VALUE",{key:i.key,value:r.resolveFilterValue({filter:i,value:a})})}}};function ul(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var dl={namespaced:!0,modules:{filters:cl},actions:{get:function(t){return(e=U.a.mark((function e(){var n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,pe.get("filters").then((function(t){return t.data}));case 3:r=e.sent,n("filters/update",{filters:r.filters});case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(t){ul(a,r,i,o,s,"next",t)}function s(t){ul(a,r,i,o,s,"throw",t)}o(void 0)}))})();var e},post:function(t,e){!function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t);var n=e.filter,r=e.value;return function(t){var e=t.filterKey,n=t.value;return pe.post("filters/".concat(e),{value:n})}({filterKey:n.key,value:r})}}},hl={name:"SharpFilterControl",props:{opened:Boolean,label:String},methods:{handleClicked:function(){this.$emit("click")}}},fl=Object(k.a)(hl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group input-group-sm flex-nowrap SharpFilterControl",on:{click:t.handleClicked}},[t.label?[n("div",{staticClass:"input-group-text bg-white"},[t._v("\n            "+t._s(t.label)+"\n        ")])]:t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null);fl.options.__file="FilterControl.vue";var pl=fl.exports,ml={name:"SharpFilterDateRange",components:{DateRange:Zo,FilterControl:pl},props:{value:{required:!0},required:Boolean,displayFormat:String,mondayFirst:Boolean,disabled:Boolean,label:String},data:function(){return{opened:!1}},computed:{empty:function(){return!this.value},classes:function(){return{"SharpFilterDateRange--empty":this.empty}}},methods:{handleClicked:function(){this.$refs.range.$refs.picker.focus()},handleInput:function(t){this.$emit("input",t)},handlePickerFocused:function(){this.opened=!0},handlePickerBlur:function(){this.opened=!1}}},vl=Object(k.a)(ml,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpFilterDateRange",class:t.classes},[n("FilterControl",{attrs:{opened:t.opened,label:t.label},on:{click:t.handleClicked}},[n("DateRange",{ref:"range",staticClass:"SharpFilterDateRange__field form-control",class:{"dropdown-toggle":t.required||!t.value},attrs:{value:t.value,"display-format":t.displayFormat,"monday-first":t.mondayFirst,clearable:!t.required,"read-only":t.disabled},on:{input:t.handleInput,focus:t.handlePickerFocused,blur:t.handlePickerBlur}})],1)],1)}),[],!1,null,null,null);vl.options.__file="FilterDateRange.vue";var yl=vl.exports;function bl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){gl(t,e,n[e])}))}return t}function gl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _l={name:"SharpFilterSelect",mixins:[Ge],components:{Select:Ua,Autocomplete:jr,FilterControl:pl},props:{label:String,values:{type:Array,required:!0},value:{type:[String,Number,Array]},multiple:Boolean,required:Boolean,searchable:Boolean,searchKeys:Array,template:String,disabled:Boolean,formSelect:Boolean},data:function(){return{opened:!1,debug:!1}},computed:{optionById:function(){return this.values.reduce((function(t,e){return bl(bl({},t),{},gl({},e.id,e))}),{})},empty:function(){return null==this.value||this.multiple&&!this.value.length},autocompleteValue:function(){var t=this;return this.multiple?(this.value||[]).map((function(e){return t.optionById[e]})):this.optionById[this.value]}},methods:{handleSelect:function(t){this.$emit("input",t)},handleAutocompleteInput:function(t){this.$emit("input",this.multiple?t.map((function(t){return t.id})):(t||{}).id)},handleClick:function(){this.opened?this.close():this.open()},open:function(){this.opened=!0,this.$emit("open"),this.$nextTick(this.showDropdown)},close:function(){this.debug||(this.opened=!1,this.$emit("close"),this.$nextTick(this.blur))},showDropdown:function(){var t=this.$refs.autocomplete.$refs.multiselect;t.activate(),this.debug&&(this.unwatch&&this.unwatch(),this.unwatch=t.$watch("isOpen",(function(t){t||(this.isOpen=!0)}),{sync:!0}))},blur:function(){this.$refs.select.blur()}}},wl=Object(k.a)(_l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpFilterSelect",class:{"SharpFilterSelect--open":t.opened,"SharpFilterSelect--empty":t.empty,"SharpFilterSelect--multiple":t.multiple,"SharpFilterSelect--searchable":t.searchable}},[n("Autocomplete",{ref:"autocomplete",staticClass:"SharpFilterSelect__select",staticStyle:{"max-width":"0"},attrs:{value:t.autocompleteValue,"local-values":t.values,"search-keys":t.searchKeys,"list-item-template":t.template,placeholder:t.l("entity_list.filter.search_placeholder"),multiple:t.multiple,"hide-selected":t.multiple,"allow-empty":!t.required,"preserve-search":!1,"show-pointer":!1,searchable:t.searchable,"read-only":t.disabled,nowrap:"","no-result-item":"",mode:"local"},on:{"multiselect-input":t.handleAutocompleteInput,close:t.close}}),t._v(" "),n("FilterControl",{attrs:{label:t.label},on:{click:t.handleClick}},[n("Select",{ref:"select",staticClass:"SharpFilterSelect__select text-wrap",class:t.formSelect?"form-select":"dropdown-toggle",attrs:{value:t.value,options:t.values,multiple:t.multiple,clearable:!t.required,"read-only":t.disabled,inline:!1,placeholder:" "},on:{input:t.handleSelect}})],1)],1)}),[],!1,null,null,null);wl.options.__file="FilterSelect.vue";var Sl=wl.exports;var Cl={name:"SharpFilter",props:{filter:{type:Object,required:!0},value:[Object,Array,String,Number],disabled:Boolean},computed:{filterComponent:function(){return"select"===(t=this.filter.type)?Sl:"daterange"===t?yl:void 0;var t}},methods:{handleInput:function(t){this.$emit("input",t)}}},xl=Object(k.a)(Cl,(function(){var t=this.$createElement;return(this._self._c||t)(this.filterComponent,this._b({tag:"component",attrs:{value:this.value,disabled:this.disabled},on:{input:this.handleInput}},"component",this.filter,!1))}),[],!1,null,null,null);xl.options.__file="Filter.vue";var Ol=xl.exports;function kl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jl={components:{FilterSelect:Sl},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){kl(t,e,n[e])}))}return t}({},Object(a.b)("global-filters",{filters:"filters/filters",filterValue:"filters/value"})),methods:{handleFilterChanged:function(t,e){var n=this;this.$store.dispatch("global-filters/post",{filter:t,value:e}).then((function(){n.$store.dispatch("setLoading",!0),location.href=Kt}))},handleOpened:function(){this.$emit("open")},handleClosed:function(){this.$emit("close")}}},Ll=Object(k.a)(jl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpGlobalFilters"},[t._l(t.filters,(function(e){return[n("FilterSelect",{key:e.key,attrs:{label:null,values:e.values,value:t.filterValue(e.key),multiple:e.multiple,required:e.required,template:e.template,"search-keys":e.searchKeys,searchable:e.searchable,"form-select":""},on:{input:function(n){return t.handleFilterChanged(e,n)},open:function(n){return t.handleOpened(e)},close:function(n){return t.handleClosed(e)}}})]}))],2)}),[],!1,null,null,null);Ll.options.__file="GlobalFilters.vue";var El,Pl=Ll.exports;function $l(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Bl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Al={namespaced:!0,modules:{filters:cl,commands:Js},state:{dashboardKey:null,data:null,widgets:null,config:null,layout:null},mutations:(El={},Bl(El,"UPDATE",(function(t,e){var n=e.data,r=e.layout,i=e.widgets,a=e.config;t.data=n,t.widgets=i,t.layout=r,t.config=a})),Bl(El,"SET_DASHBOARD_KEY",(function(t,e){t.dashboardKey=e})),El),actions:{update:function(t,e){var n=t.commit,r=t.dispatch,i=e.data,a=e.widgets,o=e.layout,s=e.config,l=e.filtersValues;return n("UPDATE",{data:i,widgets:a,layout:o,config:s}),Promise.all([r("filters/update",{filters:s.filters,values:l}),r("commands/update",{commands:s.commands})])},get:function(t,e){return(n=U.a.mark((function n(){var r,i,a,o,s;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.state,i=t.dispatch,a=t.getters,o=e.filtersValues,n.next=4,l={dashboardKey:r.dashboardKey,filters:a["filters/getQueryParams"](o)},c=void 0,u=void 0,c=l.dashboardKey,u=l.filters,pe.get("dashboard/".concat(c),{params:Zs({},u)}).then((function(t){return t.data}));case 4:return s=n.sent,n.next=7,i("update",{data:s.data,widgets:s.widgets,layout:s.layout,config:s.config,filtersValues:o});case 7:case"end":return n.stop()}var l,c,u}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,i){var a=n.apply(t,e);function o(t){$l(a,r,i,o,s,"next",t)}function s(t){$l(a,r,i,o,s,"throw",t)}o(void 0)}))})();var n},postCommand:function(t,e){var n=t.state,r=e.command,i=e.data,a=e.query;return function(t){var e=t.dashboardKey,n=t.commandKey,r=t.query,i=t.data;return pe.post("dashboard/".concat(e,"/command/").concat(n),{query:r,data:i},{responseType:"blob"})}({dashboardKey:n.dashboardKey,commandKey:r.key,data:i,query:a})},getCommandFormData:function(t,e){var n=t.state,r=e.command,i=e.query;return function(t){var e=t.dashboardKey,n=t.commandKey,r=t.query;return pe.get("dashboard/".concat(e,"/command/").concat(n,"/data"),{params:Zs({},r)}).then((function(t){return t.data.data}))}({dashboardKey:n.dashboardKey,commandKey:r.key,query:i})},setDashboardKey:function(t,e){(0,t.commit)("SET_DASHBOARD_KEY",e)}}},Il={name:"SharpWidgetPanel",components:{TemplateRenderer:zn},props:{value:Object,template:String}},Dl=Object(k.a)(Il,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"SharpWidgetPanel"},[e("TemplateRenderer",{attrs:{name:"WidgetPanel",template:this.template,"template-data":this.value.data}})],1)}),[],!1,null,null,null);Dl.options.__file="Panel.vue";var Fl=Dl.exports,Tl={name:"SharpWidgetOrderedList",components:{DataList:at,DataListRow:J},props:{value:Object,withCounts:{type:Boolean,default:!0},title:String},computed:{items:function(){return this.value.data},columns:function(){return[{key:"label",size:12,sizeXS:12}]}},methods:{hasCount:function(t){return this.withCounts&&"number"==typeof t.count}}},Ml=Object(k.a)(Tl,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpWidgetOrderedList w-100"},[n("h2",{staticClass:"SharpWidget__title mb-3"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),n("DataList",{staticClass:"SharpWidgetOrderedList__list",attrs:{items:t.items,columns:t.columns,"hide-header":""},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return[n("DataListRow",{attrs:{url:r.url,columns:t.columns,row:r},scopedSlots:t._u([t.hasCount(r)?{key:"append",fn:function(){return[n("span",{staticClass:"SharpTag SharpTag--default"},[t._v(t._s(r.count))])]},proxy:!0}:null],null,!0)})]}}])})],1)}),[],!1,null,null,null);Ml.options.__file="OrderedList.vue";var Vl=Ml.exports,zl=n("QkVN"),Rl=n.n(zl),Nl=n("EyHm"),Kl=n.n(Nl),ql=n("MjxK"),Ul=n("zkkH"),Hl=n("+hEb"),Gl=n("BZIA"),Wl=n("mCHd");function Yl(){return{chart:{toolbar:{show:!1,tools:{pan:!1,zoom:!0,download:!1}},locales:[Wl,ql,Ul,Hl,Gl],defaultLocale:document.documentElement.lang},legend:{showForSingleSeries:!0},tooltip:{y:{title:{formatter:function(t,e){var n=e.seriesIndex;return t!=="series-".concat(n+1)?"".concat(t,":"):""}}}}}}function Ql(t){var e,n;return!(null!==(e=null===(n=t.legend)||void 0===n?void 0:n.show)&&void 0!==e&&!e)}function Xl(t){var e=document.createElement("canvas").getContext("2d");return t.map((function(t){return e.fillStyle=t,e.fillStyle}))}var Jl={components:{ApexChart:Kl.a},props:{chartData:Object,options:Object},computed:{hasLegends:function(){return Ql(this.chartOptions)},chartOptions:function(){return Rl()({},Yl(),{colors:this.chartData.colors,labels:this.chartData.labels,legend:{position:"bottom"},stroke:{width:4},dataLabels:{enabled:!1}},this.options)}}},Zl=Object(k.a)(Jl,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-2",class:{"mb-2":this.hasLegends}},[e("ApexChart",{staticClass:"apexchart",attrs:{type:"area",series:this.chartData.series,options:this.chartOptions,height:this.options.chart.height}})],1)}),[],!1,null,null,null);Zl.options.__file="Line.vue";var tc=Zl.exports;var ec={components:{ApexChart:Kl.a},props:{chartData:Object,options:Object},computed:{hasLegends:function(){return Ql(this.chartOptions)},chartOptions:function(){return Rl()({},Yl(),{legend:{position:"bottom"},labels:this.chartData.labels,colors:this.chartData.colors,grid:{padding:{right:12}}},this.options)}}},nc=Object(k.a)(ec,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{"mb-2":this.hasLegends}},[e("ApexChart",{staticClass:"apexchart",attrs:{type:"bar",series:this.chartData.series,options:this.chartOptions,height:this.options.chart.height}})],1)}),[],!1,null,null,null);nc.options.__file="Bar.vue";var rc=nc.exports;var ic={components:{ApexChart:Kl.a},props:{chartData:Object,options:Object},computed:{chartOptions:function(){return Rl()({},Yl(),{colors:this.chartData.colors,labels:this.chartData.labels,legend:{position:"right"}},this.options)}}},ac=Object(k.a)(ic,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ApexChart",{attrs:{type:"pie",series:this.chartData.series,options:this.chartOptions,height:this.options.chart.height}})],1)}),[],!1,null,null,null);ac.options.__file="Pie.vue";var oc=ac.exports;function sc(t,e){return"line"===t?(a=null!==(r=null==(n=e)?void 0:n.datasets)&&void 0!==r?r:[],o=null!==(i=null==n?void 0:n.labels)&&void 0!==i?i:[],{series:a.map((function(t){return{data:t.data,name:t.label}})),colors:Xl(a.map((function(t){return t.color}))),labels:o}):"bar"===t?function(t){var e,n,r=null!==(e=null==t?void 0:t.datasets)&&void 0!==e?e:[],i=null!==(n=null==t?void 0:t.labels)&&void 0!==n?n:[];return{series:r.map((function(t){return{data:t.data,name:t.label}})),colors:Xl(r.map((function(t){return t.color}))),labels:i}}(e):"pie"===t?function(t){var e,n=(null!==(e=null==t?void 0:t.datasets)&&void 0!==e?e:[]).filter((function(t){var e;return(null===(e=t.data)||void 0===e?void 0:e.length)>0}));return{series:n.map((function(t){return t.data[0]})),colors:Xl(n.map((function(t){return t.color}))),labels:n.map((function(t){var e;return null!==(e=t.label)&&void 0!==e?e:""}))}}(e):void 0;var n,r,i,a,o}function lc(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var cc={name:"SharpWidgetChart",props:{display:String,title:String,value:Object,ratioX:Number,ratioY:Number,height:Number,minimal:Boolean,showLegend:{type:Boolean,default:!0},dateLabels:Boolean,options:Object},data:function(){return{resizing:!0,zoomed:!1}},computed:{chartComp:function(){return"line"===(t=this.display)?tc:"bar"===t?rc:"pie"===t?oc:void 0;var t},chartData:function(){return sc(this.display,this.value)},chartOptions:function(){var t,e,n,r,i,a=this;return{chart:{toolbar:{show:this.zoomed},height:null!==(t=this.height)&&void 0!==t?t:"100%",sparkline:{enabled:this.minimal},parentHeightOffset:0,redrawOnParentResize:!1,events:{updated:function(){a.resizing=!1},zoomed:function(){a.zoomed=!0}},redrawOnWindowResize:function(){return a.resizing=!0,!0}},xaxis:{type:!(null===(e=this.options)||void 0===e?void 0:e.horizontal)&&this.dateLabels?"datetime":"category"},plotOptions:{bar:{horizontal:!!(null===(n=this.options)||void 0===n?void 0:n.horizontal)}},legend:{show:this.showLegend&&!this.minimal},stroke:{curve:null===(r=null===(i=this.options)||void 0===i?void 0:i.curved)||void 0===r||r?"smooth":"straight"}}},hasRatio:function(){return!this.height},classes:function(){return["SharpWidgetChart--".concat(this.display),{"SharpWidgetChart--aspect-ratio":this.hasRatio,"SharpWidgetChart--resizing":this.resizing}]},sizerStyle:function(){return{"padding-bottom":"".concat(this.ratioY/this.ratioX*100,"%")}}},mounted:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.resizing=!1;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){lc(a,r,i,o,s,"next",t)}function s(t){lc(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},uc=Object(k.a)(cc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.title?[n("h2",{staticClass:"SharpWidget__title mb-2 mt-3"},[t._v(t._s(t.title))])]:t._e(),t._v(" "),n("div",{ref:"chart",staticClass:"SharpWidgetChart",class:t.classes},[t.hasRatio?[n("div",{staticClass:"SharpWidgetChart__sizer",style:t.sizerStyle})]:t._e(),t._v(" "),n(t.chartComp,{tag:"component",staticClass:"SharpWidgetChart__inner",attrs:{"chart-data":t.chartData,options:t.chartOptions}})],2)],2)}),[],!1,null,null,null);uc.options.__file="Chart.vue";var dc=uc.exports;function hc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){fc(t,e,n[e])}))}return t}function fc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pc={name:"SharpWidget",props:{widgetType:String,widgetProps:Object,value:Object},computed:{classes:function(){return{"SharpWidget--chart":"graph"===this.widgetType,"SharpWidget--link":this.widgetProps.link}},tag:function(){return this.widgetProps.link?"a":"div"},widgetComp:function(){return t=this.widgetType,this.widgetProps.display,"graph"===t?dc:"panel"===t?Fl:"list"===t?Vl:void 0;var t},exposedProps:function(){return hc(hc({},this.widgetProps),{},{value:this.value})},hasLink:function(){return!!this.widgetProps.link}}},mc=Object(k.a)(pc,(function(){var t=this.$createElement,e=this._self._c||t;return e(this.tag,{tag:"component",staticClass:"SharpWidget card",class:this.classes,attrs:{href:this.widgetProps.link}},[e("div",{staticClass:"card-body"},[e(this.widgetComp,this._b({tag:"component"},"component",this.exposedProps,!1))],1)])}),[],!1,null,null,null);mc.options.__file="Widget.vue";var vc=mc.exports;function yc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){bc(t,e,n[e])}))}return t}function bc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gc={name:"SharpActionBarDashboard",mixins:[Ge],components:{ActionBar:L,FilterDropdown:Ol,CommandsDropdown:Us},props:{commands:Array},computed:yc({},Object(a.b)("dashboard",{filters:"filters/filters",filterValue:"filters/value",filterNextQuery:"filters/nextQuery"})),methods:{filterKey:function(t){return"actionbardashboard_".concat(t.key)},handleFilterChanged:function(t,e){this.$router.push({query:yc(yc({},this.$route.query),this.filterNextQuery({filter:t,value:e}))})},handleCommandSelected:function(t){this.$emit("command",t)}}},_c=Object(k.a)(gc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActionBar",{scopedSlots:t._u([t.filters.length>0?{key:"extras",fn:function(){return[n("div",{staticClass:"row mx-n2"},[t._l(t.filters,(function(e){return[n("div",{staticClass:"col-auto px-2"},[n("FilterDropdown",{key:e.id,attrs:{filter:e,value:t.filterValue(e.key)},on:{input:function(n){return t.handleFilterChanged(e,n)}}})],1)]}))],2)]},proxy:!0}:null,t.commands.length?{key:"extras-right",fn:function(){return[n("CommandsDropdown",{attrs:{commands:t.commands},on:{select:t.handleCommandSelected},scopedSlots:t._u([{key:"text",fn:function(){return[t._v("\n                "+t._s(t.l("dashboard.commands.dashboard.label"))+"\n            ")]},proxy:!0}],null,!1,3867860828)})]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null);function wc(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Sc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Cc(t,e,n[e])}))}return t}function Cc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}_c.options.__file="ActionBar.vue";var xc={name:"SharpDashboardPage",mixins:[rn],components:{Grid:Ot,Widget:vc,ActionBarDashboard:_c.exports,CommandFormModal:Ns,CommandViewPanel:Ws},data:function(){return{ready:!1}},watch:{$route:"init"},computed:Sc(Sc(Sc({},Object(a.c)("dashboard",{data:function(t){return t.data},widgets:function(t){return t.widgets},layout:function(t){return t.layout}})),Object(a.b)("dashboard",{filtersValues:"filters/values",getFiltersQueryParams:"filters/getQueryParams",getFiltersValuesFromQuery:"filters/getValuesFromQuery",commandsForType:"commands/forType"})),{},{commands:function(){return this.commandsForType("dashboard")||[]},commandsQuery:function(){return Sc(Sc({},this.getFiltersQueryParams(this.filtersValues)),this.$route.query)}}),methods:{handleCommandRequested:function(t){var e=this,n=this.commandsQuery;this.sendCommand(t,{postCommand:function(){return e.$store.dispatch("dashboard/postCommand",{command:t,query:n})},postForm:function(r){return e.$store.dispatch("dashboard/postCommand",{command:t,query:n,data:r})},getFormData:function(){return e.$store.dispatch("dashboard/getCommandFormData",{command:t,query:n})}})},init:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("dashboard/setDashboardKey",e.$route.params.id);case 2:return t.next=4,ze(e.$store.dispatch("dashboard/get",{filtersValues:e.getFiltersValuesFromQuery(e.$route.query)}));case 4:e.ready=!0;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){wc(a,r,i,o,s,"next",t)}function s(t){wc(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},created:function(){this.init()}},Oc=Object(k.a)(xc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpDashboardPage"},[t.ready?[n("div",{staticClass:"container"},[n("ActionBarDashboard",{attrs:{commands:t.commands},on:{command:t.handleCommandRequested}}),t._v(" "),n("Grid",{attrs:{rows:t.layout.rows,"row-class":"gx-3"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.itemLayout;return[n("Widget",{attrs:{"widget-type":t.widgets[r.key].type,"widget-props":t.widgets[r.key],value:t.data[r.key]}})]}}],null,!1,1993281933)})],1)]:t._e(),t._v(" "),n("CommandFormModal",{ref:"commandForm",attrs:{command:t.currentCommand}}),t._v(" "),n("CommandViewPanel",{attrs:{content:t.commandViewContent},on:{close:t.handleCommandViewPanelClosed}})],2)}),[],!1,null,null,null);Oc.options.__file="DashboardPage.vue";var kc,jc=[{name:"dashboard",path:"/s-dashboard/:id",component:Oc.exports}];function Lc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ec={namespaced:!0,modules:{filters:cl},state:function(){return{entityKey:null,query:{}}},mutations:(kc={},Lc(kc,"SET_ENTITY_KEY",(function(t,e){t.entityKey=e})),Lc(kc,"SET_QUERY",(function(t,e){t.query=e})),kc),getters:{query:function(t){return t.query}},actions:{update:function(t,e){var n=t.dispatch,r=(e.data,e.layout,e.config),i=e.filtersValues;return Promise.all([n("filters/update",{filters:r.filters,values:i})])},reorder:function(t,e){var n=t.state,r=e.instances;return function(t){var e=t.entityKey,n=t.instances;return pe.post("list/".concat(e,"/reorder"),{instances:n})}({entityKey:n.entityKey,instances:r})},setEntityKey:function(t,e){(0,t.commit)("SET_ENTITY_KEY",e)},setQuery:function(t,e){(0,t.commit)("SET_QUERY",e)}}},Pc=n("Y+p1"),$c=n.n(Pc),Bc={components:{DropdownItem:pt,DropdownSeparator:yt,CommandsDropdown:Us,StateIcon:kn,ModalSelect:un,Button:I},props:{config:Object,hasState:Boolean,state:[String,Number],stateDisabled:Boolean,stateOptions:Object,hasCommands:Boolean,commands:Array},data:function(){return{stateModalVisible:!1}},methods:{l:te,handleStateChanged:function(t){this.$emit("state-change",t)},handleCommandRequested:function(t){this.$emit("command",t)},handleSelecting:function(t){this.$emit("selecting",t)},handleStateDropdownClicked:function(){this.$emit("selecting",!0),this.stateModalVisible=!0}}},Ac=Object(k.a)(Bc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row justify-content-end align-items-center flex-nowrap gx-1"},[t.hasState?[n("div",{staticClass:"col-auto"},[n("ModalSelect",{attrs:{visible:t.stateModalVisible,title:t.l("modals.entity_state.edit.title"),"ok-title":t.l("modals.entity_state.edit.ok_button"),value:t.state,options:t.config.state.values,size:"sm"},on:{"update:visible":[function(e){t.stateModalVisible=e},t.handleSelecting],change:t.handleStateChanged},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.on;return[n("Button",t._g({staticClass:"btn--outline-hover",attrs:{variant:"primary",small:"",disabled:t.stateDisabled}},r),[n("StateIcon",{attrs:{color:t.stateOptions.color}})],1)]}},{key:"item-prepend",fn:function(t){var e=t.option;return[n("StateIcon",{attrs:{color:e.color}})]}}],null,!1,1401864768)})],1)]:t._e(),t._v(" "),t.hasCommands||t.hasState?[n("div",{staticClass:"col-auto"},[n("CommandsDropdown",{staticClass:"SharpEntityList__commands-dropdown",attrs:{outline:"",commands:t.commands,"has-state":t.hasState},on:{select:t.handleCommandRequested},scopedSlots:t._u([{key:"text",fn:function(){return[t._v("\n                    "+t._s(t.l("entity_list.commands.instance.label"))+"\n                ")]},proxy:!0},t.hasState?{key:"prepend",fn:function(){return[n("DropdownItem",{attrs:{disabled:t.stateDisabled},on:{click:t.handleStateDropdownClicked}},[n("div",{staticClass:"row align-items-center gx-2 flex-nowrap"},[n("div",{staticClass:"col-auto"},[n("StateIcon",{attrs:{color:t.stateOptions.color}})],1),t._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"row gx-2"},[t.stateDisabled?t._e():[n("div",{staticClass:"col-auto"},[t._v("\n                                            "+t._s(t.l("modals.entity_state.edit.title"))+" :\n                                        ")])],t._v(" "),n("div",{staticClass:"col-auto"},[t._v("\n                                        "+t._s(t.stateOptions.label)+"\n                                    ")])],2)])])]),t._v(" "),n("DropdownSeparator")]},proxy:!0}:null],null,!0)})],1)]:t._e()],2)}),[],!1,null,null,null);function Ic(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Dc(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Tc(t,e,n[e])}))}return t}function Tc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ac.options.__file="EntityActions.vue";var Mc={name:"SharpEntityList",mixins:[Je,Ge,rn],components:{EntityActions:Ac.exports,DataList:at,DataListRow:J,StateIcon:kn,CommandsDropdown:Us,Button:I,Modal:sn,ModalSelect:un,CommandFormModal:Ns,CommandViewPanel:Ws,DropdownItem:pt,DropdownSeparator:yt,Loading:$t,LoadingOverlay:It},props:{entityKey:String,module:String,inline:Boolean,showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},hiddenCommands:Object,visible:{type:Boolean,default:!0},focusedItem:Number},data:function(){return{ready:!1,loading:!1,page:0,search:"",sortedBy:null,sortDir:null,sortDirs:{},reorderActive:!1,reorderedItems:null,containers:null,layout:null,data:null,config:null,authorizations:null,forms:null}},watch:{query:function(t,e){$c()(t,e)||this.init()},visible:function(t){t&&!this.ready&&this.init()}},computed:{filters:function(){return this.storeGetter("filters/filters")},filtersValues:function(){return this.storeGetter("filters/values")},filterNextQuery:function(){return this.storeGetter("filters/nextQuery")},getFiltersValuesFromQuery:function(){return this.storeGetter("filters/getValuesFromQuery")},query:function(){return this.storeGetter("query")},commandsQuery:function(){return Fc(Fc({},this.storeGetter("filters/getQueryParams")(this.filtersValues)),this.query)},hasMultiforms:function(){return!!this.forms},hasShowPage:function(){return!!this.config.hasShowPage},apiParams:function(){return this.query},apiPath:function(){return"list/".concat(this.entityKey)},actionBarProps:function(){return this.ready?{ready:!0,count:this.totalCount,search:this.search,filters:this.filters,filtersValues:this.filtersValues,forms:this.multiforms,primaryCommand:this.allowedEntityCommands.flat().find((function(t){return t.primary})),reorderActive:this.reorderActive,canCreate:this.canCreate,canReorder:this.canReorder,canSearch:this.canSearch}:{ready:!1}},actionBarListeners:function(){return{command:this.handleEntityCommandRequested,"search-change":this.handleSearchChanged,"search-submit":this.handleSearchSubmitted,"filter-change":this.handleFilterChanged,"reorder-click":this.handleReorderButtonClicked,"reorder-submit":this.handleReorderSubmitted,create:this.handleCreateButtonClicked}},allowedEntityCommands:function(){var t=this;return(this.config.commands.entity||[]).map((function(e){return e.filter((function(e){return t.isEntityCommandAllowed(e)}))}))},dropdownEntityCommands:function(){return this.allowedEntityCommands.map((function(t){return t.filter((function(t){return!t.primary}))}))},hasEntityCommands:function(){return this.dropdownEntityCommands.flat().length>0},multiforms:function(){return this.forms?Object.values(this.forms):null},canCreate:function(){return this.showCreateButton&&!!this.authorizations.create},canReorder:function(){return this.showReorderButton&&this.config.reorderable&&this.authorizations.update&&this.data.items.length>1},canSearch:function(){return this.showSearchField&&!!this.config.searchable},items:function(){return this.data.items||[]},columns:function(){var t=this;return this.layout.map((function(e){return Fc(Fc({},e),t.containers[e.key])}))},paginated:function(){return!!this.config.paginated},totalCount:function(){return this.data.totalCount||this.items.length},pageSize:function(){return this.data.pageSize},hasActionsColumn:function(){var t=this;return!this.reorderActive&&this.items.some((function(e){return t.instanceHasState(e)||t.instanceHasCommands(e)}))}},methods:{storeGetter:function(t){return this.$store.getters["".concat(this.module,"/").concat(t)]},storeDispatch:function(t,e){return this.$store.dispatch("".concat(this.module,"/").concat(t),e)},handleSearchChanged:function(t){this.search=t},handleSearchSubmitted:function(){this.storeDispatch("setQuery",Fc(Fc({},this.query),{},{search:this.search,page:1}))},handleFilterChanged:function(t,e){this.storeDispatch("setQuery",Fc(Fc(Fc({},this.query),this.filterNextQuery({filter:t,value:e})),{},{page:1}))},handleReorderButtonClicked:function(){this.reorderActive=!this.reorderActive,this.reorderedItems=this.reorderActive?Dc(this.data.items):null},handleReorderSubmitted:function(){var t=this;return this.storeDispatch("reorder",{instances:this.reorderedItems.map((function(e){return t.instanceId(e)}))}).then((function(){t.$set(t.data,"items",Dc(t.reorderedItems)),t.reorderedItems=null,t.reorderActive=!1}))},handleEntityCommandRequested:function(t){this.handleCommandRequested(t,{endpoint:this.commandEndpoint(t.key)})},handleCreateButtonClicked:function(t){var e=t?this.formUrl({formKey:t.key}):this.formUrl();location.href=e},instanceId:function(t){var e=this.config.instanceIdAttribute;return e?t[e]:t.id},instanceState:function(t){if(!this.instanceHasState(t))return null;var e=this.config.state.attribute;return e?t[e]:t.state},instanceHasState:function(t){return!!this.config.state&&this.showEntityState},instanceHasCommands:function(t){return this.instanceCommands(t).flat().length>0},instanceHasStateAuthorization:function(t){if(!this.instanceHasState(t))return!1;var e=this.config.state.authorization,n=this.instanceId(t);return Array.isArray(e)?e.includes(n):!!e},instanceCommands:function(t){var e=this;return(this.config.commands.instance||[]).reduce((function(n,r){return[].concat(Dc(n),[r.filter((function(n){return e.isInstanceCommandAllowed(t,n)}))])}),[])},instanceStateOptions:function(t){if(!this.config.state)return null;var e=this.instanceState(t);return this.config.state.values.find((function(t){return t.value===e}))},instanceForm:function(t){var e=this.instanceId(t);return this.multiforms.find((function(t){return t.instances.includes(e)}))},instanceUrl:function(t){var e=this.instanceId(t);if(!this.instanceHasViewAuthorization(t))return null;if(this.hasShowPage)return this.showUrl({instanceId:e});if(this.hasMultiforms){var n=this.instanceForm(t)||{};return this.formUrl({formKey:n.key,instanceId:e})}return this.formUrl({instanceId:e})},instanceHasViewAuthorization:function(t){var e=this.instanceId(t),n=this.authorizations.view;return Array.isArray(n)?n.includes(e):!!n},instanceIsFocused:function(t){var e=this.instanceId(t);return this.focusedItem&&this.focusedItem===e},filterByKey:function(t){return(this.config.filters||[]).find((function(e){return e.key===t}))},setState:function(t,e){var n=this,r=this.instanceId(t);return this.axiosInstance.post("".concat(this.apiPath,"/state/").concat(r),{attribute:this.config.state.attribute,value:e}).then((function(t){var e=t.data;n.handleCommandActionRequested(e.action,e)})).catch((function(t){var e=t.response.data;422===t.response.status&&ue(e.message,{title:te("modals.state.422.title"),isError:!0})}))},handleInstanceStateChanged:function(t,e){this.setState(t,e)},handleInstanceCommandRequested:function(t,e){var n=this.instanceId(t);this.handleCommandRequested(e,{endpoint:this.commandEndpoint(e.key,n)})},handleSortChanged:function(t){var e=t.prop,n=t.dir;this.storeDispatch("setQuery",Fc(Fc({},this.query),{},{page:1,sort:e,dir:n}))},handleReorderedItemsChanged:function(t){this.reorderedItems=t},handlePageChanged:function(t){this.storeDispatch("setQuery",Fc(Fc({},this.query),{},{page:t}))},formUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.formKey,n=t.instanceId;return Ue({entityKey:e?"".concat(this.entityKey,":").concat(e):this.entityKey,instanceId:n},{append:!0})},showUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.instanceId;return He({entityKey:this.entityKey,instanceId:e},{append:!0})},tryParseNumber:function(t){if(Array.isArray(t))return t.map(this.tryParseNumber);var e=Number(t);return isNaN(Number(e))?t:e},filterValueOrDefault:function(t,e){return null!=t&&""!==t?this.tryParseNumber(t):e.default||(e.multiple?[]:null)},showLoading:function(){this.inline||this.$store.dispatch("setLoading",!0)},hideLoading:function(){this.inline||this.$store.dispatch("setLoading",!1)},initCommands:function(){this.addCommandActionHandlers({refresh:this.handleRefreshCommand})},handleCommandRequested:function(t,e){var n=this,r=e.endpoint,i=this.commandsQuery;this.sendCommand(t,{postCommand:function(){return n.axiosInstance.post(r,{query:i},{responseType:"blob"})},postForm:function(t){return n.axiosInstance.post(r,{query:i,data:t},{responseType:"blob"})},getFormData:function(){return n.axiosInstance.get("".concat(r,"/data"),{params:i}).then((function(t){return t.data.data}))}})},handleRefreshCommand:function(t){var e=this;this.data.items=this.data.items.map((function(n){return r=t.items,i=n,r.find((function(t){return e.instanceId(i)===e.instanceId(t)}))||n;var r,i}))},commandEndpoint:function(t,e){return"".concat(this.apiPath,"/command/").concat(t).concat(e?"/".concat(e):"")},isEntityCommandAllowed:function(t){var e=this.hiddenCommands?this.hiddenCommands.entity:null;return!!t.authorization&&!(e||[]).includes(t.key)},isInstanceCommandAllowed:function(t,e){var n=this.instanceId(t),r=this.hiddenCommands?this.hiddenCommands.instance:null;return(Array.isArray(e.authorization)?e.authorization.includes(n):!!e.authorization)&&!(r||[]).includes(e.key)},mount:function(t){var e=t.containers,n=t.layout,r=t.data,i=void 0===r?{}:r,a=t.config,o=void 0===a?{}:a,s=t.authorizations,l=t.forms;this.containers=e,this.layout=n,this.data=i,this.config=o,this.authorizations=s,this.forms=l,this.config.commands=o.commands||{},this.config.filters=o.filters||[],this.page=this.data.page,!this.sortDir&&(this.sortDir=this.config.defaultSortDir),!this.sortedBy&&(this.sortedBy=this.config.defaultSort)},bindParams:function(t){var e=t.search,n=t.page,r=t.sort,i=t.dir;this.search=e,n&&(this.page=Number(n)),r&&(this.sortedBy=r),i&&(this.sortDir=i)},init:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.visible){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.next=5,e.storeDispatch("setEntityKey",e.entityKey);case 5:return t.next=7,e.get();case 7:return e.bindParams(e.query),e.$emit("change",{data:e.data,layout:e.layout,config:e.config,containers:e.containers,authorizations:e.authorizations,forms:e.forms}),t.next=11,e.storeDispatch("update",{config:e.config,filtersValues:e.getFiltersValuesFromQuery(e.query)});case 11:e.ready=!0,e.loading=!1;case 13:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Ic(a,r,i,o,s,"next",t)}function s(t){Ic(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},beforeMount:function(){this.init(),this.initCommands()}},Vc=Object(k.a)(Mc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpEntityList"},[t._t("action-bar",null,{props:t.actionBarProps,listeners:t.actionBarListeners}),t._v(" "),t.ready?[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}]},[n("DataList",{attrs:{items:t.items,columns:t.columns,page:t.page,paginated:t.paginated,"total-count":t.totalCount,"page-size":t.pageSize,"reorder-active":t.reorderActive,sort:t.sortedBy,dir:t.sortDir},on:{change:t.handleReorderedItemsChanged,"sort-change":t.handleSortChanged,"page-change":t.handlePageChanged},scopedSlots:t._u([{key:"empty",fn:function(){return[t._v("\n                    "+t._s(t.l("entity_list.empty_text"))+"\n                ")]},proxy:!0},{key:"append-head",fn:function(){return[t.hasEntityCommands?[n("div",{staticClass:"d-flex justify-content-end"},[n("CommandsDropdown",{attrs:{commands:t.dropdownEntityCommands,disabled:t.reorderActive},on:{select:t.handleEntityCommandRequested},scopedSlots:t._u([{key:"text",fn:function(){return[t._v("\n                                    "+t._s(t.l("entity_list.commands.entity.label"))+"\n                                ")]},proxy:!0}],null,!1,2220987489)})],1)]:t._e()]},proxy:!0},{key:"item",fn:function(e){var r=e.item;return[n("DataListRow",{attrs:{url:t.instanceUrl(r),columns:t.columns,highlight:t.instanceIsFocused(r),row:r},scopedSlots:t._u([t.hasActionsColumn?{key:"append",fn:function(e){return[n("EntityActions",{attrs:{config:t.config,"has-state":t.instanceHasState(r),state:t.instanceState(r),"state-options":t.instanceStateOptions(r),"state-disabled":!t.instanceHasStateAuthorization(r),"has-commands":t.instanceHasCommands(r),commands:t.instanceCommands(r)},on:{command:function(e){return t.handleInstanceCommandRequested(r,e)},"state-change":function(e){return t.handleInstanceStateChanged(r,e)},selecting:function(t){return e.toggleHighlight(t)}}})]}}:null],null,!0)})]}},{key:"append-body",fn:function(){return[t.inline&&t.loading?[n("LoadingOverlay",{attrs:{medium:"",absolute:""}})]:t._e()]},proxy:!0}],null,!1,1327466621)})],1)]:t.visible&&t.inline?[n("Loading",{attrs:{medium:""}})]:t._e(),t._v(" "),n("CommandFormModal",{ref:"commandForm",attrs:{command:t.currentCommand}}),t._v(" "),n("CommandViewPanel",{attrs:{content:t.commandViewContent},on:{close:t.handleCommandViewPanelClosed}})],2)}),[],!1,null,null,null);Vc.options.__file="EntityList.vue";var zc=Vc.exports,Rc={name:"SharpActionBarList",mixins:[Ge],components:{ActionBar:L,Dropdown:ut,DropdownItem:pt,ItemVisual:Lt,FilterDropdown:Ol,Search:Cn,Button:I},props:{count:Number,search:String,filters:Array,filtersValues:Object,forms:Array,primaryCommand:Object,canCreate:Boolean,canReorder:Boolean,canSearch:Boolean,reorderActive:Boolean},data:function(){return{searchActive:!1}},computed:{hasForms:function(){return this.forms&&this.forms.length>0},currentEntity:function(){return this.$store.state.currentEntity}},methods:{handleSearchInput:function(t){this.$emit("search-change",t)},handleSearchSubmitted:function(){this.$emit("search-submit")},handleFilterChanged:function(t,e){this.$emit("filter-change",t,e)},handlePrimaryCommandClicked:function(){this.$emit("command",this.primaryCommand)},handleReorderButtonClicked:function(){this.$emit("reorder-click"),document.activeElement.blur()},handleReorderSubmitButtonClicked:function(){this.$emit("reorder-submit")},handleCreateButtonClicked:function(){this.$emit("create")},handleCreateFormSelected:function(t){this.$emit("create",t)}}},Nc=Object(k.a)(Rc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActionBar",{staticClass:"SharpActionBarList",attrs:{"right-class":"d-block"},scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"ui-title-font ui-font-size"},[n("div",{staticClass:"row gx-2"},[t.currentEntity?[n("div",{staticClass:"col-auto"},[n("i",{staticClass:"fa",class:t.currentEntity.icon})])]:t._e(),t._v(" "),n("div",{staticClass:"col"},[t.currentEntity?[t._v("\n                        "+t._s(t.currentEntity.label)+" "),n("span",{staticClass:"mx-1"},[t._v("•")])]:t._e(),t._v(" "),n("span",{staticClass:"text-content text-nowrap"},[t._v(t._s(t.count)+" "+t._s(t.l("action_bar.list.items_count")))])],2)],2)])]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"row justify-content-end flex-nowrap"},[t.canReorder?[t.reorderActive?[n("div",{staticClass:"col-auto"},[n("Button",{attrs:{variant:"light",large:"",outline:""},on:{click:t.handleReorderButtonClicked}},[t._v("\n                            "+t._s(t.l("action_bar.list.reorder_button.cancel"))+"\n                        ")])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("Button",{attrs:{variant:"light",large:""},on:{click:t.handleReorderSubmitButtonClicked}},[t._v("\n                            "+t._s(t.l("action_bar.list.reorder_button.finish"))+"\n                        ")])],1)]:[n("div",{staticClass:"col-auto"},[n("Button",{attrs:{variant:"light",large:"",outline:""},on:{click:t.handleReorderButtonClicked}},[t._v("\n                            "+t._s(t.l("action_bar.list.reorder_button"))+"\n                        ")])],1)]]:t._e(),t._v(" "),t.primaryCommand&&!t.reorderActive?[n("div",{staticClass:"col-auto"},[n("Button",{attrs:{variant:"light",large:""},on:{click:t.handlePrimaryCommandClicked}},[t._v("\n                        "+t._s(t.primaryCommand.label)+"\n                    ")])],1)]:t._e(),t._v(" "),t.canCreate&&!t.reorderActive?[n("div",{staticClass:"col-auto"},[t.hasForms?[n("Dropdown",{attrs:{variant:"light",large:"",right:"",text:t.l("action_bar.list.forms_dropdown")}},[t._l(t.forms,(function(e,r){return[n("DropdownItem",{key:r,on:{click:function(n){return t.handleCreateFormSelected(e)}}},[n("div",{staticClass:"row gx-2"},[n("div",{staticClass:"col-auto"},[n("ItemVisual",{attrs:{item:e,"icon-class":"fa-fw"}})],1),t._v(" "),n("div",{staticClass:"col"},[t._v("\n                                            "+t._s(e.label)+"\n                                        ")])])])]}))],2)]:[n("Button",{attrs:{variant:"light",large:""},on:{click:t.handleCreateButtonClicked}},[t._v("\n                            "+t._s(t.l("action_bar.list.create_button"))+"\n                        ")])]],2)]:t._e()],2)]},proxy:!0},{key:"extras",fn:function(){return[n("div",{staticClass:"row mx-n2"},[t._l(t.filters,(function(e){return[n("div",{staticClass:"col-auto px-2"},[n("FilterDropdown",{key:e.id,attrs:{filter:e,value:t.filtersValues[e.key],disabled:t.reorderActive},on:{input:function(n){return t.handleFilterChanged(e,n)}}})],1)]}))],2)]},proxy:!0},t.canSearch?{key:"extras-right",fn:function(){return[n("div",{staticStyle:{"max-width":"300px"}},[n("Search",{staticClass:"h-100",attrs:{value:t.search,active:t.searchActive,placeholder:t.l("action_bar.list.search.placeholder"),disabled:t.reorderActive},on:{"update:active":function(e){t.searchActive=e},input:t.handleSearchInput,submit:t.handleSearchSubmitted}})],1)]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null);function Kc(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function qc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Uc(t,e,n[e])}))}return t}function Uc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Nc.options.__file="ActionBar.vue";var Hc={name:"SharpEntityListPage",components:{EntityList:zc,ActionBarList:Nc.exports},data:function(){return{ready:!1}},watch:{query:"handleQueryChanged","$route.query":"init"},computed:qc(qc({},Object(a.b)("entity-list",["query"])),{},{entityKey:function(){return this.$route.params.entityKey}}),methods:{handleQueryChanged:function(t,e){$c()(t,e)||this.$router.push({query:qc({},t)})},init:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("entity-list/setQuery",qc({},e.$route.query));case 2:e.ready=!0;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Kc(a,r,i,o,s,"next",t)}function s(t){Kc(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},created:function(){this.init()}},Gc=Object(k.a)(Hc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpEntityListPage"},[n("div",{staticClass:"container"},[t.ready?[n("EntityList",{attrs:{"entity-key":t.entityKey,module:"entity-list"},scopedSlots:t._u([{key:"action-bar",fn:function(e){var r=e.props,i=e.listeners;return[n("ActionBarList",t._g(t._b({},"ActionBarList",r,!1),i))]}}],null,!1,4144326494)})]:t._e()],2)])}),[],!1,null,null,null);Gc.options.__file="EntityListPage.vue";var Wc,Yc=[{name:"entity-list",path:"/s-list/:entityKey",component:Gc.exports}];function Qc(t){var e=t.entityKey,n=t.instanceId;return pe.get("show/".concat(e,"/").concat(n||"")).then((function(t){return t.data}))}function Xc(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Jc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zc={namespaced:!0,modules:{filters:cl,"entity-lists":{namespaced:!0}},state:{entityKey:null,instanceId:null,show:null},mutations:(Wc={},Jc(Wc,"SET_SHOW_VIEW",(function(t,e){t.show=e})),Jc(Wc,"SET_ENTITY_KEY",(function(t,e){t.entityKey=e})),Jc(Wc,"SET_INSTANCE_ID",(function(t,e){t.instanceId=e})),Wc),getters:{entityKey:function(t){return t.entityKey},instanceId:function(t){return t.instanceId},config:function(t){return t.show.config},fields:function(t){return t.show.fields},layout:function(t){return t.show.layout},data:function(t){return t.show.data},breadcrumb:function(t){return t.show.breadcrumb},authorizations:function(t){return t.show.authorizations},canEdit:function(t,e){return e.authorizations.update},canChangeState:function(t,e){return!!e.config.state&&e.config.state.authorization},authorizedCommands:function(t,e){return((e.config.commands||{}).instance||[]).map((function(t){return t.filter((function(t){return t.authorization}))}))},instanceState:function(t,e){var n=e.config.state;if(n){var r=e.data[n.attribute];return n.values.find((function(t){return t.value===r}))}return null},stateValues:function(t,e){return e.config.state?e.config.state.values:null}},actions:{get:function(t){return(e=U.a.mark((function e(){var n,r,i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,e.next=3,Qc({entityKey:n.entityKey,instanceId:n.instanceId});case 3:return i=e.sent,r("SET_SHOW_VIEW",i),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(t){Xc(a,r,i,o,s,"next",t)}function s(t){Xc(a,r,i,o,s,"throw",t)}o(void 0)}))})();var e},postCommand:function(t,e){var n=t.state,r=e.command,i=e.data;return function(t){var e=t.entityKey,n=t.instanceId,r=t.commandKey,i=t.data;return pe.post("show/".concat(e,"/command/").concat(r,"/").concat(n||""),{data:i},{responseType:"blob"})}({entityKey:n.entityKey,instanceId:n.instanceId,commandKey:r.key,data:i})},getCommandFormData:function(t,e){var n,r,i,a,o=t.state,s=e.command;return n={entityKey:o.entityKey,instanceId:o.instanceId,commandKey:s.key},r=n.entityKey,i=n.instanceId,a=n.commandKey,pe.get("show/".concat(r,"/command/").concat(a).concat(i?"/".concat(i):"","/data")).then((function(t){return t.data.data}))},postState:function(t,e){var n=t.state,r=t.getters;return function(t){var e=t.entityKey,n=t.instanceId,r=t.value;return pe.post("show/".concat(e,"/state/").concat(n||""),{value:r}).then((function(t){return t.data}))}({entityKey:n.entityKey,instanceId:n.instanceId,attribute:r.config.state.attribute,value:e})},setEntityKey:function(t,e){(0,t.commit)("SET_ENTITY_KEY",e)},setInstanceId:function(t,e){(0,t.commit)("SET_INSTANCE_ID",e)}}},tu={mixins:[Ge],components:{ActionBar:L,Breadcrumb:$,CommandsDropdown:Us,Dropdown:ut,DropdownItem:pt,StateIcon:kn,Button:I,ModalSelect:un},props:{commands:Array,formUrl:String,backUrl:String,canEdit:Boolean,canChangeState:Boolean,showBackButton:Boolean,state:Object,stateValues:Array,breadcrumb:Array,showBreadcrumb:Boolean},computed:{hasCommands:function(){return this.commands&&this.commands.some((function(t){return t&&t.length>0}))},hasState:function(){return!!this.state}},methods:{handleEditButtonClicked:function(){this.$emit("edit")},handleCommandSelected:function(t){this.$emit("command",t)},handleStateChanged:function(t){this.$emit("state-change",t)}}},eu=Object(k.a)(tu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ActionBar",{scopedSlots:t._u([{key:"left",fn:function(){return[t.showBackButton?[n("Button",{attrs:{href:t.backUrl,outline:"",variant:"light",large:""}},[t._v("\n                "+t._s(t.l("action_bar.show.back_button"))+"\n            ")])]:t._e()]},proxy:!0},{key:"right",fn:function(){return[t.canEdit?[n("Button",{attrs:{href:t.formUrl,variant:"light",large:""}},[t._v("\n                "+t._s(t.l("action_bar.show.edit_button"))+"\n            ")])]:t._e()]},proxy:!0},{key:"extras",fn:function(){return[t.showBreadcrumb?[n("Breadcrumb",{attrs:{items:t.breadcrumb}})]:t._e()]},proxy:!0},{key:"extras-right",fn:function(){return[n("div",{staticClass:"row gx-3"},[t.hasState?[n("div",{staticClass:"col-auto"},[n("ModalSelect",{attrs:{title:t.l("modals.entity_state.edit.title"),"ok-title":t.l("modals.entity_state.edit.ok_button"),value:t.state.value,options:t.stateValues,size:"sm"},on:{change:t.handleStateChanged},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.on;return[n("Button",t._g({staticClass:"dropdown-toggle",attrs:{text:"",small:"",disabled:!t.canChangeState}},r),[n("StateIcon",{staticClass:"me-1",staticStyle:{"vertical-align":"-.125em"},attrs:{color:t.state.color}}),t._v(" "),n("span",{staticClass:"text-truncate"},[t._v(t._s(t.state.label))])],1)]}},{key:"item-prepend",fn:function(t){var e=t.option;return[n("StateIcon",{attrs:{color:e.color}})]}}],null,!1,2503993141)})],1)]:t._e(),t._v(" "),t.hasCommands?[n("div",{staticClass:"col-auto"},[n("CommandsDropdown",{attrs:{commands:t.commands},on:{select:t.handleCommandSelected},scopedSlots:t._u([{key:"text",fn:function(){return[t._v("\n                            "+t._s(t.l("entity_list.commands.instance.label"))+"\n                        ")]},proxy:!0}],null,!1,2971469203)})],1)]:t._e()],2)]},proxy:!0}])})}),[],!1,null,null,null);eu.options.__file="ActionBar.vue";var nu=eu.exports,ru={mixins:[Ge],components:{ItemVisual:Lt,Search:Cn,Dropdown:ut,DropdownItem:pt,FilterDropdown:Ol,Button:I},props:{ready:Boolean,count:Number,search:String,hasSearchQuery:Boolean,filters:Array,filtersValues:Object,commands:Array,forms:Array,canCreate:Boolean,canReorder:Boolean,canSearch:Boolean,reorderActive:Boolean,collapsed:Boolean,hasActiveQuery:Boolean},data:function(){return{searchActive:!1}},computed:{hasForms:function(){return this.forms&&this.forms.length>0},hasLeftControls:function(){var t;return this.hasActiveQuery||this.count>0&&((null===(t=this.filters)||void 0===t?void 0:t.length)>0||this.canSearch)},hasRightControls:function(){return this.canReorder||this.canCreate&&!this.reorderActive},hasOuterTitle:function(){return this.$slots.default&&(!this.ready||this.hasLeftControls)},barVisible:function(){return!this.collapsed||!this.hasLeftControls}},methods:{handleSearchInput:function(t){this.$emit("search-change",t)},handleSearchSubmitted:function(){this.$emit("search-submit")},handleFilterChanged:function(t,e){this.$emit("filter-change",t,e)},handleReorderButtonClicked:function(){this.$emit("reorder-click"),document.activeElement.blur()},handleReorderSubmitButtonClicked:function(){this.$emit("reorder-submit")},handleCommandSelected:function(t){this.$emit("command",t)},handleCreateButtonClicked:function(){this.$emit("create")},handleCreateFormSelected:function(t){this.$emit("create",t)}}},iu=Object(k.a)(ru,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action-bar"},[t.hasOuterTitle?[n("div",{staticClass:"mb-2"},[t._t("default")],2)]:t._e(),t._v(" "),t.ready&&t.barVisible?[n("div",{staticClass:"row"},[t.hasLeftControls?[n("div",{staticClass:"col-sm mb-2"},[n("div",{staticClass:"row gy-1 gx-2 gx-md-3"},[t._l(t.filters,(function(e){return[n("div",{staticClass:"col-auto mb-1"},[n("div",{staticClass:"action-bar__element"},[n("FilterDropdown",{key:e.id,staticClass:"h-100",attrs:{filter:e,value:t.filtersValues[e.key],disabled:t.reorderActive},on:{input:function(n){return t.handleFilterChanged(e,n)}}})],1)])]})),t._v(" "),t.canSearch?[n("div",{staticClass:"col-auto mb-1"},[n("div",{staticClass:"action-bar__element"},[n("Search",{staticClass:"h-100",attrs:{value:t.search,active:t.searchActive,placeholder:t.l("action_bar.list.search.placeholder"),disabled:t.reorderActive},on:{"update:active":function(e){t.searchActive=e},input:t.handleSearchInput,submit:t.handleSearchSubmitted}})],1)])]:t._e()],2)])]:[n("div",{staticClass:"col-sm align-self-end"},[t._t("default")],2)],t._v(" "),t.hasRightControls&&!t.collapsed?[n("div",{staticClass:"col-sm-auto mb-2"},[n("div",{staticClass:"row flex-nowrap justify-content-end g-2 gx-md-3"},[t.canReorder?[n("div",{staticClass:"col-auto"},[t.reorderActive?[n("div",{staticClass:"row gx-3"},[n("div",{staticClass:"col-auto"},[n("Button",{attrs:{text:""},on:{click:t.handleReorderButtonClicked}},[t._v("\n                                                "+t._s(t.l("action_bar.list.reorder_button.cancel"))+"\n                                            ")])],1),t._v(" "),n("div",{staticClass:"col-auto"},[n("Button",{on:{click:t.handleReorderSubmitButtonClicked}},[t._v("\n                                                "+t._s(t.l("action_bar.list.reorder_button.finish"))+"\n                                            ")])],1)])]:[n("Button",{attrs:{text:""},on:{click:t.handleReorderButtonClicked}},[t._v("\n                                        "+t._s(t.l("action_bar.list.reorder_button"))+"\n                                    ")])]],2)]:t._e(),t._v(" "),t.canCreate&&!t.reorderActive?[n("div",{staticClass:"col-auto"},[n("div",{staticClass:"action-bar__element"},[t.hasForms?[n("Dropdown",{attrs:{variant:"primary",right:"",text:t.l("action_bar.list.forms_dropdown")}},[t._l(t.forms,(function(e,r){return[n("DropdownItem",{key:r,on:{click:function(n){return t.handleCreateFormSelected(e)}}},[n("ItemVisual",{attrs:{item:e,"icon-class":"fa-fw"}}),t._v(t._s(e.label)+"\n                                                ")],1)]}))],2)]:[n("Button",{attrs:{variant:"primary"},on:{click:t.handleCreateButtonClicked}},[t._v("\n                                            "+t._s(t.l("action_bar.list.create_button"))+"\n                                        ")])]],2)])]:t._e()],2)])]:t._e()],2)]:t._e()],2)}),[],!1,null,null,null);iu.options.__file="ActionBar.vue";var au=iu.exports,ou={props:{label:String}},su=Object(k.a)(ou,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.label?[e("div",{staticClass:"show-field__label form-label"},[this._v(this._s(this.label))])]:this._e(),this._v(" "),e("div",{staticClass:"show-field__content"},[this._t("default")],2)],2)}),[],!1,null,null,null);su.options.__file="FieldLayout.vue";var lu=su.exports;function cu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.lazy;t.$watch(e,(function(e){t.$emit("visible-change",e)}),{immediate:!r})}var uu={mixins:[Ge],components:{EntityList:zc,CommandsDropdown:Us,ActionBar:au,FieldLayout:lu},props:{fieldKey:String,entityListKey:String,showCreateButton:Boolean,showReorderButton:Boolean,showSearchField:Boolean,showEntityState:Boolean,hiddenFilters:Object,hiddenCommands:Object,label:String,emptyVisible:Boolean,collapsable:Boolean},data:function(){return{list:null,collapsed:this.collapsable&&!this.getFocusedItem(),focusedItem:this.getFocusedItem()}},computed:{classes:function(){return{"ShowEntityListField--collapsed":this.collapsed}},storeModule:function(){return"show/entity-lists/".concat(this.fieldKey)},query:function(){return this.storeGetter("query")},filters:function(){return this.storeGetter("filters/filters")},getFiltersQueryParams:function(){return this.storeGetter("filters/getQueryParams")},filtersValues:function(){return this.storeGetter("filters/values")},isVisible:function(){if(this.hasCollapse||this.emptyVisible)return!0;if(this.list){var t=this.list,e=t.data,n=t.authorizations;return!!(e.items&&e.items.length>0||this.showCreateButton&&n.create||this.hasActiveQuery)}},visibleFilters:function(){var t=this;return this.hiddenFilters?this.filters.filter((function(e){return!(e.key in t.hiddenFilters)})):this.filters},hasActiveQuery:function(){var t=this,e=this.visibleFilters.some((function(e){return null!=t.filtersValues[e.key]}));return!!this.query.search||e},hasCollapse:function(){return this.collapsable}},methods:{hasCommands:function(t){return t&&t.some((function(t){return t&&t.length>0}))},storeGetter:function(t){return this.$store.getters["".concat(this.storeModule,"/").concat(t)]},handleChanged:function(t){this.list=t},handleDetailsToggle:function(t){this.collapsed=!t.target.open},getFocusedItem:function(){var t,e,n=function(){if(document.referrer){var t=new URL(document.referrer);if(t.origin===location.origin)return Ke().resolve(t.pathname+t.search).route}}();if((null==n?void 0:n.name)&&(t=n.params.entityKey,e=this.entityListKey,t&&e&&t.replace(/:(.*)/,"")===e.replace(/:(.*)/,""))&&n.params.instanceId&&n.path.length>this.$route.path.length)return Number(n.params.instanceId)}},created:function(){var t=this,e=this.storeModule.split("/");this.$store.hasModule(e)||this.$store.registerModule(e,Ec),this.hiddenFilters&&this.$store.dispatch("".concat(this.storeModule,"/setQuery"),this.getFiltersQueryParams(this.hiddenFilters)),cu(this,(function(){return t.isVisible}),{lazy:!0})},mounted:function(){if(this.focusedItem){var t=this.$el.getBoundingClientRect();window.scrollBy(0,t.top-100)}}},du=Object(k.a)(uu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FieldLayout",{staticClass:"ShowEntityListField",class:t.classes},[n("EntityList",{attrs:{"entity-key":t.entityListKey,module:t.storeModule,"show-create-button":t.showCreateButton,"show-reorder-button":t.showReorderButton,"show-search-field":t.showSearchField,"show-entity-state":t.showEntityState,"hidden-commands":t.hiddenCommands,visible:!t.collapsed,"focused-item":t.focusedItem,inline:""},on:{change:t.handleChanged},scopedSlots:t._u([{key:"action-bar",fn:function(e){var r=e.props,i=e.listeners;return[n("ActionBar",t._g(t._b({staticClass:"ShowEntityListField__action-bar",attrs:{collapsed:t.collapsed,filters:t.visibleFilters,"has-active-query":t.hasActiveQuery}},"ActionBar",r,!1),i),[t.hasCollapse?[n("details",{attrs:{open:!t.collapsed},on:{toggle:t.handleDetailsToggle}},[n("summary",{staticClass:"py-1"},[n("h2",{staticClass:"ShowEntityListField__label ShowSection__title mb-0 d-inline-block"},[t._v("\n                                "+t._s(t.label||" ")+"\n                            ")])])])]:[n("h2",{staticClass:"ShowEntityListField__label ShowSection__title"},[t._v("\n                        "+t._s(t.label)+"\n                    ")])]],2)]}}])})],1)}),[],!1,null,null,null);du.options.__file="EntityList.vue";var hu=du.exports,fu=n("v23C"),pu=n.n(fu);function mu(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vu(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent}var yu={mixins:[Ge],components:{FieldLayout:lu},props:{value:String,collapseToWordCount:Number,label:String,emptyVisible:Boolean,html:Boolean},data:function(){return{expanded:!1}},computed:{classes:function(){return{"ShowTextField--html":this.html}},currentContent:function(){return this.value?this.hasCollapsed&&!this.expanded?this.collapsedContent:this.html?this.value:vu(this.value).trim():null},hasCollapsed:function(){return!!this.collapsedContent},collapsedContent:function(){if(!this.collapseToWordCount||!this.value)return null;var t=this.value.trim(),e=vu(t),n=this.html?t:e,r=function(t,e){var n=mu(t.matchAll(/\S+\s*/g));return n.length>e?n.slice(0,e).map((function(t){return t[0]})).join(""):t}(e,this.collapseToWordCount);return r.length<e.length?pu()(n,r.length+2,{html:this.html}):null},isVisible:function(){return!!this.value||this.emptyVisible}},methods:{handleToggleClicked:function(){this.expanded=!this.expanded}},created:function(){var t=this;cu(this,(function(){return t.isVisible}))}},bu=Object(k.a)(yu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FieldLayout",{staticClass:"ShowTextField",class:t.classes,attrs:{label:t.label}},[t.html?[n("div",{staticClass:"ShowTextField__content",domProps:{innerHTML:t._s(t.currentContent)}})]:[n("div",{staticClass:"ShowTextField__content"},[t._v(t._s(t.currentContent))])],t._v(" "),t.hasCollapsed?[n("div",{staticClass:"mt-2"},[n("a",{staticClass:"ShowTextField__more",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.handleToggleClicked(e)}}},[t.expanded?[t._v("\n                    - "+t._s(t.l("show.text.show_less"))+"\n                ")]:[t._v("\n                    + "+t._s(t.l("show.text.show_more"))+"\n                ")]],2)])]:t._e()],2)}),[],!1,null,null,null);bu.options.__file="Text.vue";var gu=bu.exports,_u={components:{FieldLayout:lu},props:{value:String,label:String},computed:{isVisible:function(){return!!this.value}},created:function(){var t=this;cu(this,(function(){return t.isVisible}))}},wu=Object(k.a)(_u,(function(){var t=this.$createElement,e=this._self._c||t;return e("FieldLayout",{staticClass:"ShowPictureField"},[e("div",{staticClass:"text-center"},[e("img",{staticClass:"ShowPictureField__thumbnail",attrs:{src:this.value,alt:""}})])])}),[],!1,null,null,null);wu.options.__file="Picture.vue";var Su=wu.exports,Cu=n("67qy");function xu(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ou(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ku(t,e,n[e])}))}return t}function ku(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ju={components:{Button:I,FieldLayout:lu},props:{fieldConfigIdentifier:String,value:Object,label:String,collapsed:{type:Boolean,default:!0},list:Boolean},data:function(){return{thumbnailWidth:0}},computed:Ou(Ou({},Object(a.b)("show",["entityKey","instanceId"])),{},{classes:function(){return{"ShowFileField--has-label":!!this.label}},thumbnailColClasses:function(){return{"ShowFileField__thumbnail-col--collapsed":!this.hasThumbnail&&this.collapsed}},downloadUrl:function(){return t={entityKey:this.entityKey,instanceId:this.instanceId,fieldKey:this.fieldConfigIdentifier,fileName:this.fileName},e=t.entityKey,n=t.instanceId,r=t.fieldKey,i=t.fileName,ve("show/download/".concat(r,"/").concat(e,"/").concat(n),{params:{fileName:i}});var t,e,n,r,i},name:function(){return this.value?this.value.name:null},fileName:function(){var t=(this.name||"").split("/");return t[t.length-1]},hasThumbnail:function(){var t;return!!(null===(t=this.value)||void 0===t?void 0:t.thumbnail)},thumbnailUrl:function(){return this.value?this.value.thumbnail:null},thumbnailStyle:function(){return{"max-height":this.thumbnailWidth?"".concat(this.thumbnailWidth,"px"):null}},size:function(){return this.value?this.value.size:null},sizeLabel:function(){return this.size?Ae(this.size):null},iconClass:function(){var t=this.fileName.split(".").pop(),e=Object(Cu.getClassNameForExtension)(t);return"fa-file-csv"===e?"fas ".concat(e):"far ".concat(e)},isVisible:function(){return!!this.value}}),methods:{lang:te,layout:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.thumbnail&&(e.thumbnailWidth=e.$refs.thumbnail.parentElement.offsetWidth);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){xu(a,r,i,o,s,"next",t)}function s(t){xu(a,r,i,o,s,"throw",t)}o(void 0)}))})()},handleThumbnailLoaded:function(){this.layout()}},created:function(){var t=this;cu(this,(function(){return t.isVisible}))},mounted:function(){this.layout(),this.handleResize=Qe()(this.layout,150),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)}},Lu=Object(k.a)(ju,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FieldLayout",{staticClass:"ShowFileField",class:t.classes,attrs:{label:t.label}},[n("div",{staticClass:"row mx-n2"},[n("div",{staticClass:"col-3 px-2 align-self-center ShowFileField__thumbnail-col",class:t.thumbnailColClasses},[t.hasThumbnail?[n("div",{staticClass:"ShowFileField__thumbnail-container"},[n("img",{ref:"thumbnail",staticClass:"ShowFileField__thumbnail",style:t.thumbnailStyle,attrs:{src:t.thumbnailUrl,alt:""},on:{load:t.handleThumbnailLoaded}})])]:[n("div",{staticClass:"ShowFileField__placeholder text-center"},[n("i",{class:t.iconClass})])]],2),t._v(" "),n("div",{staticClass:"col px-2 mt-1",staticStyle:{"min-width":"0"}},[n("div",{staticClass:"ShowFileField__name text-truncate mb-2"},[t._v("\n                "+t._s(t.fileName)+"\n            ")]),t._v(" "),n("div",{staticClass:"ShowFileField__info"},[n("div",{staticClass:"row mx-n2 h-100"},[n("div",{staticClass:"col-auto px-2"},[n("div",{staticClass:"ShowFileField__size text-muted"},[t._v("\n                            "+t._s(t.sizeLabel)+"\n                        ")])]),t._v(" "),n("div",{staticClass:"col-auto px-2"},[n("div",{staticClass:"text-muted"},[n("i",{staticClass:"fa fas fa-download"}),t._v(" "),n("a",{staticStyle:{color:"inherit"},attrs:{href:t.downloadUrl,download:t.fileName}},[t._v("\n                                "+t._s(t.lang("show.file.download"))+"\n                            ")])])])])])])])])}),[],!1,null,null,null);Lu.options.__file="File.vue";var Eu=Lu.exports;function Pu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Bu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Au={components:{Grid:Ot,UnknownField:Kn,FieldLayout:lu},props:{value:Array,itemFields:{type:Object,required:!0},layout:Object,label:String,emptyVisible:Boolean},computed:{isEmpty:function(){return!this.value||0===this.value.length},isVisible:function(){return!this.isEmpty||this.emptyVisible},classes:function(){return{"ShowListField--empty":this.isEmpty}},fileFieldsCollapsed:function(){return this.allValuesOfType("file").every((function(t){return t&&!t.thumbnail}))}},methods:{lang:te,fieldOptions:function(t){var e=this.itemFields?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Bu(t,e,n[e])}))}return t}({},this.itemFields[t.key]):null;return e||console.error('Show list field: unknown field "'.concat(t.key,'"')),"file"===e.type&&(e.collapsed=this.fileFieldsCollapsed),e},fieldValue:function(t,e){return t?t[e.key]:null},allValuesOfType:function(t){var e=this;return(this.value||[]).reduce((function(n,r){return[].concat($u(n),$u(Object.entries(r).filter((function(n){var r=Pu(n,1)[0],i=e.itemFields[r];return i&&i.type===t})).map((function(t){var e=Pu(t,2);e[0];return e[1]}))))}),[])}},created:function(){var t=this;cu(this,(function(){return t.isVisible}))}},Iu=Object(k.a)(Au,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FieldLayout",{staticClass:"ShowListField",class:t.classes,attrs:{label:t.label}},[n("div",{staticClass:"ShowListField__content"},[t.isEmpty?[n("em",{staticClass:"ShowListField__empty text-muted"},[t._v(t._s(t.lang("show.list.empty")))])]:[n("div",{staticClass:"ShowListField__list"},[t._l(t.value,(function(e){return[n("div",{staticClass:"ShowListField__item"},[n("Grid",{staticClass:"ShowListField__fields-grid",attrs:{rows:t.layout.item},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.itemLayout;return[t.fieldOptions(i)?[n("ShowField",{attrs:{options:t.fieldOptions(i),value:t.fieldValue(e,i),"config-identifier":i.key}})]:[n("UnknownField",{attrs:{name:i.key}})]]}}],null,!0)})],1)]}))],2)]],2)])}),[],!1,null,null,null);Iu.options.__file="List.vue";var Du={entityList:hu,text:gu,picture:Su,file:Eu,list:Iu.exports};function Fu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tu={mixins:[Xe],props:{value:{},options:Object,layout:Object,collapsable:Boolean},data:function(){return{visible:!0}},computed:{component:function(){return this.options?Te(t=this.options.type)?Me(t):Du[t]:null;var t},props:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Fu(t,e,n[e])}))}return t}({},this.options)},isVisible:function(){return!!this.component&&this.visible}},methods:{handleVisiblityChanged:function(t){this.visible=t,this.$emit("visible-change",t)}}},Mu=Object(k.a)(Tu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"show-field"},[n(t.component,t._b({tag:"component",attrs:{"field-key":t.options.key,"field-config-identifier":t.mergedConfigIdentifier,value:t.value,layout:t.layout,collapsable:t.collapsable},on:{"visible-change":t.handleVisiblityChanged}},"component",t.props,!1))],1)}),[],!1,null,null,null);Mu.options.__file="Field.vue";var Vu=Mu.exports,zu={components:{Grid:Ot},props:{section:Object,fieldsRowClass:Function,collapsable:Boolean,layout:{type:String,validator:function(t){return["card","contents"].includes(t)},default:"card"}},computed:{classes:function(){return["ShowSection--layout-".concat(this.layout)]},hasCollapse:function(){return this.collapsable},wrapperElement:function(){return this.hasCollapse?"details":"div"}}},Ru=Object(k.a)(zu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ShowSection",class:t.classes},[n(t.wrapperElement,{tag:"component"},[t.hasCollapse?[n("summary",{staticClass:"py-1 mb-1"},[n("h2",{staticClass:"ShowSection__title d-inline-block mb-0"},[t._v(t._s(t.section.title||" "))])])]:t.section.title?[n("h2",{staticClass:"ShowSection__title"},[t._v(t._s(t.section.title))])]:t._e(),t._v(" "),n("div",{staticClass:"ShowSection__content"},[n("Grid",{staticClass:"ShowSection__grid",attrs:{rows:[t.section.columns],"col-class":function(){return"ShowSection__col"}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.itemLayout;return[n("Grid",{staticClass:"ShowPage__fields-grid",attrs:{rows:r.fields,"row-class":t.fieldsRowClass},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.itemLayout;return[t._t("default",null,{fieldLayout:n})]}}],null,!0)})]}}])})],1)],2)],1)}),[],!1,null,null,null);function Nu(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ku(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Uu(t,e,n[e])}))}return t}function Uu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ru.options.__file="Section.vue";var Hu={mixins:[rn],components:{Section:Ru.exports,ActionBarShow:nu,Grid:Ot,ShowField:Vu,UnknownField:Kn,CommandFormModal:Ns,CommandViewPanel:Ws},data:function(){return{ready:!1,fieldsVisible:null,refreshKey:0}},computed:qu(qu({},Object(a.b)("show",["entityKey","instanceId","fields","layout","data","config","breadcrumb","instanceState","canEdit","authorizedCommands","stateValues","canChangeState"])),{},{formUrl:function(){var t=this.config.multiformAttribute?this.data[this.config.multiformAttribute]:null;return Ue({entityKey:t?"".concat(this.entityKey,":").concat(t):this.entityKey,instanceId:this.instanceId},{append:!0})},backUrl:function(){return Ie(this.breadcrumb.items)},showBackButton:function(){return!!this.backUrl},breadcrumbItems:function(){return this.breadcrumb.items}}),methods:{fieldOptions:function(t){var e=this.fields?this.fields[t.key]:null;return e||console.error('Show page: unknown field "'.concat(t.key,'"')),e},fieldValue:function(t){return this.data?this.data[t.key]:null},isFieldVisible:function(t){return!this.fieldsVisible||!1!==this.fieldsVisible[t.key]},isSectionCollapsable:function(t){return t.collapsable&&!this.sectionHasField(t,"entityList")},sectionLayout:function(t){return this.sectionHasField(t,"entityList")?"contents":"card"},fieldsRowClass:function(t){var e=this,n=t.map((function(t){var n=e.fieldOptions(t);return"ShowPage__fields-row--".concat(n.type)}));return["ShowPage__fields-row"].concat(Ku(n))},sectionFields:function(t){return t.columns.reduce((function(t,e){return[].concat(Ku(t),Ku(e.fields.flat()))}),[])},isSectionVisible:function(t){var e=this;return this.sectionFields(t).some((function(t){return e.isFieldVisible(t)}))},sectionHasField:function(t,e){var n=this;return this.sectionFields(t).some((function(t){var r=n.fieldOptions(t);return r&&r.type===e}))},handleFieldVisibilityChanged:function(t,e){this.fieldsVisible=qu(qu({},this.fieldsVisible),{},Uu({},t,e))},handleCommandRequested:function(t){var e=this;this.sendCommand(t,{postCommand:function(){return e.$store.dispatch("show/postCommand",{command:t})},postForm:function(n){return e.$store.dispatch("show/postCommand",{command:t,data:n})},getFormData:function(){return e.$store.dispatch("show/getCommandFormData",{command:t})}})},handleStateChanged:function(t){var e=this;return this.$store.dispatch("show/postState",t).then((function(t){e.handleCommandActionRequested(t.action,t)})).catch((function(t){var e=t.response.data;422===t.response.status&&ue(e.message,{title:te("modals.state.422.title"),isError:!0})}))},handleRefreshCommand:function(){this.init()},initCommands:function(){this.addCommandActionHandlers({refresh:this.handleRefreshCommand})},init:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("show/setEntityKey",e.$route.params.entityKey);case 2:return t.next=4,e.$store.dispatch("show/setInstanceId",e.$route.params.instanceId);case 4:return t.next=6,ze(e.$store.dispatch("show/get"));case 6:Ve(t.sent.notifications),e.ready=!0,e.refreshKey++;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Nu(a,r,i,o,s,"next",t)}function s(t){Nu(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},beforeMount:function(){this.init(),this.initCommands()}},Gu=Object(k.a)(Hu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ShowPage"},[n("div",{staticClass:"container"},[t.ready?[n("ActionBarShow",{attrs:{commands:t.authorizedCommands,state:t.instanceState,"state-values":t.stateValues,"form-url":t.formUrl,"back-url":t.backUrl,"can-edit":t.canEdit,"can-change-state":t.canChangeState,"show-back-button":t.showBackButton,breadcrumb:t.breadcrumbItems,"show-breadcrumb":t.breadcrumb.visible},on:{command:t.handleCommandRequested,"state-change":t.handleStateChanged}}),t._v(" "),n("div",{staticClass:"mt-4 pt-2"},[t._l(t.layout.sections,(function(e){return[n("Section",{directives:[{name:"show",rawName:"v-show",value:t.isSectionVisible(e),expression:"isSectionVisible(section)"}],staticClass:"ShowPage__section",attrs:{section:e,layout:t.sectionLayout(e),"fields-row-class":t.fieldsRowClass,collapsable:t.isSectionCollapsable(e)},scopedSlots:t._u([{key:"default",fn:function(r){var i=r.fieldLayout;return[t.fieldOptions(i)?[n("ShowField",{key:t.refreshKey,attrs:{options:t.fieldOptions(i),value:t.fieldValue(i),"config-identifier":i.key,layout:i,collapsable:e.collapsable},on:{"visible-change":function(e){return t.handleFieldVisibilityChanged(i.key,e)}}})]:[n("UnknownField",{attrs:{name:i.key}})]]}}],null,!0)})]}))],2)]:[n("ActionBarShow")]],2),t._v(" "),n("CommandFormModal",{ref:"commandForm",attrs:{command:t.currentCommand}}),t._v(" "),n("CommandViewPanel",{attrs:{content:t.commandViewContent},on:{close:t.handleCommandViewPanelClosed}})],1)}),[],!1,null,null,null);Gu.options.__file="ShowPage.vue";var Wu=[{name:"show",path:"/(.*)?/s-show/:entityKey/:instanceId?",component:Gu.exports}],Yu={name:"SharpActionView",components:{Modal:sn,LoadingOverlay:It,ActionBar:L},provide:function(){return{axiosInstance:me()}},props:{context:{type:String,required:!0}},data:function(){return{showErrorPage:!1,errorPageData:null}},computed:{dialogs:function(){return this.$store.state.dialogs},isLoading:function(){return this.$store.getters.isLoading}},created:function(){var t=this;this._provided.axiosInstance.interceptors.response.use((function(t){return t}),(function(e){var n=e.response,r=n.status,i=n.data;return("get"===e.config.method&&404===r||403===r)&&(t.showErrorPage=!0,t.errorPageData={status:r,message:i.message}),Promise.reject(e)}))}},Qu=Object(k.a)(Yu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SharpActionView"},[t.showErrorPage?[n("div",{staticClass:"container"},[n("ActionBar"),t._v(" "),n("h1",[t._v("Error "+t._s(t.errorPageData.status))]),t._v(" "),n("p",[t._v(t._s(t.errorPageData.message))])],1)]:[t._t("default"),t._v(" "),n("notifications",{staticStyle:{top:"6rem",right:"1rem"},attrs:{position:"top right","animation-name":"slideRight",reverse:""},scopedSlots:t._u([{key:"body",fn:function(e){var r=e.item,i=e.close;return[n("div",{staticClass:"toast show mb-3",class:"border-"+r.type,attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true","data-test":"notification"}},[n("div",{staticClass:"toast-header"},[n("strong",{staticClass:"me-auto"},[t._v(t._s(r.title))]),t._v(" "),n("button",{staticClass:"btn-close",attrs:{type:"button","data-test":"close-notification","aria-label":"Close"},on:{click:i}})]),t._v(" "),r.text?[n("div",{staticClass:"toast-body",domProps:{innerHTML:t._s(r.text)}})]:t._e()],2)]}}])}),t._v(" "),t._l(t.dialogs,(function(e){return[n("Modal",t._b({key:e.id,on:{ok:e.okCallback,hidden:e.hiddenCallback}},"Modal",e.props,!1),[t._v("\n                "+t._s(e.text)+"\n            ")])]}))],t._v(" "),n("LoadingOverlay",{attrs:{visible:t.isLoading}})],2)}),[],!1,null,null,null);Qu.options.__file="ActionView.vue";var Xu=Qu.exports;function Ju(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Zu={name:"SharpLeftNav",mixins:[function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sm";return{data:function(){return{isViewportSmall:!1}},methods:{$_responsiveUpdate:function(){var t=this.$_testElm.offsetWidth;this.isViewportSmall=!!t}},created:function(){var e="viewport-down-".concat(t);this.$_testElm=document.getElementById(e),this.$_testElm||(this.$_testElm=document.createElement("div"),this.$_testElm.id=e,this.$_testElm.classList.add("d-".concat(t,"-none")),document.body.appendChild(this.$_testElm)),this.$_responsiveUpdate(),this.$_debouncedRespnsiveUpdate=Qe()(this.$_responsiveUpdate,300),window.addEventListener("resize",this.$_debouncedRespnsiveUpdate)},destroyed:function(){window.removeEventListener("resize",this.$_debouncedRespnsiveUpdate)}}}("lg")],components:{GlobalFilters:Pl,Loading:$t},props:{items:Array,current:String,title:String,collapseable:{type:Boolean,default:!0},hasGlobalFilters:Boolean},data:function(){return{ready:!1,collapsed:!1,state:"expanded",filterOpened:!1}},watch:{collapsed:{handler:function(t){document.body.classList.toggle("leftNav--collapsed",this.collapsed),this.state=t?"collapsing":"expanding",setTimeout(this.updateState,250)}}},computed:{flattenedItems:function(){return this.items.map((function(t){return"category"===t.type?t.entities:t})).flat()},currentEntity:function(){var t=this;return this.flattenedItems.find((function(e){return e.key===t.current}))},currentIcon:function(){var t;return"dashboard"===this.current?"fas fa-tachometer-alt":null===(t=this.currentEntity)||void 0===t?void 0:t.icon},classes:function(){return["SharpLeftNav--".concat(this.state),{"SharpLeftNav--filter-opened":this.filterOpened,"SharpLeftNav--collapseable":this.collapseable}]}},methods:{updateState:function(){this.state=this.collapsed?"collapsed":"expanded"},handleGlobalFilterOpened:function(){this.filterOpened=!0},handleGlobalFilterClosed:function(){this.filterOpened=!1},handleClicked:function(){this.collapsed&&(this.collapsed=!1)},init:function(){var t,e=this;return(t=U.a.mark((function t(){return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasGlobalFilters){t.next=3;break}return t.next=3,e.$store.dispatch("global-filters/get");case 3:e.$store.dispatch("setCurrentEntity",e.currentEntity),e.ready=!0;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Ju(a,r,i,o,s,"next",t)}function s(t){Ju(a,r,i,o,s,"throw",t)}o(void 0)}))})()}},created:function(){this.collapsed=this.isViewportSmall,this.updateState(),this.init()}},td=Object(k.a)(Zu,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"SharpLeftNav",class:t.classes,attrs:{role:"navigation","aria-label":"Menu Sharp"},on:{click:t.handleClicked}},[n("div",{staticClass:"SharpLeftNav__top-icon"},[n("i",{staticClass:"fa",class:t.currentIcon})]),t._v(" "),n("div",{staticClass:"flex-grow-0"},[n("div",{staticClass:"SharpLeftNav__title-container position-relative"},[t._t("title",[n("h2",{staticClass:"SharpLeftNav__title mb-0"},[t._v(t._s(t.title))])])],2)]),t._v(" "),n("div",{staticClass:"flex-grow-1 position-relative",staticStyle:{"min-height":"0"}},[t.ready?[n("div",{staticClass:"SharpLeftNav__content d-flex flex-column"},[n("div",{staticClass:"SharpLeftNav__inner flex-grow-1 pb-5",staticStyle:{"min-height":"0"}},[n("GlobalFilters",{on:{open:t.handleGlobalFilterOpened,close:t.handleGlobalFilterClosed}}),t._v(" "),t._t("default")],2),t._v(" "),n("a",{staticClass:"SharpLeftNav__collapse-button btn btn-text",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.collapsed=!t.collapsed}}},[n("svg",{staticClass:"SharpLeftNav__collapse-arrow",staticStyle:{fill:"currentColor"},attrs:{width:"8",height:"12",viewBox:"0 0 8 12","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M7.5 10.6L2.8 6l4.7-4.6L6.1 0 0 6l6.1 6z"}})])])])]:[n("div",{staticClass:"d-flex align-items-center justify-content-center h-100"},[n("Loading",{attrs:{visible:"",small:""}})],1)]],2)])}),[],!1,null,null,null);td.options.__file="LeftNav.vue";var ed=td.exports;f.a.use(function(){var t=document.documentElement.lang;return x[t]||x.en}()),i.a.use(d.a),i.a.use(c.install,{installComponents:!1}),i.a.use(o.a),i.a.use(a.a);var nd=Ke(),rd=re();i.a.use((function(t,e){e.store,e.router}),{store:rd,router:nd}),i.a.use((function(t,e){var n=e.router;e.store.registerModule("dashboard",Al),n.addRoutes(jc)}),{store:rd,router:nd}),i.a.use((function(t,e){var n=e.router;e.store.registerModule("entity-list",Ec),n.addRoutes(Yc)}),{store:rd,router:nd}),i.a.use((function(t,e){e.store.registerModule("global-filters",dl)}),{store:rd,router:nd}),i.a.use((function(t,e){var n=e.router;e.store;t.component("FieldDisplay",Ss),n.addRoutes(Vs)}),{store:rd,router:nd}),i.a.use((function(t,e){var n=e.router,r=e.store;n.addRoutes(Wu),r.registerModule("show",Zc),t.component("ShowField",Vu)}),{store:rd,router:nd}),i.a.use((function(t,e){e.store,e.router}),{store:rd,router:nd}),window.Trix=l.a,i.a.config.ignoredElements=[/^trix-/],i.a.component("sharp-action-view",Xu),i.a.component("sharp-left-nav",ed),i.a.component("sharp-collapsible-item",K),i.a.component("sharp-nav-item",z),i.a.component("sharp-item-visual",Lt),new i.a({el:"#sharp-app",store:rd,router:nd})},GS0v:function(t,e,n){var r=n("QOb4");"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,i);r.locals&&(t.exports=r.locals)},NBBh:function(t,e){},QOb4:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".unknown-field[data-v-d6c36028]{font-family:Courier New,Courier,monospace;background:rgba(255,0,0,.25);border:1px solid red;padding:.5em 1em;font-weight:700}",""])},ynHM:function(t,e,n){"use strict";var r=n("GS0v");n.n(r).a}},[[0,0,1]]]);
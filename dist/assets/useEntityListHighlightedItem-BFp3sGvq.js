import{bf as Re,d as B,ak as R,at as He,bg as Ct,bh as Q,o as c,c as y,w as o,q as T,u as e,aO as re,P as ue,x as Ve,bi as $t,aq as de,A as g,j as $,a as f,v as Y,b as z,F as E,bj as Et,bk as Pe,ao as ce,y as K,bl as Ke,bm as dt,bn as zt,bo as xe,au as G,i as S,bp as It,t as _,_ as L,k as H,bq as Rt,D as Pt,G as At,H as le,B as Bt,br as Tt,V as D,I as Dt,z as ee,bs as qt,bt as Ut,m as Ot,bu as Ft,bv as Ht,n as ft,bw as Vt,bx as Kt,by as Wt,bz as Mt,aS as pt,bA as Xt,av as jt,bB as Yt,bC as se,bD as Nt,bE as Ge,bF as ht,bG as De,bH as xt,bI as Gt,bJ as Jt,bK as Qt,al as Zt,bL as ea,bM as ta,aD as aa,a$ as na,bN as he,aZ as we,bc as Le,aK as ke,aL as Se,aM as Ce,b8 as $e,b7 as Ee,r as j,aT as ve,aE as la,aF as sa,aG as ra,aH as oa,aI as ia,aJ as Je,Y as Qe,S as ua,bO as ca,bP as da,bQ as fa,K as Ze,bR as pa,T as ha,a_ as va,aN as ma,aW as qe,aX as ya,b0 as et,Z as ba,X as ga,bS as _a,bT as wa,b2 as La,b3 as ka,b4 as Sa,b5 as Ca,b6 as $a,bd as Ea,be as za,bU as Ia,bV as tt}from"./sharp-CUNizixK.js";import{u as Ra,a as at,b as nt,_ as Pa,F as Aa,c as Ba,d as lt}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-vn0FYefF.js";import{_ as st}from"./CardDescription.vue_vue_type_script_setup_true_lang-dnOqdQXJ.js";/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Re("ArrowDownIcon",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Re("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Re("ChevronsLeftIcon",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Re("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),[Z,Oa]=Ve("ScrollAreaRoot"),Fa=B({__name:"ScrollAreaRoot",props:{type:{default:"hover"},dir:{},scrollHideDelay:{default:600},asChild:{type:Boolean},as:{}},setup(i,{expose:a}){const t=i,l=R(0),u=R(0),p=R(),r=R(),s=R(),d=R(),h=R(!1),k=R(!1),{type:q,dir:I,scrollHideDelay:C}=He(t),V=Ct(I);function X(){var w;(w=p.value)==null||w.scrollTo({top:0})}function N(){var w;(w=p.value)==null||w.scrollTo({top:0,left:0})}a({viewport:p,scrollTop:X,scrollTopLeft:N});const{forwardRef:v,currentElement:P}=Q();return Oa({type:q,dir:V,scrollHideDelay:C,scrollArea:P,viewport:p,onViewportChange:w=>{p.value=w||void 0},content:r,onContentChange:w=>{r.value=w},scrollbarX:s,scrollbarXEnabled:h,scrollbarY:d,scrollbarYEnabled:k,onScrollbarXChange:w=>{s.value=w||void 0},onScrollbarYChange:w=>{d.value=w||void 0},onScrollbarXEnabledChange:w=>{h.value=w},onScrollbarYEnabledChange:w=>{k.value=w},onCornerWidthChange:w=>{l.value=w},onCornerHeightChange:w=>{u.value=w}}),(w,te)=>(c(),y(e(ue),{ref:e(v),"as-child":t.asChild,as:w.as,dir:e(V),style:re({position:"relative","--reka-scroll-area-corner-width":`${l.value}px`,"--reka-scroll-area-corner-height":`${u.value}px`})},{default:o(()=>[T(w.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),Ha=B({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(i,{expose:a}){const t=i,{nonce:l}=He(t),u=$t(l),p=Z(),r=R();de(()=>{p.onViewportChange(r.value),p.onContentChange(d.value)}),a({viewportElement:r});const{forwardRef:s,currentElement:d}=Q();return(h,k)=>(c(),g(E,null,[$("div",Y({ref_key:"viewportElement",ref:r,"data-reka-scroll-area-viewport":"",style:{overflowX:e(p).scrollbarXEnabled.value?"scroll":"hidden",overflowY:e(p).scrollbarYEnabled.value?"scroll":"hidden"}},h.$attrs,{tabindex:0}),[f(e(ue),{ref:e(s),style:re({minWidth:e(p).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":t.asChild,as:h.as},{default:o(()=>[T(h.$slots,"default")]),_:3},8,["style","as-child","as"])],16),f(e(ue),{as:"style",nonce:e(u)},{default:o(()=>k[0]||(k[0]=[z(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1},8,["nonce"])],64))}});function vt(i,a){return t=>{if(i[0]===i[1]||a[0]===a[1])return a[0];const l=(a[1]-a[0])/(i[1]-i[0]);return a[0]+l*(t-i[0])}}function Ae(i){const a=mt(i.viewport,i.content),t=i.scrollbar.paddingStart+i.scrollbar.paddingEnd,l=(i.scrollbar.size-t)*a;return Math.max(l,18)}function mt(i,a){const t=i/a;return Number.isNaN(t)?0:t}function Va(i,a=()=>{}){let t={left:i.scrollLeft,top:i.scrollTop},l=0;return function u(){const p={left:i.scrollLeft,top:i.scrollTop},r=t.left!==p.left,s=t.top!==p.top;(r||s)&&a(),t=p,l=window.requestAnimationFrame(u)}(),()=>window.cancelAnimationFrame(l)}function rt(i,a,t="ltr"){const l=Ae(a),u=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,p=a.scrollbar.size-u,r=a.content-a.viewport,s=p-l,d=t==="ltr"?[0,r]:[r*-1,0],h=Et(i,d[0],d[1]);return vt([0,r],[0,s])(h)}function ze(i){return i?Number.parseInt(i,10):0}function Ka(i,a,t,l="ltr"){const u=Ae(t),p=u/2,r=a||p,s=u-r,d=t.scrollbar.paddingStart+r,h=t.scrollbar.size-t.scrollbar.paddingEnd-s,k=t.content-t.viewport,q=l==="ltr"?[0,k]:[k*-1,0];return vt([d,h],q)(i)}function ot(i,a){return i>0&&i<a}const yt=B({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(i,{emit:a}){const t=i,l=a,u=Z(),p=Be(),r=Te(),{forwardRef:s,currentElement:d}=Q(),h=R(""),k=R();function q(v){var P,w;if(k.value){const te=v.clientX-((P=k.value)==null?void 0:P.left),ae=v.clientY-((w=k.value)==null?void 0:w.top);l("onDragScroll",{x:te,y:ae})}}function I(v){v.button===0&&(v.target.setPointerCapture(v.pointerId),k.value=d.value.getBoundingClientRect(),h.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",u.viewport&&(u.viewport.value.style.scrollBehavior="auto"),q(v))}function C(v){q(v)}function V(v){const P=v.target;P.hasPointerCapture(v.pointerId)&&P.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=h.value,u.viewport&&(u.viewport.value.style.scrollBehavior=""),k.value=void 0}function X(v){var ae;const P=v.target,w=(ae=d.value)==null?void 0:ae.contains(P),te=p.sizes.value.content-p.sizes.value.viewport;w&&p.handleWheelScroll(v,te)}de(()=>{document.addEventListener("wheel",X,{passive:!1})}),Pe(()=>{document.removeEventListener("wheel",X)});function N(){var v,P,w,te,ae;d.value&&(t.isHorizontal?p.handleSizeChange({content:((v=u.viewport.value)==null?void 0:v.scrollWidth)??0,viewport:((P=u.viewport.value)==null?void 0:P.offsetWidth)??0,scrollbar:{size:d.value.clientWidth??0,paddingStart:ze(getComputedStyle(d.value).paddingLeft),paddingEnd:ze(getComputedStyle(d.value).paddingRight)}}):p.handleSizeChange({content:((w=u.viewport.value)==null?void 0:w.scrollHeight)??0,viewport:((te=u.viewport.value)==null?void 0:te.offsetHeight)??0,scrollbar:{size:((ae=d.value)==null?void 0:ae.clientHeight)??0,paddingStart:ze(getComputedStyle(d.value).paddingLeft),paddingEnd:ze(getComputedStyle(d.value).paddingRight)}}))}return ce(d,N),ce(u.content,N),(v,P)=>(c(),y(e(ue),{ref:e(s),style:{position:"absolute"},"data-scrollbarimpl":"",as:e(r).as.value,"as-child":e(r).asChild.value,onPointerdown:I,onPointermove:C,onPointerup:V},{default:o(()=>[T(v.$slots,"default")]),_:3},8,["as","as-child"]))}}),Wa=B({__name:"ScrollAreaScrollbarX",setup(i){const a=Z(),t=Be(),{forwardRef:l,currentElement:u}=Q();de(()=>{u.value&&a.onScrollbarXChange(u.value)});const p=K(()=>t.sizes.value);return(r,s)=>(c(),y(yt,{ref:e(l),"is-horizontal":!0,"data-orientation":"horizontal",style:re({bottom:0,left:e(a).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:e(a).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":p.value?`${e(Ae)(p.value)}px`:void 0}),onOnDragScroll:s[0]||(s[0]=d=>e(t).onDragScroll(d.x))},{default:o(()=>[T(r.$slots,"default")]),_:3},8,["style"]))}}),Ma=B({__name:"ScrollAreaScrollbarY",setup(i){const a=Z(),t=Be(),{forwardRef:l,currentElement:u}=Q();de(()=>{u.value&&a.onScrollbarYChange(u.value)});const p=K(()=>t.sizes.value);return(r,s)=>(c(),y(yt,{ref:e(l),"is-horizontal":!1,"data-orientation":"vertical",style:re({top:0,right:e(a).dir.value==="ltr"?0:void 0,left:e(a).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":p.value?`${e(Ae)(p.value)}px`:void 0}),onOnDragScroll:s[0]||(s[0]=d=>e(t).onDragScroll(d.y))},{default:o(()=>[T(r.$slots,"default")]),_:3},8,["style"]))}}),[Be,Xa]=Ve("ScrollAreaScrollbarVisible"),We=B({__name:"ScrollAreaScrollbarVisible",setup(i){const a=Z(),t=Te(),{forwardRef:l}=Q(),u=R({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=K(()=>{const v=mt(u.value.viewport,u.value.content);return v>0&&v<1}),r=R(),s=R(0);function d(v,P){if(C.value){const w=a.viewport.value.scrollLeft+v.deltaY;a.viewport.value.scrollLeft=w,ot(w,P)&&v.preventDefault()}else{const w=a.viewport.value.scrollTop+v.deltaY;a.viewport.value.scrollTop=w,ot(w,P)&&v.preventDefault()}}function h(v,P){C.value?s.value=P.x:s.value=P.y}function k(v){s.value=0}function q(v){u.value=v}function I(v,P){return Ka(v,s.value,u.value,P)}const C=K(()=>t.isHorizontal.value);function V(v){C.value?a.viewport.value.scrollLeft=I(v,a.dir.value):a.viewport.value.scrollTop=I(v)}function X(){if(C.value){if(a.viewport.value&&r.value){const v=a.viewport.value.scrollLeft,P=rt(v,u.value,a.dir.value);r.value.style.transform=`translate3d(${P}px, 0, 0)`}}else if(a.viewport.value&&r.value){const v=a.viewport.value.scrollTop,P=rt(v,u.value);r.value.style.transform=`translate3d(0, ${P}px, 0)`}}function N(v){r.value=v}return Xa({sizes:u,hasThumb:p,handleWheelScroll:d,handleThumbDown:h,handleThumbUp:k,handleSizeChange:q,onThumbPositionChange:X,onThumbChange:N,onDragScroll:V}),(v,P)=>C.value?(c(),y(Wa,Y({key:0},v.$attrs,{ref:e(l)}),{default:o(()=>[T(v.$slots,"default")]),_:3},16)):(c(),y(Ma,Y({key:1},v.$attrs,{ref:e(l)}),{default:o(()=>[T(v.$slots,"default")]),_:3},16))}}),bt=B({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean}},setup(i){const a=Z(),t=Te(),{forwardRef:l}=Q(),u=R(!1),p=dt(()=>{if(a.viewport.value){const r=a.viewport.value.offsetWidth<a.viewport.value.scrollWidth,s=a.viewport.value.offsetHeight<a.viewport.value.scrollHeight;u.value=t.isHorizontal.value?r:s}},10);return de(()=>p()),ce(a.viewport,p),ce(a.content,p),(r,s)=>(c(),y(e(Ke),{present:r.forceMount||u.value},{default:o(()=>[f(We,Y(r.$attrs,{ref:e(l),"data-state":u.value?"visible":"hidden"}),{default:o(()=>[T(r.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),ja=B({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean}},setup(i){const a=Z(),{forwardRef:t}=Q();let l;const u=R(!1);function p(){window.clearTimeout(l),u.value=!0}function r(){l=window.setTimeout(()=>{u.value=!1},a.scrollHideDelay.value)}return de(()=>{const s=a.scrollArea.value;s&&(s.addEventListener("pointerenter",p),s.addEventListener("pointerleave",r))}),Pe(()=>{const s=a.scrollArea.value;s&&(window.clearTimeout(l),s.removeEventListener("pointerenter",p),s.removeEventListener("pointerleave",r))}),(s,d)=>(c(),y(e(Ke),{present:s.forceMount||u.value},{default:o(()=>[f(bt,Y(s.$attrs,{ref:e(t),"data-state":u.value?"visible":"hidden"}),{default:o(()=>[T(s.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ya=B({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean}},setup(i){const a=Z(),t=Te(),{forwardRef:l}=Q(),{state:u,dispatch:p}=zt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});xe(s=>{if(u.value==="idle"){const d=window.setTimeout(()=>p("HIDE"),a.scrollHideDelay.value);s(()=>{window.clearTimeout(d)})}});const r=dt(()=>p("SCROLL_END"),100);return xe(s=>{const d=a.viewport.value,h=t.isHorizontal.value?"scrollLeft":"scrollTop";if(d){let k=d[h];const q=()=>{const I=d[h];k!==I&&(p("SCROLL"),r()),k=I};d.addEventListener("scroll",q),s(()=>{d.removeEventListener("scroll",q)})}}),(s,d)=>(c(),y(e(Ke),{present:s.forceMount||e(u)!=="hidden"},{default:o(()=>[f(We,Y(s.$attrs,{ref:e(l)}),{default:o(()=>[T(s.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),[Te,Na]=Ve("ScrollAreaScrollbar"),xa=B({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},setup(i){const a=i,{forwardRef:t}=Q(),l=Z(),u=K(()=>a.orientation==="horizontal");G(u,()=>{u.value?l.onScrollbarXEnabledChange(!0):l.onScrollbarYEnabledChange(!0)},{immediate:!0}),Pe(()=>{l.onScrollbarXEnabledChange(!1),l.onScrollbarYEnabledChange(!1)});const{orientation:p,forceMount:r,asChild:s,as:d}=He(a);return Na({orientation:p,forceMount:r,isHorizontal:u,as:d,asChild:s}),(h,k)=>e(l).type.value==="hover"?(c(),y(ja,Y({key:0},h.$attrs,{ref:e(t),"force-mount":e(r)}),{default:o(()=>[T(h.$slots,"default")]),_:3},16,["force-mount"])):e(l).type.value==="scroll"?(c(),y(Ya,Y({key:1},h.$attrs,{ref:e(t),"force-mount":e(r)}),{default:o(()=>[T(h.$slots,"default")]),_:3},16,["force-mount"])):e(l).type.value==="auto"?(c(),y(bt,Y({key:2},h.$attrs,{ref:e(t),"force-mount":e(r)}),{default:o(()=>[T(h.$slots,"default")]),_:3},16,["force-mount"])):e(l).type.value==="always"?(c(),y(We,Y({key:3},h.$attrs,{ref:e(t),"data-state":"visible"}),{default:o(()=>[T(h.$slots,"default")]),_:3},16)):S("",!0)}}),Ga=B({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean},as:{}},setup(i){const a=i,t=Z(),l=Be();function u(I){const V=I.target.getBoundingClientRect(),X=I.clientX-V.left,N=I.clientY-V.top;l.handleThumbDown(I,{x:X,y:N})}function p(I){l.handleThumbUp(I)}const{forwardRef:r,currentElement:s}=Q(),d=R(),h=K(()=>t.viewport.value);function k(){if(!d.value){const I=Va(h.value,l.onThumbPositionChange);d.value=I,l.onThumbPositionChange()}}const q=K(()=>l.sizes.value);return It(q,()=>{l.onThumbChange(s.value),h.value&&(l.onThumbPositionChange(),h.value.addEventListener("scroll",k))}),Pe(()=>{var I;h.value.removeEventListener("scroll",k),(I=t.viewport.value)==null||I.removeEventListener("scroll",k)}),(I,C)=>(c(),y(e(ue),{ref:e(r),"data-state":e(l).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":a.asChild,as:I.as,onPointerdown:u,onPointerup:p},{default:o(()=>[T(I.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),Ja=B({__name:"ScrollAreaCornerImpl",setup(i){const a=Z(),t=R(0),l=R(0),u=K(()=>!!t.value&&!!l.value);function p(){var d;const s=((d=a.scrollbarX.value)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(s),l.value=s}function r(){var d;const s=((d=a.scrollbarY.value)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(s),t.value=s}return ce(a.scrollbarX.value,p),ce(a.scrollbarY.value,r),G(()=>a.scrollbarX.value,p),G(()=>a.scrollbarY.value,r),(s,d)=>{var h;return u.value?(c(),y(e(ue),Y({key:0,style:{width:`${t.value}px`,height:`${l.value}px`,position:"absolute",right:e(a).dir.value==="ltr"?0:void 0,left:e(a).dir.value==="rtl"?0:void 0,bottom:0}},(h=s.$parent)==null?void 0:h.$props),{default:o(()=>[T(s.$slots,"default")]),_:3},16,["style"])):S("",!0)}}}),Qa=B({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean},as:{}},setup(i){const a=i,{forwardRef:t}=Q(),l=Z(),u=K(()=>!!l.scrollbarX.value&&!!l.scrollbarY.value),p=K(()=>l.type.value!=="scroll"&&u.value);return(r,s)=>p.value?(c(),y(Ja,Y({key:0},a,{ref:e(t)}),{default:o(()=>[T(r.$slots,"default")]),_:3},16)):S("",!0)}}),Za={class:"flex justify-center w-full gap-x-6 lg:gap-x-8","aria-label":"Pagination"},en={class:"flex gap-2"},tn={class:"sr-only"},an={class:"sr-only"},nn={class:"flex min-w-[100px] gap-2 items-center justify-center text-sm font-medium"},ln=["href"],sn={class:"flex gap-2"},rn={class:"sr-only"},on={class:"sr-only"},un=B({__name:"EntityListPagination",props:{entityList:{},linksOpenable:{type:Boolean}},emits:["change"],setup(i,{emit:a}){const t=i,l=a;function u(r,s=!1){if(t.linksOpenable&&(r.metaKey||r.ctrlKey||r.shiftKey||r.altKey)){r.stopPropagation();return}const d=r.target.closest("a").href;d&&!s&&(l("change",new URL(d).searchParams.get("page")),r.preventDefault())}function p(r){const s=new URL(t.entityList.meta.first_page_url);return s.searchParams.set("page",String(r)),s.toString()}return(r,s)=>(c(),g("nav",Za,[$("div",en,[f(e(H),{as:r.entityList.meta.prev_page_url?"a":"button",class:"hidden sm:flex",size:"icon",variant:"outline",href:r.entityList.meta.first_page_url,disabled:!r.entityList.meta.prev_page_url,onClick:u},{default:o(()=>[f(e(qa),{class:"h-4 w-4"}),$("span",tn,_(e(L)("sharp::entity_list.pagination.first")),1)]),_:1},8,["as","href","disabled"]),f(e(H),{as:r.entityList.meta.prev_page_url?"a":"button",size:"icon",variant:"outline",href:r.entityList.meta.prev_page_url,disabled:!r.entityList.meta.prev_page_url,onClick:u},{default:o(()=>[f(e(Rt),{class:"h-4 w-4"}),$("span",an,_(e(L)("sharp::entity_list.pagination.previous")),1)]),_:1},8,["as","href","disabled"])]),$("div",nn,[r.entityList.meta.last_page?(c(),g(E,{key:0},[$("span",null,_(e(L)("sharp::entity_list.pagination.current").split(":current_page")[0]),1),f(e(Bt),{"model-value":String(r.entityList.meta.current_page),"onUpdate:modelValue":s[1]||(s[1]=d=>r.$emit("change",d))},{default:o(()=>[f(e(Pt),{class:"w-10 justify-center [&_svg]:hidden","aria-label":e(L)("sharp::entity_list.pagination.select.aria_label")},{default:o(()=>[z(_(r.entityList.meta.current_page),1)]),_:1},8,["aria-label"]),f(e(At),{"align-offset":-22},{default:o(()=>[(c(!0),g(E,null,le(r.entityList.meta.last_page,d=>(c(),y(e(Dt),{value:String(d)},{default:o(()=>[r.linksOpenable?(c(),g("a",{key:0,class:"absolute inset-0",href:p(d),onPointerup:s[0]||(s[0]=h=>u(h,!0))},null,40,ln)):S("",!0),z(" "+_(d),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["model-value"]),$("span",null,_(e(L)("sharp::entity_list.pagination.current",{last_page:r.entityList.meta.last_page}).split(":current_page")[1]),1)],64)):(c(),g(E,{key:1},[z(_(e(L)("sharp::entity_list.pagination.current_simple").replace(":current_page",r.entityList.meta.current_page+"")),1)],64))]),$("div",sn,[f(e(H),{as:r.entityList.meta.next_page_url?"a":"button",size:"icon",variant:"outline",href:r.entityList.meta.next_page_url,disabled:!r.entityList.meta.next_page_url,onClick:u},{default:o(()=>[$("span",rn,_(e(L)("sharp::entity_list.pagination.next")),1),f(e(Tt),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),f(e(H),{as:r.entityList.meta.next_page_url?"a":"button",class:D(["hidden sm:flex",r.entityList.meta.last_page_url?"":"invisible"]),size:"icon",variant:"outline",href:r.entityList.meta.last_page_url,disabled:!r.entityList.meta.next_page_url,onClick:u},{default:o(()=>[f(e(Ua),{class:"h-4 w-4"}),$("span",on,_(e(L)("sharp::entity_list.pagination.last")),1)]),_:1},8,["as","class","href","disabled"])])]))}}),Ue=B({__name:"StateIcon",props:{stateValue:{}},setup(i){return(a,t)=>{var l;return c(),g("div",{class:"relative rounded-full",style:re({"--color":((l=a.stateValue)==null?void 0:l.color)??"black"})},t[0]||(t[0]=[$("div",{class:"h-1.5 w-1.5 rounded-full bg-[var(--color)]"},null,-1)]),4)}}}),cn=B({__name:"Table",props:{class:{},noScroll:{type:Boolean}},setup(i){const a=i;return(t,l)=>(c(),g("div",{class:D(["relative",{"w-full overflow-auto":!t.noScroll}])},[$("table",{class:D(e(ee)("w-full caption-bottom text-sm",a.class))},[T(t.$slots,"default")],2)],2))}}),dn=B({__name:"TableBody",props:{class:{}},setup(i){const a=i;return(t,l)=>(c(),g("tbody",{class:D(e(ee)("[&_tr:last-child]:border-0",a.class))},[T(t.$slots,"default")],2))}}),ie=B({__name:"TableCell",props:{class:{}},setup(i){const a=i;return(t,l)=>(c(),g("td",{class:D(e(ee)("px-3 py-4 align-middle first:pl-4 last:pr-4",a.class))},[T(t.$slots,"default")],2))}}),Ie=B({__name:"TableHead",props:{class:{}},setup(i){const a=i;return(t,l)=>(c(),g("th",{class:D(e(ee)("h-12 px-3 text-left align-middle font-medium text-muted-foreground",a.class))},[T(t.$slots,"default")],2))}}),fn=B({__name:"TableHeader",props:{class:{}},setup(i){const a=i;return(t,l)=>(c(),g("thead",{class:D(e(ee)("[&_tr]:border-b",a.class))},[T(t.$slots,"default")],2))}}),it=B({__name:"TableRow",props:{class:{}},setup(i){const a=i;return(t,l)=>(c(),g("tr",{class:D(e(ee)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a.class))},[T(t.$slots,"default")],2))}}),ut=B({__name:"EntityListSearch",props:{entityList:{},expanded:{type:Boolean},inline:{type:Boolean},disabled:{type:Boolean}},emits:["submit","update:expanded"],setup(i,{emit:a}){var I;const t=i,l=a,u=R(),p=R(),{focused:r}=qt(u),{pressed:s}=Ut({target:u}),d=R(((I=t.entityList.query)==null?void 0:I.search)??"");let h="";G(r,()=>{var C,V;r.value?(h&&(d.value=h,h=""),s.value?G(s,()=>{s.value||l("update:expanded",!0)},{once:!0}):l("update:expanded",!0)):s.value||(h=(C=t.entityList.query)!=null&&C.search?"":d.value,d.value=(V=t.entityList.query)==null?void 0:V.search,l("update:expanded",!1))}),G(()=>t.entityList,()=>{var C;d.value=((C=t.entityList.query)==null?void 0:C.search)??"",l("update:expanded",!1)});function k(){l("update:expanded",!1),l("submit",d.value)}function q(){t.expanded||l("update:expanded",!0)}return(C,V)=>{var X,N;return c(),g("form",{onSubmit:ft(k,["prevent"]),ref_key:"el",ref:u},[$("div",{class:D(["relative z-[1]",[C.inline?"h-8 w-[150px] @5xl/root-card:w-[200px]":""]])},[$("div",{class:D(["top-0 left-0 group flex gap-3",e(ee)(C.inline?"absolute h-8":"flex-col",C.inline&&C.expanded?"-mr-[100px]":"")])},[$("div",{class:D(["relative",[C.inline?"":"w-full"]])},[f(e(Ot),{modelValue:d.value,"onUpdate:modelValue":V[0]||(V[0]=v=>d.value=v),class:D(e(ee)("w-full pl-8 h-9",{"h-8 w-[150px] @5xl/root-card:w-[200px]":C.inline,"sm:!w-[300px]":C.inline&&C.expanded,"pr-8":(X=t.entityList.query)==null?void 0:X.search})),disabled:C.disabled,placeholder:e(L)("sharp::action_bar.list.search.placeholder"),"aria-label":e(L)("sharp::action_bar.list.search.placeholder"),type:"search",ref_key:"input",ref:p,onInput:q},null,8,["modelValue","class","disabled","placeholder","aria-label"]),f(e(Ft),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(N=t.entityList.query)!=null&&N.search?(c(),y(e(H),{key:0,type:"button",class:"absolute right-0 top-0 h-full",size:"sm",variant:"ghost","aria-label":e(L)("sharp::action_bar.list.search.clear.aria_label"),onClick:V[1]||(V[1]=v=>C.$emit("submit",null))},{default:o(()=>[f(e(Ht),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["aria-label"])):S("",!0)],2),f(e(H),{type:"submit",class:D(e(ee)("h-8 hidden",C.expanded?"inline-flex":"")),size:"sm"},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.search.button")),1)]),_:1},8,["class"])],2)],2)],544)}}}),gt=B({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(i){const a=i,t=K(()=>{const{class:l,...u}=a;return u});return(l,u)=>(c(),y(e(xa),Y(t.value,{class:e(ee)("flex touch-none select-none transition-colors",l.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",l.orientation==="horizontal"&&"h-4 flex-col border-t border-t-transparent p-1",a.class)}),{default:o(()=>[f(e(Ga),{class:"relative flex-1 rounded-full bg-muted-foreground/50 hover:bg-muted-foreground"},{default:o(()=>u[0]||(u[0]=[$("div",{class:"absolute -inset-1.5 -top-4"},null,-1)])),_:1})]),_:1},16,["class"]))}}),pn=B({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},touchType:{}},setup(i){const a=i,t=K(()=>{const{class:s,...d}=a;return d}),l=Vt("(hover: none)"),u=R(),{arrivedState:p,measure:r}=Kt(()=>{var s;return(s=u.value)==null?void 0:s.viewportElement});return G(Mt(()=>{var s;return(s=u.value)==null?void 0:s.viewportElement}).width,Wt(()=>{r()},50,!0,!0)),G(()=>{var s;return(s=u.value)==null?void 0:s.viewportElement},()=>{var s;(s=u.value)!=null&&s.viewportElement&&(u.value.viewportElement.tabIndex=-1)}),(s,d)=>(c(),y(e(Fa),Y(t.value,{type:e(l)?a.touchType:a.type,class:e(ee)("group/scroll-area relative overflow-hidden",a.class),"data-scroll-arrived-right":e(p).right?!0:null,"data-scrollbar-x-visible":!e(p).left||!e(p).right?!0:null}),{default:o(()=>[f(e(Ha),{class:"h-full w-full rounded-[inherit]",ref_key:"viewport",ref:u},{default:o(()=>[T(s.$slots,"default")]),_:3},512),T(s.$slots,"scrollbar",{},()=>[f(gt),f(e(Qa))])]),_:3},16,["type","class","data-scroll-arrived-right","data-scrollbar-x-visible"]))}}),hn=Jt?window:void 0;function vn(i){var a;const t=se(i);return(a=t==null?void 0:t.$el)!=null?a:t}function mn(...i){const a=[],t=()=>{a.forEach(s=>s()),a.length=0},l=(s,d,h,k)=>(s.addEventListener(d,h,k),()=>s.removeEventListener(d,h,k)),u=K(()=>{const s=De(se(i[0])).filter(d=>d!=null);return s.every(d=>typeof d!="string")?s:void 0}),p=xt(()=>{var s,d;return[(d=(s=u.value)==null?void 0:s.map(h=>vn(h)))!=null?d:[hn].filter(h=>h!=null),De(se(u.value?i[1]:i[0])),De(e(u.value?i[2]:i[1])),se(u.value?i[3]:i[2])]},([s,d,h,k])=>{if(t(),!(s!=null&&s.length)||!(d!=null&&d.length)||!(h!=null&&h.length))return;const q=Gt(k)?{...k}:k;a.push(...s.flatMap(I=>d.flatMap(C=>h.map(V=>l(I,C,V,q)))))},{flush:"post"}),r=()=>{p(),t()};return ht(t),r}const yn=B({name:"UseElementBounding",props:["box","as"],setup(i,{slots:a}){const t=R(),l=pt(Xt(t));return()=>{if(a.default)return jt(i.as||"div",{ref:t},a.default(l))}}});function Oe(i){return typeof Window<"u"&&i instanceof Window?i.document.documentElement:typeof Document<"u"&&i instanceof Document?i.documentElement:i}function _t(i){const a=window.getComputedStyle(i);if(a.overflowX==="scroll"||a.overflowY==="scroll"||a.overflowX==="auto"&&i.clientWidth<i.scrollWidth||a.overflowY==="auto"&&i.clientHeight<i.scrollHeight)return!0;{const t=i.parentNode;return!t||t.tagName==="BODY"?!1:_t(t)}}function bn(i){const a=i||window.event,t=a.target;return _t(t)?!1:a.touches.length>1?!0:(a.preventDefault&&a.preventDefault(),!1)}const Fe=new WeakMap;function gn(i,a=!1){const t=R(a);let l=null,u="";G(Nt(i),s=>{const d=Oe(se(s));if(d){const h=d;if(Fe.get(h)||Fe.set(h,h.style.overflow),h.style.overflow!=="hidden"&&(u=h.style.overflow),h.style.overflow==="hidden")return t.value=!0;if(t.value)return h.style.overflow="hidden"}},{immediate:!0});const p=()=>{const s=Oe(se(i));!s||t.value||(Ge&&(l=mn(s,"touchmove",d=>{bn(d)},{passive:!1})),s.style.overflow="hidden",t.value=!0)},r=()=>{const s=Oe(se(i));!s||!t.value||(Ge&&(l==null||l()),s.style.overflow=u,Fe.delete(s),t.value=!1)};return ht(r),K({get(){return t.value},set(s){s?p():r()}})}function _n(){let i=!1;const a=R(!1);return(t,l)=>{if(a.value=l.value,i)return;i=!0;const u=gn(t,l.value);G(a,p=>u.value=p)}}_n();const wn=B({name:"UseWindowSize",props:["initialWidth","initialHeight"],setup(i,{slots:a}){const t=pt(Yt(i));return()=>{if(a.default)return a.default(t)}}}),Ln={key:0,class:"fixed inset-0 z-[11] bg-black/5"},kn={key:0,class:"container px-4 lg:px-6"},Sn={class:"flex flex-wrap md:flex-nowrap gap-y-4 gap-x-2"},Cn={class:"flex items-baseline min-w-0"},$n={key:0,class:"mb-4 flex flex-wrap items-center gap-2"},En={key:1,class:"contents"},zn={class:"flex items-center @2xl/root-card:hidden"},In={class:"flex flex-col flex-wrap gap-4"},Rn={"data-row-action":"",role:"presentation"},Pn={class:"truncate"},An={class:"flex justify-center items-center size-10"},Bn={class:"truncate"},Tn={key:1,class:"pt-2 text-muted-foreground"},ct=50,Dn=50,Fn=B({__name:"EntityList",props:{entityKey:{},entityList:{},filters:{},commands:{},title:{},inline:{type:Boolean,default:!0},showCount:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},collapsed:{type:Boolean},highlightedInstanceId:{}},emits:["update:query","filter-change","reset","reordering"],setup(i,{emit:a}){const t=i,l=R(),u=a,p=R(null),r=K(()=>!!p.value),s=K(()=>t.entityList.data.filter(n=>{var m;return(m=p.value)==null?void 0:m[t.entityList.instanceId(n)]}));function d(n){p.value={...p.value,...Object.fromEntries(t.entityList.data.map(m=>[t.entityList.instanceId(m),n]))}}function h(){p.value=Object.fromEntries(t.entityList.data.map(n=>[t.entityList.instanceId(n),!1]))}function k(n,m){u("filter-change",n,m)}const q=R(!1);function I(n){u("update:query",{...t.entityList.query,page:null,search:n})}function C(){u("reset")}function V(n){u("update:query",{...t.entityList.query,page:n})}function X(n){return t.entityList.currentSort===n.key?t.entityList.currentSortDir==="desc"?t.entityList.config.defaultSort===t.entityList.currentSort?"asc":null:"desc":"asc"}function N(n){const m=X(n);u("update:query",{...t.entityList.query,page:null,sort:m?n.key:null,dir:m||null})}function v(n,m){const{commands:O,entityKey:x}=t;qe.post(j("code16.sharp.api.list.state",{entityKey:x,instanceId:m}),{value:n}).then(M=>{O.handleCommandResponse(M.data)}).catch(M=>{var fe,pe;const ge=(fe=M.response)==null?void 0:fe.data;((pe=M.response)==null?void 0:pe.status)===422&&Ea(ge.message,{title:L("modals.state.422.title"),isError:!0})})}async function P(n,m){if(n.metaKey||n.ctrlKey||n.shiftKey)return;const{entityKey:O}=t;n.preventDefault(),t.entityList.config.quickCreationForm?await t.commands.send({hasForm:!0},{postCommand:j("code16.sharp.api.list.command.quick-creation-form.store",{entityKey:m?`${O}:${m.key}`:O}),getForm:j("code16.sharp.api.list.command.quick-creation-form.create",{entityKey:m?`${O}:${m.key}`:O}),query:t.entityList.query,entityKey:m?`${O}:${m.key}`:O}):ma.visit(j("code16.sharp.form.create",{parentUri:ve(),entityKey:m?`${O}:${m.key}`:O}))}async function w(n,m){const{commands:O,entityKey:x}=t;n.confirmation&&l.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await O.send(n,{postCommand:j("code16.sharp.api.list.command.instance",{entityKey:x,instanceId:m,commandKey:n.key}),getForm:j("code16.sharp.api.list.command.instance.form",{entityKey:x,instanceId:m,commandKey:n.key}),query:t.entityList.query,entityKey:x,instanceId:m},{highlightElement:()=>{var M;return(M=l.value)==null?void 0:M.querySelector(`[data-instance-row="${m}"]`)}})}async function te(n){const{commands:m,entityKey:O}=t;await m.send(n,{postCommand:j("code16.sharp.api.list.command.entity",{entityKey:O,commandKey:n.key}),getForm:j("code16.sharp.api.list.command.entity.form",{entityKey:O,commandKey:n.key}),query:{...t.entityList.query,ids:Object.entries(p.value??{}).filter(([x,M])=>M).map(([x,M])=>x)},entityKey:O,onSuccess(){p.value=null}})}async function ae(n){const{entityKey:m,entityList:O,commands:x}=t;l.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await za(O.config.deleteConfirmationText,{highlightElement:()=>{var M;return(M=l.value)==null?void 0:M.querySelector(`[data-instance-row="${n}"]`)}})&&(await qe.delete(j("code16.sharp.api.list.delete",{entityKey:m,instanceId:n})),x.handleCommandResponse({action:"reload"}))}const ne=R(null),U=K(()=>!!ne.value),me=R(),Me=Qt(()=>U.value?me.value.$el:null,K({get:()=>ne.value??[],set:n=>{ne.value=n}}),{animation:150}),ye=R(ct),Xe=Zt("tableBottom");G(ea(Xe,{rootMargin:"0px 0px 500px"}),n=>{n&&ye.value<t.entityList.data.length&&(ye.value+=Dn)});const Lt=K(()=>ne.value??t.entityList.data.slice(0,ye.value));G(U,()=>{U.value?Me.start():Me.stop(),u("reordering",U.value)});function je(){ne.value=[...t.entityList.data]}async function kt(){const{entityKey:n,commands:m}=t;await qe.post(j("code16.sharp.api.list.reorder",{entityKey:n}),{instances:ne.value.map(O=>t.entityList.instanceId(O))}),t.entityList.data.length<=ct?await m.handleCommandResponse({action:"reload"}):(t.entityList.data=[...ne.value],ye.value=t.entityList.data.length),ne.value=null}const St=Ra(),be=K(()=>t.entityList.fields.filter(n=>St.md?!0:!n.hideOnXS));return G([me,()=>t.highlightedInstanceId],()=>{var n;if(me.value&&t.highlightedInstanceId){const m=(n=l.value)==null?void 0:n.querySelector(`[data-instance-row="${t.highlightedInstanceId}"] a`);m&&m.focus()}}),(n,m)=>(c(),y(Ba,{commands:n.commands},{default:o(()=>{var O;return[$("div",{ref_key:"el",ref:l},[f(ta,{"enter-active-class":"transition","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[U.value?(c(),g("div",Ln)):S("",!0)]),_:1}),(O=n.entityList)!=null&&O.pageAlert?(c(),g("div",kn,[f(aa,{class:"mb-4","page-alert":n.entityList.pageAlert},null,8,["page-alert"])])):S("",!0),f(va,{class:D(U.value?"relative z-[12]":"")},{default:o(()=>{var x,M,ge,fe,pe,Ye,Ne;return[f(na,{class:D(U.value||r.value?"sticky":"data-[overflowing-viewport]:sticky"),collapsed:n.collapsed||!n.entityList},{default:o(()=>{var A,b,oe,W;return[$("div",Sn,[$("div",Cn,[T(n.$slots,"card-header"),n.entityList&&t.showCount?(c(),y(e(st),{key:0,class:D(["hidden @2xl/root-card:block text-xs text-muted-foreground ml-4 mr-2 lg:ml-6 whitespace-nowrap",[n.inline?"lg:mr-9":"lg:mr-5"]])},{default:o(()=>{var F;return[(F=n.entityList.query)!=null&&F.search?(c(),g(E,{key:0},[z(_(e(he)("sharp::action_bar.list.search.title",n.entityList.count,{count:n.entityList.count,search:n.entityList.query.search})),1)],64)):(c(),g(E,{key:1},[z(_(e(he)("sharp::action_bar.list.items_count",n.entityList.count,{count:n.entityList.count})),1)],64))]}),_:1},8,["class"])):S("",!0)]),n.entityList?(c(),g(E,{key:0},[n.showReorderButton&&n.entityList.canReorder||n.entityList.canSelect||(A=n.entityList.dropdownEntityCommands(r.value))!=null&&A.flat().length||n.entityList.primaryCommand||n.showCreateButton&&n.entityList.authorizations.create?we((c(),g("div",{key:0,class:D(["ml-auto self-start flex -my-1 justify-end pointer-events-auto gap-2",(n.inline,"")])},[n.showReorderButton&&n.entityList.canReorder&&!r.value?(c(),g(E,{key:0},[U.value?(c(),g(E,{key:0},[f(e(H),{class:"h-8",size:"sm",variant:"outline",onClick:m[0]||(m[0]=F=>ne.value=null)},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1}),f(e(H),{class:"h-8",size:"sm",onClick:kt},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.reorder_button.finish")),1)]),_:1})],64)):(c(),y(e(H),{key:1,class:D(["h-8",(b=n.entityList.dropdownEntityCommands(r.value))!=null&&b.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:je},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.reorder_button")),1)]),_:1},8,["class"]))],64)):S("",!0),n.entityList.canSelect&&!U.value?(c(),g(E,{key:1},[r.value?(c(),y(e(H),{key:0,class:"h-8",size:"sm",variant:"outline",onClick:m[1]||(m[1]=F=>p.value=null)},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1})):(c(),y(e(H),{key:1,class:D(["h-8",(oe=n.entityList.dropdownEntityCommands(r.value))!=null&&oe.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:h},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.select_button")),1)]),_:1},8,["class"]))],64)):S("",!0),(W=n.entityList.dropdownEntityCommands(r.value))!=null&&W.flat().length&&!U.value?(c(),y(e(ke),{key:2},{default:o(()=>[f(e(Se),{"as-child":""},{default:o(()=>[f(e(H),{class:"h-8",variant:r.value?"default":"outline",size:"sm",disabled:U.value},{default:o(()=>[r.value?(c(),g(E,{key:0},[z(_(e(he)("sharp::entity_list.commands.entity.label.selected",Object.values(p.value).filter(Boolean).length,{count:Object.values(p.value).filter(Boolean).length})),1)],64)):(c(),g(E,{key:1},[z(_(e(L)("sharp::entity_list.commands.entity.label")),1)],64)),f(at)]),_:1},8,["variant","disabled"])]),_:1}),f(e(Ce),null,{default:o(()=>[n.showReorderButton&&n.entityList.canReorder&&!r.value?(c(),g(E,{key:0},[f(e($e),{class:"sm:hidden",onClick:je},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.reorder_button")),1)]),_:1}),f(e(Ee),{class:"sm:hidden"})],64)):S("",!0),n.entityList.canSelect&&!r.value?(c(),g(E,{key:1},[f(e($e),{class:"sm:hidden",onClick:h},{default:o(()=>[z(_(e(L)("sharp::action_bar.list.select_button")),1)]),_:1}),f(e(Ee),{class:"sm:hidden"})],64)):S("",!0),f(nt,{commands:n.entityList.dropdownEntityCommands(r.value),selecting:r.value,onSelect:te},null,8,["commands","selecting"])]),_:1})]),_:1})):S("",!0),n.entityList.primaryCommand&&!U.value&&!r.value?(c(),y(e(H),{key:3,class:"h-8",size:"sm",onClick:m[2]||(m[2]=F=>te(n.entityList.primaryCommand))},{default:o(()=>[z(_(n.entityList.primaryCommand.label),1)]),_:1})):S("",!0),n.showCreateButton&&n.entityList.authorizations.create&&!U.value&&!r.value?(c(),g(E,{key:4},[n.entityList.forms&&Object.values(n.entityList.forms).length?(c(),y(e(ke),{key:0},{default:o(()=>[f(e(Se),{"as-child":""},{default:o(()=>[f(e(H),{class:"h-8",size:"sm"},{default:o(()=>[z(_(t.entityList.config.createButtonLabel||e(L)("sharp::action_bar.list.forms_dropdown"))+" ",1),f(at,{class:"opacity-75"})]),_:1})]),_:1}),f(e(Ce),null,{default:o(()=>[(c(!0),g(E,null,le(Object.values(n.entityList.forms).filter(F=>!!F.label),F=>(c(),y(e($e),{as:"a",href:e(j)("code16.sharp.form.create",{parentUri:e(ve)(),entityKey:`${n.entityKey}:${F.key}`}),onClick:J=>P(J,F)},{default:o(()=>[z(_(F.label),1)]),_:2},1032,["href","onClick"]))),256))]),_:1})]),_:1})):(c(),y(e(H),{key:1,as:"a",class:"h-8 gap-1",size:"sm",disabled:U.value||r.value,href:e(j)("code16.sharp.form.create",{parentUri:e(ve)(),entityKey:n.entityKey}),onClick:P},{default:o(()=>[z(_(t.entityList.config.createButtonLabel||e(L)("sharp::action_bar.list.create_button")),1)]),_:1},8,["disabled","href"]))],64)):S("",!0)],2)),[[Le,!n.collapsed]]):S("",!0)],64)):S("",!0)])]}),_:3},8,["class","collapsed"]),n.entityList&&(n.showSearchField&&n.entityList.config.searchable||(x=n.entityList.visibleFilters)!=null&&x.length)?we((c(),g("div",$n,[n.showSearchField&&n.entityList.config.searchable?(c(),g("div",{key:0,class:D(["self-center pointer-events-auto",{"hidden @2xl/root-card:block":(M=n.entityList.visibleFilters)==null?void 0:M.length}])},[f(ut,{inline:"",expanded:q.value,"onUpdate:expanded":m[3]||(m[3]=A=>q.value=A),"entity-list":n.entityList,disabled:U.value||r.value,onSubmit:I},null,8,["expanded","entity-list","disabled"])],2)):S("",!0),(ge=n.entityList.visibleFilters)!=null&&ge.length?(c(),g("div",En,[$("div",zn,[f(e(la),null,{default:o(()=>[f(e(Pa),{"as-child":""},{default:o(()=>[f(e(H),{class:"h-8 gap-1",variant:"outline",disabled:U.value||r.value,size:"sm"},{default:o(()=>[f(e(Aa),{class:"h-3.5 w-3.5"}),$("span",null,_(e(L)("sharp::filters.popover_button")),1)]),_:1},8,["disabled"])]),_:1}),f(e(sa),{onOpenAutoFocus:m[5]||(m[5]=ft(()=>{},["prevent"]))},{default:o(()=>[f(e(ra),null,{default:o(()=>[f(e(oa),null,{default:o(()=>[z(_(e(L)("sharp::filters.popover_button"))+" : "+_(n.title),1)]),_:1})]),_:1}),$("div",In,[n.showSearchField&&n.entityList.config.searchable?(c(),y(ut,{key:0,expanded:q.value,"onUpdate:expanded":m[4]||(m[4]=A=>q.value=A),"entity-list":n.entityList,onSubmit:I},null,8,["expanded","entity-list"])):S("",!0),(c(!0),g(E,null,le(n.entityList.visibleFilters,A=>(c(),y(lt,{key:A.key,filter:A,value:n.filters.currentValues[A.key],disabled:U.value,valuated:n.filters.isValuated([A]),onInput:b=>k(A,b)},null,8,["filter","value","disabled","valuated","onInput"]))),128))]),f(e(ia),{class:"flex-row gap-2 mt-2"},{default:o(()=>[f(e(Je),{"as-child":""},{default:o(()=>{var A;return[f(e(H),{class:"flex-1",variant:"secondary",disabled:!n.filters.isValuated(n.entityList.visibleFilters)&&!((A=n.entityList.query)!=null&&A.search),onClick:C},{default:o(()=>[z(_(e(L)("sharp::filters.reset_all")),1)]),_:1},8,["disabled"])]}),_:1}),f(e(Je),{"as-child":""},{default:o(()=>[f(e(H),{class:"flex-1"},{default:o(()=>[z(_(e(L)("sharp::filters.dialog.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n.filters.isValuated(n.filters.rootFilters)?(c(),y(e(Qe),{key:0,class:"ml-2"},{default:o(()=>[z(_(n.filters.valuatedCount(n.filters.rootFilters)),1)]),_:1})):S("",!0),n.entityList?(c(),y(e(st),{key:1,class:D(["text-xs text-muted-foreground ml-4 mr-2 lg:ml-6 whitespace-nowrap",[n.inline?"lg:mr-9":"lg:mr-5"]])},{default:o(()=>{var A;return[(A=n.entityList.query)!=null&&A.search?(c(),g(E,{key:0},[z(_(e(he)("sharp::action_bar.list.search.title",n.entityList.count,{count:n.entityList.count,search:n.entityList.query.search})),1)],64)):(c(),g(E,{key:1},[z(_(e(he)("sharp::action_bar.list.items_count",n.entityList.count,{count:n.entityList.count})),1)],64))]}),_:1},8,["class"])):S("",!0)]),$("div",{class:D(["hidden @2xl/root-card:contents",{"*:opacity-0 *:pointer-events-none":q.value}])},[(c(!0),g(E,null,le(n.entityList.visibleFilters,A=>(c(),y(lt,{key:A.key,filter:A,value:n.filters.currentValues[A.key],disabled:U.value||r.value,valuated:n.filters.isValuated([A]),inline:"",onInput:b=>k(A,b)},null,8,["filter","value","disabled","valuated","onInput"]))),128)),n.filters.isValuated(n.entityList.visibleFilters)||(fe=n.entityList.query)!=null&&fe.search?(c(),y(e(H),{key:0,class:"h-8 underline underline-offset-4 -ml-2",variant:"ghost",size:"sm",onClick:C},{default:o(()=>[z(_(e(L)("sharp::filters.reset_all")),1)]),_:1})):S("",!0)],2)])):S("",!0)],512)),[[Le,!n.collapsed]]):S("",!0),n.entityList?(c(),g(E,{key:1},[we(f(e(ua),{class:D(((pe=n.entityList.data)==null?void 0:pe.length)>0?"pb-2 !px-0":"")},{default:o(()=>{var A;return[((A=n.entityList.data)==null?void 0:A.length)>0?(c(),y(e(pn),{key:0,class:"w-full data-[scrollbar-x-visible]:pb-4",type:"auto","touch-type":"scroll"},{scrollbar:o(()=>[f(e(wn),null,{default:o(({height:b})=>[f(e(yn),{class:"absolute inset-0 pointer-events-none"},{default:o(({bottom:oe})=>[f(e(gt),{class:"z-20 [@media(hover:hover)]:bg-background pointer-events-auto will-change-transform",orientation:"horizontal",style:re({transform:`translate3d(0, ${Math.max(0,oe-b)*-1}px, 0)`})},null,8,["style"])]),_:2},1024)]),_:1})]),default:o(()=>[f(e(cn),{"no-scroll":"",class:"w-max min-w-full max-w-[768px] md:max-w-[1024px] @3xl:w-full @3xl:max-w-none"},{default:o(()=>[f(e(fn),{class:D(be.value.some(b=>b.label)?"":"collapse [&_tr]:border-0"),role:"rowgroup"},{default:o(()=>[f(e(it),{class:"hover:bg-transparent lg:first:*:pl-6 lg:last:*:pr-6"},{default:o(()=>[r.value?(c(),y(e(Ie),{key:0,scope:"col",class:"w-2","aria-label":"Select..."},{default:o(()=>[f(e(ca),null,{default:o(()=>[f(e(da),{"delay-duration":0},{default:o(()=>[f(e(fa),{"as-child":""},{default:o(()=>[f(e(Ze),{class:"block","model-value":s.value.length===n.entityList.data.length?!0:s.value.length>0?"indeterminate":!1,"onUpdate:modelValue":d,"aria-label":e(L)("sharp::entity_list.select_all_in_page_checkbox.tooltip.select")},null,8,["model-value","aria-label"])]),_:1}),f(e(pa),{side:"top","side-offset":10},{default:o(()=>[s.value.length===n.entityList.data.length?(c(),g(E,{key:0},[z(_(e(L)("sharp::entity_list.select_all_in_page_checkbox.tooltip.unselect")),1)],64)):(c(),g(E,{key:1},[z(_(e(L)("sharp::entity_list.select_all_in_page_checkbox.tooltip.select")),1)],64))]),_:1})]),_:1})]),_:1})]),_:1})):S("",!0),(c(!0),g(E,null,le(be.value,(b,oe)=>(c(),y(e(Ie),{key:b.key,class:"max-w-[70cqw] md:w-[var(--width,auto)]",scope:"col",style:re({"--width":b.width==="fill"?100/be.value.length+"%":b.width?b.width:b.type==="state"?0:null})},{default:o(()=>[b.sortable?(c(),y(e(H),{key:0,variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent",onClick:W=>N(b),"aria-label":X(b)==="asc"?e(L)("sharp::entity_list.sort_asc",{field_label:b.label}):X(b)==="desc"?e(L)("sharp::entity_list.sort_desc",{field_label:b.label}):e(L)("sharp::entity_list.sort_default")},{default:o(()=>[$("span",null,_(b.label),1),n.entityList.currentSort===b.key?(c(),g(E,{key:0},[n.entityList.currentSortDir==="desc"?(c(),y(e(Ta),{key:0,class:"ml-2 h-3.5 w-3.5"})):n.entityList.currentSortDir==="asc"?(c(),y(e(Da),{key:1,class:"ml-2 h-3.5 w-3.5"})):S("",!0)],64)):(c(),y(e(ya),{key:1,class:"ml-2 h-3.5 w-3.5"}))]),_:2},1032,["onClick","aria-label"])):(c(),g(E,{key:1},[z(_(b.label),1)],64))]),_:2},1032,["style"]))),128)),!U.value&&!r.value&&n.entityList.data.some(b=>n.entityList.instanceHasActions(b,n.showEntityState))?(c(),y(e(Ie),{key:1,scope:"col",class:"w-2"},{default:o(()=>m[6]||(m[6]=[$("span",{class:"sr-only"},"Edit",-1)])),_:1})):S("",!0),U.value?(c(),y(e(Ie),{key:2,scope:"col"},{default:o(()=>m[7]||(m[7]=[$("span",{class:"sr-only"},"Select...",-1)])),_:1})):S("",!0)]),_:1})]),_:1},8,["class"]),f(e(dn),{class:"group",role:"rowgroup","data-reordering":U.value?!0:null,"data-selecting":r.value?!0:null,ref_key:"sortableTableBody",ref:me},{default:o(()=>[(c(!0),g(E,null,le(Lt.value,(b,oe)=>(c(),y(e(it),{key:n.entityList.instanceId(b),class:"group/row relative hover:bg-transparent has-[[data-row-action]:hover]:bg-muted/50 has-[[aria-expanded=true]]:bg-muted/50 group-data-[reordering]:cursor-move group-data-[reordering]:hover:bg-muted/50 group-[:has(.sortable-chosen)]:bg-background [&.sortable-chosen]:transition-none lg:first:*:pl-6 lg:last:*:pr-6","data-instance-row":n.entityList.instanceId(b),"data-highlighted":t.highlightedInstanceId&&t.highlightedInstanceId==n.entityList.instanceId(b)?!0:null},{default:o(()=>[r.value&&p.value?(c(),y(e(ie),{key:0},{default:o(()=>[$("label",Rn,[m[8]||(m[8]=$("span",{class:"absolute inset-0 z-20"},null,-1)),f(e(Ze),{class:"block relative z-20","model-value":p.value[n.entityList.instanceId(b)],"aria-label":e(L)("sharp::entity_list.select_checkbox.aria_label"),"onUpdate:modelValue":W=>p.value[n.entityList.instanceId(b)]=W},null,8,["model-value","aria-label","onUpdate:modelValue"])])]),_:2},1024)):S("",!0),(c(!0),g(E,null,le(be.value,(W,F)=>(c(),g(E,{key:W.key},[W.type==="state"&&n.entityList.config.state&&n.showEntityState?(c(),y(e(ie),{key:0,class:"max-w-[70cqw]"},{default:o(()=>[f(e(ke),null,{default:o(()=>[f(e(Se),{"as-child":""},{default:o(()=>{var J;return[f(e(H),{class:"relative disabled:opacity-100 -mx-3",variant:"ghost",size:"sm",disabled:!n.entityList.instanceCanUpdateState(b),"aria-label":e(L)("sharp::entity_list.state_dropdown.aria_label",{current_state_label:(J=n.entityList.instanceStateValue(b))==null?void 0:J.label})},{default:o(()=>[f(e(Qe),{variant:"outline"},{default:o(()=>{var _e;return[f(Ue,{class:"-ml-0.5 mr-1.5","state-value":n.entityList.instanceStateValue(b)},null,8,["state-value"]),z(" "+_((_e=n.entityList.instanceStateValue(b))==null?void 0:_e.label),1)]}),_:2},1024)]),_:2},1032,["disabled","aria-label"])]}),_:2},1024),f(e(Ce),{align:"start","align-offset":-16},{default:o(()=>[(c(!0),g(E,null,le(n.entityList.config.state.values,J=>(c(),y(e(et),{key:J.value,"model-value":J.value==n.entityList.instanceState(b),"onUpdate:modelValue":_e=>_e&&v(J.value,n.entityList.instanceId(b))},{default:o(()=>[f(Ue,{class:"mr-1.5","state-value":J},null,8,["state-value"]),$("span",Pn,_(J.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):(c(),y(e(ie),{key:1,class:"max-w-[70cqw]"},{default:o(()=>[W.html&&typeof b[W.key]=="string"?(c(),y(ba,{key:0,class:D(["break-words [&_a]:relative [&_a]:z-10",{"[&_a]:pointer-events-none":r.value||U.value}]),html:b[W.key]},null,8,["class","html"])):(c(),g(E,{key:1},[z(_(b[W.key]),1)],64)),F===0&&n.entityList.instanceUrl(b)&&!r.value&&!U.value?(c(),y(e(ga),{key:2,class:"absolute inset-0 ring-ring ring-inset focus-visible:outline-none focus-visible:ring-2 focus:group-data-[highlighted]/row:ring-2","data-row-action":"",href:n.entityList.instanceUrl(b)},null,8,["href"])):S("",!0)]),_:2},1024))],64))),128)),f(e(ie),{class:"w-0 pr-6 @5xl:pl-4 hidden group-data-[reordering]:table-cell"},{default:o(()=>[$("div",An,[f(e(_a),{class:"w-4 h-4 opacity-50"})])]),_:1}),n.entityList.instanceHasActions(b,n.showEntityState)?(c(),y(e(ie),{key:1,class:"sticky bg-background pl-1 -right-3 z-10 group-data-[scroll-arrived-right=true]/scroll-area:bg-transparent group-data-[reordering]:hidden group-data-[selecting]:hidden @5xl:pl-4 @5xl:bg-transparent"},{default:o(()=>[m[9]||(m[9]=$("div",{class:"absolute inset-0 -left-2 overflow-hidden","aria-hidden":"true"},null,-1)),m[10]||(m[10]=$("div",{class:"absolute inset-0 -left-4 overflow-hidden pointer-events-none","aria-hidden":"true"},[$("div",{class:"absolute inset-0 left-4 shadow-l-xl dark:border-l shadow-border transition-opacity group-data-[scroll-arrived-right=true]/scroll-area:opacity-0 @5xl:opacity-0","aria-hidden":"true"})],-1)),f(e(ke),null,{default:o(()=>[f(e(Se),{"as-child":""},{default:o(()=>[f(e(H),{class:"[@media(hover:hover)]:pointer-events-auto relative","aria-label":e(L)("sharp::entity_list.commands.instance.label"),variant:"ghost",size:"icon"},{default:o(()=>[f(e(wa),{class:"w-4 h-4"})]),_:1},8,["aria-label"])]),_:1}),f(e(Ce),{side:"bottom",align:"center"},{default:o(()=>{var W;return[n.entityList.config.state&&n.showEntityState&&n.entityList.instanceCanUpdateState(b)?(c(),g(E,{key:0},[f(e(La),null,{default:o(()=>[f(e(ka),null,{default:o(()=>[f(e(Sa),null,{default:o(()=>[z(_(e(L)("sharp::modals.entity_state.edit.title")),1)]),_:1}),f(e(Ca),null,{default:o(()=>[f(e($a),null,{default:o(()=>[(c(!0),g(E,null,le(n.entityList.config.state.values,F=>(c(),y(e(et),{key:F.value,"model-value":F.value==n.entityList.instanceState(b),"onUpdate:modelValue":J=>J&&v(F.value,n.entityList.instanceId(b))},{default:o(()=>[f(Ue,{class:"mr-1.5","state-value":F},null,8,["state-value"]),$("span",Bn,_(F.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),f(e(Ee),{class:"last:hidden"})],64)):S("",!0),f(nt,{commands:n.entityList.instanceCommands(b),onSelect:F=>w(F,n.entityList.instanceId(b))},null,8,["commands","onSelect"]),!n.entityList.config.deleteHidden&&n.entityList.instanceCanDelete(b)?(c(),g(E,{key:1},[(W=n.entityList.instanceCommands(b))!=null&&W.flat().length?(c(),y(e(Ee),{key:0,class:"first:hidden"})):S("",!0),f(e($e),{class:"text-destructive",onClick:F=>ae(n.entityList.instanceId(b))},{default:o(()=>[z(_(e(L)("sharp::action_bar.form.delete_button")),1)]),_:2},1032,["onClick"])],64)):S("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)):n.entityList.data.some(W=>n.entityList.instanceHasActions(W,n.showEntityState))?(c(),y(e(ie),{key:2,class:"w-2"})):S("",!0)]),_:2},1032,["data-instance-row","data-highlighted"]))),128))]),_:1},8,["data-reordering","data-selecting"])]),_:1}),$("div",{ref_key:"tableBottom",ref:Xe},null,512)]),_:1})):(c(),g("div",Tn,_(e(L)("sharp::entity_list.empty_text")),1))]}),_:1},8,["class"]),[[Le,!n.collapsed]]),(Ye=n.entityList.meta)!=null&&Ye.prev_page_url||(Ne=n.entityList.meta)!=null&&Ne.next_page_url?we((c(),y(e(ha),{key:0,class:"px-4 pt-4 lg:px-6"},{default:o(()=>[f(un,{"entity-list":n.entityList,"links-openable":!n.inline,onChange:V},null,8,["entity-list","links-openable"])]),_:1},512)),[[Le,!n.collapsed]]):S("",!0)],64)):S("",!0)]}),_:3},8,["class"])],512)]}),_:3},8,["commands"]))}});class wt{constructor(a,t,l,u){Object.assign(this,a),this.entityKey=t,this.hiddenFilters=l,this.hiddenCommands=u}toData(){return Object.fromEntries(Object.entries({authorizations:this.authorizations,config:this.config,data:this.data,fields:this.fields,forms:this.forms,meta:this.meta,pageAlert:this.pageAlert,query:this.query,filterValues:this.filterValues,title:this.title}).map(([a,t])=>[a,Ia(t)]))}get count(){var a;return((a=this.meta)==null?void 0:a.total)??this.data.length}get currentSort(){var a;return((a=this.query)==null?void 0:a.sort)??this.config.defaultSort}get currentSortDir(){var a;return((a=this.query)==null?void 0:a.dir)??this.config.defaultSortDir}get visibleFilters(){var a,t;return this.hiddenFilters?(a=this.config.filters)==null?void 0:a._root.filter(l=>!(l.key in this.hiddenFilters)):(t=this.config.filters)==null?void 0:t._root}get visibleCommands(){var a,t,l,u;return{instance:(t=(a=this.config.commands)==null?void 0:a.instance)==null?void 0:t.map(p=>p.filter(r=>{var s,d;return!((d=(s=this.hiddenCommands)==null?void 0:s.instance)!=null&&d.includes(r.key))})),entity:(u=(l=this.config.commands)==null?void 0:l.entity)==null?void 0:u.map(p=>p.filter(r=>{var s,d;return!((d=(s=this.hiddenCommands)==null?void 0:s.entity)!=null&&d.includes(r.key))}))}}get allowedEntityCommands(){var a;return((a=this.visibleCommands.entity)==null?void 0:a.map(t=>t.filter(l=>l.authorization)))??[]}get primaryCommand(){return this.allowedEntityCommands.flat().find(a=>a.primary)}get canSelect(){return this.allowedEntityCommands.flat().some(a=>a.instanceSelection)}get canReorder(){return this.config.reorderable&&this.authorizations.reorder&&this.data.length>1}withRefreshedItems(a){return this.data=this.data.map(t=>a.find(l=>this.instanceId(l)===this.instanceId(t))??t),new wt(this,this.entityKey)}dropdownEntityCommands(a){return this.allowedEntityCommands.map(t=>t.filter(l=>a?!!l.instanceSelection:!l.primary))}instanceId(a){return a[this.config.instanceIdAttribute]}instanceUrl(a){const t=this.entityKey,l=this.instanceId(a);if(!this.authorizations.view.includes(l))return null;const u=this.forms&&Object.values(this.forms).find(p=>p.instances.includes(l));return this.config.hasShowPage?j("code16.sharp.show.show",{parentUri:ve(),entityKey:u?`${t}:${u.key}`:t,instanceId:l}):j("code16.sharp.form.edit",{parentUri:ve(),entityKey:u?`${t}:${u.key}`:t,instanceId:l})}instanceState(a){return this.config.state?a[this.config.state.attribute]:null}instanceStateValue(a){var t;return(t=this.config.state)==null?void 0:t.values.find(l=>l.value===this.instanceState(a))}instanceCanUpdateState(a){return Array.isArray(this.config.state.authorization)?this.config.state.authorization.includes(this.instanceId(a)):!!this.config.state.authorization}instanceCanDelete(a){var t;return Array.isArray(this.authorizations.delete)?(t=this.authorizations.delete)==null?void 0:t.includes(this.instanceId(a)):!!this.authorizations.delete}instanceCommands(a){var t,l;return(l=(t=this.visibleCommands)==null?void 0:t.instance)==null?void 0:l.map(u=>u.filter(p=>Array.isArray(p.authorization)?p.authorization.includes(this.instanceId(a)):p.authorization))}instanceHasActions(a,t){var l;return((l=this.instanceCommands(a))==null?void 0:l.flat().length)>0||this.config.state&&t&&this.instanceCanUpdateState(a)||!this.config.deleteHidden&&this.instanceCanDelete(a)}}function Hn(){var t,l;const i=(t=tt().props.query)==null?void 0:t.highlighted_entity_key,a=(l=tt().props.query)==null?void 0:l.highlighted_instance_id;return{highlightedEntityKey:i,highlightedInstanceId:a}}export{wt as E,Fn as _,Ue as a,Hn as u};

import{d as g,r as n,al as L,aA as V,aB as w,au as C,c as S,w as o,aC as q,o as E,a as u,j as d,V as $,u as l,Q as k,b as B,t as I,aN as c}from"./sharp-CPDnuTsa.js";import{E as f,u as N,_ as x}from"./useEntityListHighlightedItem-N9rMBX57.js";import{_ as F}from"./Title.vue_vue_type_script_setup_true_lang-DaD9Q4qn.js";import{s as m}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-CWjd3XlO.js";import{_ as K}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CyCNHV2B.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-BvN_855Z.js";const Q={class:"@container"},U=g({__name:"EntityList",props:{entityList:{},breadcrumb:{}},setup(p){const a=p,s=n().params.entityKey,e=L(new f(a.entityList,s)),r=V(e.value.config.filters,e.value.filterValues),y=w("entityList",{refresh:(t,{formModal:i})=>{e.value=e.value.withRefreshedItems(t.items),i.shouldReopen&&i.reopen()}}),{highlightedEntityKey:R,highlightedInstanceId:h}=N();C(()=>a.entityList,()=>{e.value=new f(a.entityList,s),r.update(a.entityList.config.filters,a.entityList.filterValues)});function _(t){m(e.value.query)!==m(t)&&c.visit(n("code16.sharp.list",{entityKey:s})+m(t),{preserveState:!0,preserveScroll:!1})}function b(t,i){c.post(n("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:r.nextValues(t,i),query:e.value.query},{preserveState:!0,preserveScroll:!1})}function v(){c.post(n("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:r.defaultValues(r.rootFilters),query:{...e.value.query,search:null}},{preserveState:!0,preserveScroll:!1})}return(t,i)=>(E(),S(q,null,{breadcrumb:o(()=>[u(K,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"])]),default:o(()=>[u(F,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"]),d("div",Q,[d("div",{class:$(e.value.pageAlert?"pt-4":"pt-6 @3xl:pt-10")},[u(x,{"entity-key":l(s),"entity-list":e.value,filters:l(r),commands:l(y),title:t.breadcrumb.items[0].label,"highlighted-instance-id":l(h),onReset:v,onFilterChange:b,"onUpdate:query":_},{"card-header":o(()=>[u(l(k),{class:"line-clamp-2 py-1 -my-1 min-w-0"},{default:o(()=>[B(I(e.value.title),1)]),_:1})]),_:1},8,["entity-key","entity-list","filters","commands","title","highlighted-instance-id"])],2)])]),_:1}))}});export{U as default};

import{b1 as Pe,d as P,W as L,aJ as Ne,b2 as Vt,b3 as J,o as d,c as m,w as c,q as V,e as t,av as re,P as de,x as Ye,y as O,b4 as pe,Z as Y,v as x,i as E,b5 as Ht,aM as ie,a as h,b6 as Xe,b7 as _t,aN as qe,b8 as Ot,aK as Me,b9 as Wt,ba as Ft,A as w,j as I,b as T,F as B,t as k,_ as z,k as M,bb as Mt,D as Ut,G as Kt,H as se,B as Nt,bc as Yt,V as H,I as Xt,z as ee,bd as jt,be as xt,m as Gt,bf as Qt,bg as Jt,n as wt,bh as Zt,bi as ea,bj as ta,aV as aa,bk as St,bl as j,bm as oe,bn as kt,bo as la,bp as na,bq as tt,br as Lt,bs as Ct,bt as ge,bu as sa,bv as ra,aI as oa,a6 as $t,aT as ia,bw as ua,bx as at,aD as Ue,by as ca,a3 as da,bz as pa,bA as fa,ae as ha,ah as va,bB as me,af as Ce,az as $e,aj as Ee,ak as ze,al as Ae,au as Ie,at as Re,b0 as ma,aX as ya,aY as ba,aZ as ga,a_ as _a,a$ as lt,S as wa,bC as nt,bD as st,bE as rt,K as ot,bF as it,T as Sa,ag as ka,r as ne,a0 as La,ab as Oe,bG as Ca,ac as $a,am as ut,aE as Ea,ai as za,a5 as Aa,bH as Ia,bI as Ra,ao as Ba,ap as Ta,aq as Pa,ar as qa,as as Da,aA as Va,aB as Ha,bJ as ct}from"./sharp-DHEmV3wB.js";import{u as Oa,a as dt,b as pt,c as Wa,F as Fa,_ as Ma,d as ft}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-BvBSOo83.js";import{_ as ht}from"./CardDescription.vue_vue_type_script_setup_true_lang-BsgG7Tpl.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Pe("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Pe("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Pe("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Pe("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),[Z,Xa]=Ye("ScrollAreaRoot");var ja=P({__name:"ScrollAreaRoot",props:{type:{type:String,required:!1,default:"hover"},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1,default:600},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){const a=o,s=L(0),u=L(0),p=L(),r=L(),n=L(),i=L(),f=L(!1),y=L(!1),{type:C,dir:_,scrollHideDelay:S}=Ne(a),R=Vt(_);function N(){var $;($=p.value)==null||$.scrollTo({top:0})}function U(){var $;($=p.value)==null||$.scrollTo({top:0,left:0})}e({viewport:p,scrollTop:N,scrollTopLeft:U});const{forwardRef:v,currentElement:A}=J();return Xa({type:C,dir:R,scrollHideDelay:S,scrollArea:A,viewport:p,onViewportChange:$=>{p.value=$||void 0},content:r,onContentChange:$=>{r.value=$},scrollbarX:n,scrollbarXEnabled:f,scrollbarY:i,scrollbarYEnabled:y,onScrollbarXChange:$=>{n.value=$||void 0},onScrollbarYChange:$=>{i.value=$||void 0},onScrollbarXEnabledChange:$=>{f.value=$},onScrollbarYEnabledChange:$=>{y.value=$},onCornerWidthChange:$=>{s.value=$},onCornerHeightChange:$=>{u.value=$}}),($,te)=>(d(),m(t(de),{ref:t(v),"as-child":a.asChild,as:$.as,dir:t(R),style:re({position:"relative","--reka-scroll-area-corner-width":`${s.value}px`,"--reka-scroll-area-corner-height":`${u.value}px`})},{default:c(()=>[V($.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),xa=ja,Ga=P({__name:"ScrollAreaCornerImpl",setup(o){const e=Z(),a=L(0),s=L(0),u=O(()=>!!a.value&&!!s.value);function p(){var i;const n=((i=e.scrollbarX.value)==null?void 0:i.offsetHeight)||0;e.onCornerHeightChange(n),s.value=n}function r(){var i;const n=((i=e.scrollbarY.value)==null?void 0:i.offsetWidth)||0;e.onCornerWidthChange(n),a.value=n}return pe(e.scrollbarX.value,p),pe(e.scrollbarY.value,r),Y(()=>e.scrollbarX.value,p),Y(()=>e.scrollbarY.value,r),(n,i)=>{var f;return u.value?(d(),m(t(de),x({key:0,style:{width:`${a.value}px`,height:`${s.value}px`,position:"absolute",right:t(e).dir.value==="ltr"?0:void 0,left:t(e).dir.value==="rtl"?0:void 0,bottom:0}},(f=n.$parent)==null?void 0:f.$props),{default:c(()=>[V(n.$slots,"default")]),_:3},16,["style"])):E("v-if",!0)}}}),Qa=Ga,Ja=P({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o,{forwardRef:a}=J(),s=Z(),u=O(()=>!!s.scrollbarX.value&&!!s.scrollbarY.value),p=O(()=>s.type.value!=="scroll"&&u.value);return(r,n)=>p.value?(d(),m(Qa,x({key:0},e,{ref:t(a)}),{default:c(()=>[V(r.$slots,"default")]),_:3},16)):E("v-if",!0)}}),Za=Ja;function Et(o,e){return a=>{if(o[0]===o[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(o[1]-o[0]);return e[0]+s*(a-o[0])}}function De(o){const e=zt(o.viewport,o.content),a=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,s=(o.scrollbar.size-a)*e;return Math.max(s,18)}function zt(o,e){const a=o/e;return Number.isNaN(a)?0:a}function el(o,e=()=>{}){let a={left:o.scrollLeft,top:o.scrollTop},s=0;return function u(){const p={left:o.scrollLeft,top:o.scrollTop},r=a.left!==p.left,n=a.top!==p.top;(r||n)&&e(),a=p,s=window.requestAnimationFrame(u)}(),()=>window.cancelAnimationFrame(s)}function vt(o,e,a="ltr"){const s=De(e),u=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,p=e.scrollbar.size-u,r=e.content-e.viewport,n=p-s,i=a==="ltr"?[0,r]:[r*-1,0],f=Ht(o,i[0],i[1]);return Et([0,r],[0,n])(f)}function Be(o){return o?Number.parseInt(o,10):0}function tl(o,e,a,s="ltr"){const u=De(a),p=u/2,r=e||p,n=u-r,i=a.scrollbar.paddingStart+r,f=a.scrollbar.size-a.scrollbar.paddingEnd-n,y=a.content-a.viewport,C=s==="ltr"?[0,y]:[y*-1,0];return Et([i,f],C)(o)}function mt(o,e){return o>0&&o<e}var al=P({__name:"ScrollAreaScrollbarX",setup(o){const e=Z(),a=He(),{forwardRef:s,currentElement:u}=J();ie(()=>{u.value&&e.onScrollbarXChange(u.value)});const p=O(()=>a.sizes.value);return(r,n)=>(d(),m(It,{ref:t(s),"is-horizontal":!0,"data-orientation":"horizontal",style:re({bottom:0,left:t(e).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:t(e).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":p.value?`${t(De)(p.value)}px`:void 0}),onOnDragScroll:n[0]||(n[0]=i=>t(a).onDragScroll(i.x))},{default:c(()=>[V(r.$slots,"default")]),_:3},8,["style"]))}}),ll=al,nl=P({__name:"ScrollAreaScrollbarY",setup(o){const e=Z(),a=He(),{forwardRef:s,currentElement:u}=J();ie(()=>{u.value&&e.onScrollbarYChange(u.value)});const p=O(()=>a.sizes.value);return(r,n)=>(d(),m(It,{ref:t(s),"is-horizontal":!1,"data-orientation":"vertical",style:re({top:0,right:t(e).dir.value==="ltr"?0:void 0,left:t(e).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":p.value?`${t(De)(p.value)}px`:void 0}),onOnDragScroll:n[0]||(n[0]=i=>t(a).onDragScroll(i.y))},{default:c(()=>[V(r.$slots,"default")]),_:3},8,["style"]))}}),sl=nl,rl=P({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean,required:!1}},setup(o){const e=Z(),a=Ve(),{forwardRef:s}=J(),u=L(!1),p=_t(()=>{if(e.viewport.value){const r=e.viewport.value.offsetWidth<e.viewport.value.scrollWidth,n=e.viewport.value.offsetHeight<e.viewport.value.scrollHeight;u.value=a.isHorizontal.value?r:n}},10);return ie(()=>p()),pe(e.viewport,p),pe(e.content,p),(r,n)=>(d(),m(t(Xe),{present:r.forceMount||u.value},{default:c(()=>[h(je,x(r.$attrs,{ref:t(s),"data-state":u.value?"visible":"hidden"}),{default:c(()=>[V(r.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),At=rl,ol=P({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean,required:!1}},setup(o){const e=Z(),{forwardRef:a}=J();let s;const u=L(!1);function p(){window.clearTimeout(s),u.value=!0}function r(){s=window.setTimeout(()=>{u.value=!1},e.scrollHideDelay.value)}return ie(()=>{const n=e.scrollArea.value;n&&(n.addEventListener("pointerenter",p),n.addEventListener("pointerleave",r))}),qe(()=>{const n=e.scrollArea.value;n&&(window.clearTimeout(s),n.removeEventListener("pointerenter",p),n.removeEventListener("pointerleave",r))}),(n,i)=>(d(),m(t(Xe),{present:n.forceMount||u.value},{default:c(()=>[h(At,x(n.$attrs,{ref:t(a),"data-state":u.value?"visible":"hidden"}),{default:c(()=>[V(n.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),il=ol,ul=P({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean,required:!1}},setup(o){const e=Z(),a=Ve(),{forwardRef:s}=J(),{state:u,dispatch:p}=Ot("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}}),r=O(()=>u.value!=="hidden");Me(i=>{if(u.value==="idle"){const f=window.setTimeout(()=>p("HIDE"),e.scrollHideDelay.value);i(()=>{window.clearTimeout(f)})}});const n=_t(()=>p("SCROLL_END"),100);return Me(i=>{const f=e.viewport.value,y=a.isHorizontal.value?"scrollLeft":"scrollTop";if(f){let C=f[y];const _=()=>{const S=f[y];C!==S&&(p("SCROLL"),n()),C=S};f.addEventListener("scroll",_),i(()=>{f.removeEventListener("scroll",_)})}}),(i,f)=>(d(),m(t(Xe),{present:i.forceMount||r.value},{default:c(()=>[h(je,x(i.$attrs,{ref:t(s),"data-state":r.value?"visible":"hidden"}),{default:c(()=>[V(i.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),cl=ul;const[Ve,dl]=Ye("ScrollAreaScrollbar");var pl=P({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(o){const e=o,{forwardRef:a}=J(),s=Z(),u=O(()=>e.orientation==="horizontal");Y(u,()=>{u.value?s.onScrollbarXEnabledChange(!0):s.onScrollbarYEnabledChange(!0)},{immediate:!0}),qe(()=>{s.onScrollbarXEnabledChange(!1),s.onScrollbarYEnabledChange(!1)});const{orientation:p,forceMount:r,asChild:n,as:i}=Ne(e);return dl({orientation:p,forceMount:r,isHorizontal:u,as:i,asChild:n}),(f,y)=>t(s).type.value==="hover"?(d(),m(il,x({key:0},f.$attrs,{ref:t(a),"force-mount":t(r)}),{default:c(()=>[V(f.$slots,"default")]),_:3},16,["force-mount"])):t(s).type.value==="scroll"?(d(),m(cl,x({key:1},f.$attrs,{ref:t(a),"force-mount":t(r)}),{default:c(()=>[V(f.$slots,"default")]),_:3},16,["force-mount"])):t(s).type.value==="auto"?(d(),m(At,x({key:2},f.$attrs,{ref:t(a),"force-mount":t(r)}),{default:c(()=>[V(f.$slots,"default")]),_:3},16,["force-mount"])):t(s).type.value==="always"?(d(),m(je,x({key:3},f.$attrs,{ref:t(a),"data-state":"visible"}),{default:c(()=>[V(f.$slots,"default")]),_:3},16)):E("v-if",!0)}}),fl=pl;const[He,hl]=Ye("ScrollAreaScrollbarVisible");var vl=P({__name:"ScrollAreaScrollbarVisible",setup(o){const e=Z(),a=Ve(),{forwardRef:s}=J(),u=L({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=O(()=>{const v=zt(u.value.viewport,u.value.content);return v>0&&v<1}),r=L(),n=L(0);function i(v,A){if(S.value){const $=e.viewport.value.scrollLeft+v.deltaY;e.viewport.value.scrollLeft=$,mt($,A)&&v.preventDefault()}else{const $=e.viewport.value.scrollTop+v.deltaY;e.viewport.value.scrollTop=$,mt($,A)&&v.preventDefault()}}function f(v,A){S.value?n.value=A.x:n.value=A.y}function y(v){n.value=0}function C(v){u.value=v}function _(v,A){return tl(v,n.value,u.value,A)}const S=O(()=>a.isHorizontal.value);function R(v){S.value?e.viewport.value.scrollLeft=_(v,e.dir.value):e.viewport.value.scrollTop=_(v)}function N(){if(S.value){if(e.viewport.value&&r.value){const v=e.viewport.value.scrollLeft,A=vt(v,u.value,e.dir.value);r.value.style.transform=`translate3d(${A}px, 0, 0)`}}else if(e.viewport.value&&r.value){const v=e.viewport.value.scrollTop,A=vt(v,u.value);r.value.style.transform=`translate3d(0, ${A}px, 0)`}}function U(v){r.value=v}return hl({sizes:u,hasThumb:p,handleWheelScroll:i,handleThumbDown:f,handleThumbUp:y,handleSizeChange:C,onThumbPositionChange:N,onThumbChange:U,onDragScroll:R}),(v,A)=>S.value?(d(),m(ll,x({key:0},v.$attrs,{ref:t(s)}),{default:c(()=>[V(v.$slots,"default")]),_:3},16)):(d(),m(sl,x({key:1},v.$attrs,{ref:t(s)}),{default:c(()=>[V(v.$slots,"default")]),_:3},16))}}),je=vl,ml=P({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean,required:!0}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(o,{emit:e}){const a=o,s=e,u=Z(),p=He(),r=Ve(),{forwardRef:n,currentElement:i}=J(),f=L(""),y=L();function C(v){var A,$;if(y.value){const te=v.clientX-((A=y.value)==null?void 0:A.left),ae=v.clientY-(($=y.value)==null?void 0:$.top);s("onDragScroll",{x:te,y:ae})}}function _(v){v.button===0&&(v.target.setPointerCapture(v.pointerId),y.value=i.value.getBoundingClientRect(),f.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",u.viewport&&(u.viewport.value.style.scrollBehavior="auto"),C(v))}function S(v){C(v)}function R(v){const A=v.target;A.hasPointerCapture(v.pointerId)&&A.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=f.value,u.viewport&&(u.viewport.value.style.scrollBehavior=""),y.value=void 0}function N(v){var ae;const A=v.target,$=(ae=i.value)==null?void 0:ae.contains(A),te=p.sizes.value.content-p.sizes.value.viewport;$&&p.handleWheelScroll(v,te)}ie(()=>{document.addEventListener("wheel",N,{passive:!1})}),qe(()=>{document.removeEventListener("wheel",N)});function U(){var v,A,$,te,ae;i.value&&(a.isHorizontal?p.handleSizeChange({content:((v=u.viewport.value)==null?void 0:v.scrollWidth)??0,viewport:((A=u.viewport.value)==null?void 0:A.offsetWidth)??0,scrollbar:{size:i.value.clientWidth??0,paddingStart:Be(getComputedStyle(i.value).paddingLeft),paddingEnd:Be(getComputedStyle(i.value).paddingRight)}}):p.handleSizeChange({content:(($=u.viewport.value)==null?void 0:$.scrollHeight)??0,viewport:((te=u.viewport.value)==null?void 0:te.offsetHeight)??0,scrollbar:{size:((ae=i.value)==null?void 0:ae.clientHeight)??0,paddingStart:Be(getComputedStyle(i.value).paddingTop),paddingEnd:Be(getComputedStyle(i.value).paddingBottom)}}),p.onThumbPositionChange())}return pe(i,U),pe(u.content,U),(v,A)=>(d(),m(t(de),{ref:t(n),style:{position:"absolute"},"data-scrollbarimpl":"",as:t(r).as.value,"as-child":t(r).asChild.value,onPointerdown:_,onPointermove:S,onPointerup:R},{default:c(()=>[V(v.$slots,"default")]),_:3},8,["as","as-child"]))}}),It=ml,yl=P({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const e=o,a=Z(),s=He();function u(_){const R=_.target.getBoundingClientRect(),N=_.clientX-R.left,U=_.clientY-R.top;s.handleThumbDown(_,{x:N,y:U})}function p(_){s.handleThumbUp(_)}const{forwardRef:r,currentElement:n}=J(),i=L(),f=O(()=>a.viewport.value);function y(){if(!i.value){const _=el(f.value,s.onThumbPositionChange);i.value=_,s.onThumbPositionChange()}}const C=O(()=>s.sizes.value);return Wt(C,()=>{s.onThumbChange(n.value),f.value&&(s.onThumbPositionChange(),f.value.addEventListener("scroll",y))}),qe(()=>{var _;f.value.removeEventListener("scroll",y),(_=a.viewport.value)==null||_.removeEventListener("scroll",y)}),(_,S)=>(d(),m(t(de),{ref:t(r),"data-state":t(s).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":e.asChild,as:_.as,onPointerdown:u,onPointerup:p},{default:c(()=>[V(_.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),bl=yl,gl=P({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o,{expose:e}){const a=o,{nonce:s}=Ne(a),u=Ft(s),p=Z(),r=L();ie(()=>{p.onViewportChange(r.value),p.onContentChange(i.value)}),e({viewportElement:r});const{forwardRef:n,currentElement:i}=J();return(f,y)=>(d(),w(B,null,[I("div",x({ref_key:"viewportElement",ref:r,"data-reka-scroll-area-viewport":"",style:{overflowX:t(p).scrollbarXEnabled.value?"scroll":"hidden",overflowY:t(p).scrollbarYEnabled.value?"scroll":"hidden"}},f.$attrs,{tabindex:0}),[h(t(de),{ref:t(n),style:re({minWidth:t(p).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":a.asChild,as:f.as},{default:c(()=>[V(f.$slots,"default")]),_:3},8,["style","as-child","as"])],16),h(t(de),{as:"style",nonce:t(u)},{default:c(()=>y[0]||(y[0]=[T(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),_l=gl;const wl={class:"flex justify-center w-full gap-x-6 lg:gap-x-8","aria-label":"Pagination"},Sl={class:"flex gap-2"},kl={class:"sr-only"},Ll={class:"sr-only"},Cl={class:"flex min-w-[100px] gap-2 items-center justify-center text-sm font-medium"},$l=["href"],El={class:"flex gap-2"},zl={class:"sr-only"},Al={class:"sr-only"},Il=P({__name:"EntityListPagination",props:{entityList:{},linksOpenable:{type:Boolean}},emits:["change"],setup(o,{emit:e}){const a=o,s=e;function u(r,n=!1){if(a.linksOpenable&&(r.metaKey||r.ctrlKey||r.shiftKey||r.altKey)){r.stopPropagation();return}const i=r.target.closest("a").href;i&&!n&&(s("change",new URL(i).searchParams.get("page")),r.preventDefault())}function p(r){const n=new URL(a.entityList.meta.first_page_url);return n.searchParams.set("page",String(r)),n.toString()}return(r,n)=>(d(),w("nav",wl,[I("div",Sl,[h(t(M),{as:r.entityList.meta.prev_page_url?"a":"button",class:"hidden sm:flex",size:"icon",variant:"outline",href:r.entityList.meta.first_page_url,disabled:!r.entityList.meta.prev_page_url,onClick:u},{default:c(()=>[h(t(Na),{class:"h-4 w-4"}),I("span",kl,k(t(z)("sharp::entity_list.pagination.first")),1)]),_:1},8,["as","href","disabled"]),h(t(M),{as:r.entityList.meta.prev_page_url?"a":"button",size:"icon",variant:"outline",href:r.entityList.meta.prev_page_url,disabled:!r.entityList.meta.prev_page_url,onClick:u},{default:c(()=>[h(t(Mt),{class:"h-4 w-4"}),I("span",Ll,k(t(z)("sharp::entity_list.pagination.previous")),1)]),_:1},8,["as","href","disabled"])]),I("div",Cl,[r.entityList.meta.last_page?(d(),w(B,{key:0},[I("span",null,k(t(z)("sharp::entity_list.pagination.current").split(":current_page")[0]),1),h(t(Nt),{"model-value":String(r.entityList.meta.current_page),"onUpdate:modelValue":n[1]||(n[1]=i=>r.$emit("change",i))},{default:c(()=>[h(t(Ut),{class:"w-10 justify-center [&_svg]:hidden","aria-label":t(z)("sharp::entity_list.pagination.select.aria_label")},{default:c(()=>[T(k(r.entityList.meta.current_page),1)]),_:1},8,["aria-label"]),h(t(Kt),{"align-offset":-22},{default:c(()=>[(d(!0),w(B,null,se(r.entityList.meta.last_page,i=>(d(),m(t(Xt),{value:String(i)},{default:c(()=>[r.linksOpenable?(d(),w("a",{key:0,class:"absolute inset-0",href:p(i),onPointerup:n[0]||(n[0]=f=>u(f,!0))},null,40,$l)):E("",!0),T(" "+k(i),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1},8,["model-value"]),I("span",null,k(t(z)("sharp::entity_list.pagination.current",{last_page:r.entityList.meta.last_page}).split(":current_page")[1]),1)],64)):(d(),w(B,{key:1},[T(k(t(z)("sharp::entity_list.pagination.current_simple").replace(":current_page",r.entityList.meta.current_page+"")),1)],64))]),I("div",El,[h(t(M),{as:r.entityList.meta.next_page_url?"a":"button",size:"icon",variant:"outline",href:r.entityList.meta.next_page_url,disabled:!r.entityList.meta.next_page_url,onClick:u},{default:c(()=>[I("span",zl,k(t(z)("sharp::entity_list.pagination.next")),1),h(t(Yt),{class:"h-4 w-4"})]),_:1},8,["as","href","disabled"]),h(t(M),{as:r.entityList.meta.next_page_url?"a":"button",class:H(["hidden sm:flex",r.entityList.meta.last_page_url?"":"invisible"]),size:"icon",variant:"outline",href:r.entityList.meta.last_page_url,disabled:!r.entityList.meta.next_page_url,onClick:u},{default:c(()=>[h(t(Ya),{class:"h-4 w-4"}),I("span",Al,k(t(z)("sharp::entity_list.pagination.last")),1)]),_:1},8,["as","class","href","disabled"])])]))}}),Ke=P({__name:"StateIcon",props:{stateValue:{}},setup(o){return(e,a)=>{var s;return d(),w("div",{class:"relative rounded-full",style:re([{"--color":((s=e.stateValue)==null?void 0:s.color)??"black"},{"--border":"oklch(from var(--color) .9 min(calc(c * .2), 0.03) h)"}])},a[0]||(a[0]=[I("div",{class:"h-1 w-1 rounded-full bg-(--color) outline outline-(--border)"},null,-1)]),4)}}}),Rl=P({__name:"Table",props:{class:{},noScroll:{type:Boolean}},setup(o){const e=o;return(a,s)=>(d(),w("div",{class:H(["relative",{"w-full overflow-auto":!a.noScroll}])},[I("table",{class:H(t(ee)("w-full caption-bottom text-sm",e.class))},[V(a.$slots,"default")],2)],2))}}),Bl=P({__name:"TableBody",props:{class:{}},setup(o){const e=o;return(a,s)=>(d(),w("tbody",{class:H(t(ee)("[&_tr:last-child]:border-0",e.class))},[V(a.$slots,"default")],2))}}),ye=P({__name:"TableCell",props:{class:{}},setup(o){const e=o;return(a,s)=>(d(),w("td",{class:H(t(ee)("px-3 py-4 align-middle first:pl-4 last:pr-4",e.class))},[V(a.$slots,"default")],2))}}),Te=P({__name:"TableHead",props:{class:{}},setup(o){const e=o;return(a,s)=>(d(),w("th",{class:H(t(ee)("h-12 px-3 text-left align-middle font-medium text-muted-foreground",e.class))},[V(a.$slots,"default")],2))}}),Tl=P({__name:"TableHeader",props:{class:{}},setup(o){const e=o;return(a,s)=>(d(),w("thead",{class:H(t(ee)("[&_tr]:border-b",e.class))},[V(a.$slots,"default")],2))}}),yt=P({__name:"TableRow",props:{class:{}},setup(o){const e=o;return(a,s)=>(d(),w("tr",{class:H(t(ee)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e.class))},[V(a.$slots,"default")],2))}}),bt=P({__name:"EntityListSearch",props:{entityList:{},expanded:{type:Boolean},inline:{type:Boolean},disabled:{type:Boolean}},emits:["submit","update:expanded"],setup(o,{emit:e}){var _;const a=o,s=e,u=L(),p=L(),{focused:r}=jt(u),{pressed:n}=xt({target:u}),i=L(((_=a.entityList.query)==null?void 0:_.search)??"");let f="";Y(r,()=>{var S,R;r.value?(f&&(i.value=f,f=""),n.value?Y(n,()=>{n.value||s("update:expanded",!0)},{once:!0}):s("update:expanded",!0)):n.value||(f=(S=a.entityList.query)!=null&&S.search?"":i.value,i.value=(R=a.entityList.query)==null?void 0:R.search,s("update:expanded",!1))}),Y(()=>a.entityList,()=>{var S;i.value=((S=a.entityList.query)==null?void 0:S.search)??"",s("update:expanded",!1)});function y(){s("update:expanded",!1),s("submit",i.value)}function C(){a.expanded||s("update:expanded",!0)}return(S,R)=>{var N,U;return d(),w("form",{onSubmit:wt(y,["prevent"]),ref_key:"el",ref:u},[I("div",{class:H(["relative z-1",[S.inline?"h-8 w-[150px] @5xl/root-card:w-[200px]":""]])},[I("div",{class:H(["top-0 left-0 group flex gap-3",t(ee)(S.inline?"absolute h-8":"flex-col",S.inline&&S.expanded?"-mr-[100px]":"")])},[I("div",{class:H(["relative",[S.inline?"":"w-full"]])},[h(t(Gt),{modelValue:i.value,"onUpdate:modelValue":R[0]||(R[0]=v=>i.value=v),class:H(t(ee)("w-full pl-8 h-9",{"h-8 w-[150px] @5xl/root-card:w-[200px]":S.inline,"sm:w-[300px]!":S.inline&&S.expanded,"pr-8":(N=a.entityList.query)==null?void 0:N.search})),disabled:S.disabled,placeholder:t(z)("sharp::action_bar.list.search.placeholder"),"aria-label":t(z)("sharp::action_bar.list.search.placeholder"),type:"search",ref_key:"input",ref:p,onInput:C},null,8,["modelValue","class","disabled","placeholder","aria-label"]),h(t(Qt),{class:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(U=a.entityList.query)!=null&&U.search?(d(),m(t(M),{key:0,type:"button",class:"absolute right-0 top-0 h-full",size:"sm",variant:"ghost","aria-label":t(z)("sharp::action_bar.list.search.clear.aria_label"),onClick:R[1]||(R[1]=v=>S.$emit("submit",null))},{default:c(()=>[h(t(Jt),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["aria-label"])):E("",!0)],2),h(t(M),{type:"submit",class:H(t(ee)("h-8 hidden",S.expanded?"inline-flex":"")),size:"sm"},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.search.button")),1)]),_:1},8,["class"])],2)],2)],544)}}}),Rt=P({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const e=o,a=O(()=>{const{class:s,...u}=e;return u});return(s,u)=>(d(),m(t(fl),x(a.value,{class:t(ee)("flex touch-none select-none transition-colors",s.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",s.orientation==="horizontal"&&"h-4 flex-col border-t border-t-transparent p-1",e.class)}),{default:c(()=>[h(t(bl),{class:"relative flex-1 rounded-full bg-muted-foreground/50 hover:bg-muted-foreground"},{default:c(()=>u[0]||(u[0]=[I("div",{class:"absolute -inset-1.5 -top-4"},null,-1)])),_:1})]),_:1},16,["class"]))}}),Pl=P({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{},touchType:{}},setup(o){const e=o,a=O(()=>{const{class:n,...i}=e;return i}),s=Zt("(hover: none)"),u=L(),{arrivedState:p,measure:r}=ea(()=>{var n;return(n=u.value)==null?void 0:n.viewportElement});return Y(aa(()=>{var n;return(n=u.value)==null?void 0:n.viewportElement}).width,ta(()=>{r()},50,!0,!0)),Y(()=>{var n;return(n=u.value)==null?void 0:n.viewportElement},()=>{var n;(n=u.value)!=null&&n.viewportElement&&(u.value.viewportElement.tabIndex=-1)}),(n,i)=>(d(),m(t(xa),x(a.value,{type:t(s)?e.touchType:e.type,class:t(ee)("group/scroll-area relative overflow-hidden",e.class),"data-scroll-arrived-right":t(p).right?!0:null,"data-scrollbar-x-visible":!t(p).left||!t(p).right?!0:null}),{default:c(()=>[h(t(_l),{class:"h-full w-full rounded-[inherit]",ref_key:"viewport",ref:u},{default:c(()=>[V(n.$slots,"default")]),_:3},512),V(n.$slots,"scrollbar",{},()=>[h(Rt),h(t(Za))])]),_:3},16,["type","class","data-scroll-arrived-right","data-scrollbar-x-visible"]))}}),_e=Lt?window:void 0;function fe(o){var e;const a=j(o);return(e=a==null?void 0:a.$el)!=null?e:a}function be(...o){const e=[],a=()=>{e.forEach(n=>n()),e.length=0},s=(n,i,f,y)=>(n.addEventListener(i,f,y),()=>n.removeEventListener(i,f,y)),u=O(()=>{const n=oe(j(o[0])).filter(i=>i!=null);return n.every(i=>typeof i!="string")?n:void 0}),p=kt(()=>{var n,i;return[(i=(n=u.value)==null?void 0:n.map(f=>fe(f)))!=null?i:[_e].filter(f=>f!=null),oe(j(u.value?o[1]:o[0])),oe(t(u.value?o[2]:o[1])),j(u.value?o[3]:o[2])]},([n,i,f,y])=>{if(a(),!(n!=null&&n.length)||!(i!=null&&i.length)||!(f!=null&&f.length))return;const C=Ct(y)?{...y}:y;e.push(...n.flatMap(_=>i.flatMap(S=>f.map(R=>s(_,S,R,C)))))},{flush:"post"}),r=()=>{p(),a()};return ge(a),r}function ql(){const o=L(!1),e=oa();return e&&ie(()=>{o.value=!0},e),o}function xe(o){const e=ql();return O(()=>(e.value,!!o()))}function Dl(o,e,a={}){const{window:s=_e,...u}=a;let p;const r=xe(()=>s&&"MutationObserver"in s),n=()=>{p&&(p.disconnect(),p=void 0)},i=O(()=>{const _=j(o),S=oe(_).map(fe).filter(la);return new Set(S)}),f=Y(()=>i.value,_=>{n(),r.value&&_.size&&(p=new MutationObserver(e),_.forEach(S=>p.observe(S,u)))},{immediate:!0,flush:"post"}),y=()=>p==null?void 0:p.takeRecords(),C=()=>{f(),n()};return ge(C),{isSupported:r,stop:C,takeRecords:y}}const Vl=Symbol("vueuse-ssr-width");function Hl(){const o=sa()?ra(Vl,null):null;return typeof o=="number"?o:void 0}function Ol(o,e={}){const{window:a=_e,ssrWidth:s=Hl()}=e,u=xe(()=>a&&"matchMedia"in a&&typeof a.matchMedia=="function"),p=L(typeof s=="number"),r=na(),n=L(!1),i=f=>{n.value=f.matches};return Me(()=>{if(p.value){p.value=!u.value;const f=j(o).split(",");n.value=f.some(y=>{const C=y.includes("not all"),_=y.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),S=y.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let R=!!(_||S);return _&&R&&(R=s>=tt(_[1])),S&&R&&(R=s<=tt(S[1])),C?!R:R});return}u.value&&(r.value=a.matchMedia(j(o)),n.value=r.value.matches)}),be(r,"change",i,{passive:!0}),O(()=>n.value)}function Wl(o,e,a={}){const{window:s=_e,...u}=a;let p;const r=xe(()=>s&&"ResizeObserver"in s),n=()=>{p&&(p.disconnect(),p=void 0)},i=O(()=>{const C=j(o);return Array.isArray(C)?C.map(_=>fe(_)):[fe(C)]}),f=Y(i,C=>{if(n(),r.value&&s){p=new ResizeObserver(e);for(const _ of C)_&&p.observe(_,u)}},{immediate:!0,flush:"post"}),y=()=>{n(),f()};return ge(y),{isSupported:r,stop:y}}function Fl(o,e={}){const{reset:a=!0,windowResize:s=!0,windowScroll:u=!0,immediate:p=!0,updateTiming:r="sync"}=e,n=L(0),i=L(0),f=L(0),y=L(0),C=L(0),_=L(0),S=L(0),R=L(0);function N(){const v=fe(o);if(!v){a&&(n.value=0,i.value=0,f.value=0,y.value=0,C.value=0,_.value=0,S.value=0,R.value=0);return}const A=v.getBoundingClientRect();n.value=A.height,i.value=A.bottom,f.value=A.left,y.value=A.right,C.value=A.top,_.value=A.width,S.value=A.x,R.value=A.y}function U(){r==="sync"?N():r==="next-frame"&&requestAnimationFrame(()=>N())}return Wl(o,U),Y(()=>fe(o),v=>!v&&U()),Dl(o,U,{attributeFilter:["style","class"]}),u&&be("scroll",U,{capture:!0,passive:!0}),s&&be("resize",U,{passive:!0}),St(()=>{p&&U()}),{height:n,bottom:i,left:f,right:y,top:C,width:_,x:S,y:R,update:U}}function Ml(o={}){const{window:e=_e,initialWidth:a=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:u=!0,includeScrollbar:p=!0,type:r="inner"}=o,n=L(a),i=L(s),f=()=>{if(e)if(r==="outer")n.value=e.outerWidth,i.value=e.outerHeight;else if(r==="visual"&&e.visualViewport){const{width:C,height:_,scale:S}=e.visualViewport;n.value=Math.round(C*S),i.value=Math.round(_*S)}else p?(n.value=e.innerWidth,i.value=e.innerHeight):(n.value=e.document.documentElement.clientWidth,i.value=e.document.documentElement.clientHeight)};f(),St(f);const y={passive:!0};if(be("resize",f,y),e&&r==="visual"&&e.visualViewport&&be(e.visualViewport,"resize",f,y),u){const C=Ol("(orientation: portrait)");Y(C,()=>f())}return{width:n,height:i}}const Ul=Lt?window:void 0;function Kl(o){var e;const a=j(o);return(e=a==null?void 0:a.$el)!=null?e:a}function Nl(...o){const e=[],a=()=>{e.forEach(n=>n()),e.length=0},s=(n,i,f,y)=>(n.addEventListener(i,f,y),()=>n.removeEventListener(i,f,y)),u=O(()=>{const n=oe(j(o[0])).filter(i=>i!=null);return n.every(i=>typeof i!="string")?n:void 0}),p=kt(()=>{var n,i;return[(i=(n=u.value)==null?void 0:n.map(f=>Kl(f)))!=null?i:[Ul].filter(f=>f!=null),oe(j(u.value?o[1]:o[0])),oe(t(u.value?o[2]:o[1])),j(u.value?o[3]:o[2])]},([n,i,f,y])=>{if(a(),!(n!=null&&n.length)||!(i!=null&&i.length)||!(f!=null&&f.length))return;const C=Ct(y)?{...y}:y;e.push(...n.flatMap(_=>i.flatMap(S=>f.map(R=>s(_,S,R,C)))))},{flush:"post"}),r=()=>{p(),a()};return ge(a),r}const Yl=P({name:"UseElementBounding",props:["box","as"],setup(o,{slots:e}){const a=L(),s=$t(Fl(a));return()=>{if(e.default)return ia(o.as||"div",{ref:a},e.default(s))}}});function We(o){return typeof Window<"u"&&o instanceof Window?o.document.documentElement:typeof Document<"u"&&o instanceof Document?o.documentElement:o}function Bt(o){const e=window.getComputedStyle(o);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&o.clientWidth<o.scrollWidth||e.overflowY==="auto"&&o.clientHeight<o.scrollHeight)return!0;{const a=o.parentNode;return!a||a.tagName==="BODY"?!1:Bt(a)}}function Xl(o){const e=o||window.event,a=e.target;return Bt(a)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const Fe=new WeakMap;function jl(o,e=!1){const a=L(e);let s=null,u="";Y(ua(o),n=>{const i=We(j(n));if(i){const f=i;if(Fe.get(f)||Fe.set(f,f.style.overflow),f.style.overflow!=="hidden"&&(u=f.style.overflow),f.style.overflow==="hidden")return a.value=!0;if(a.value)return f.style.overflow="hidden"}},{immediate:!0});const p=()=>{const n=We(j(o));!n||a.value||(at&&(s=Nl(n,"touchmove",i=>{Xl(i)},{passive:!1})),n.style.overflow="hidden",a.value=!0)},r=()=>{const n=We(j(o));!n||!a.value||(at&&(s==null||s()),n.style.overflow=u,Fe.delete(n),a.value=!1)};return ge(r),O({get(){return a.value},set(n){n?p():r()}})}function xl(){let o=!1;const e=L(!1);return(a,s)=>{if(e.value=s.value,o)return;o=!0;const u=jl(a,s.value);Y(e,p=>u.value=p)}}xl();const Gl=P({name:"UseWindowSize",props:["initialWidth","initialHeight"],setup(o,{slots:e}){const a=$t(Ml(o));return()=>{if(e.default)return e.default(a)}}}),Ql=P({__name:"StateBadge",props:{stateValue:{}},setup(o){return(e,a)=>{var s;return d(),m(t(Ue),{class:"text-(--foreground) border-(--border) bg-(--background) hover:bg-(--background) in-[button[aria-expanded=true]]:border-(--border-hover) in-[button:hover]:border-(--border-hover) hover:border-(--border-hover)",style:re([{"--foreground":"oklch(from var(--color) .35 min(c, 0.1) h)","--background":"oklch(from var(--color) max(l, .97) min(calc(c * .2), 0.03) h)","--border":"oklch(from var(--color) .9 min(calc(c * .2), 0.03) h)","--border-hover":"oklch(from var(--border) .7 min(calc(c * 5), 0.05) h)"},{"--color":((s=e.stateValue)==null?void 0:s.color)??"black"}])},{default:c(()=>[h(Ke,{class:"-ml-0.5 mr-1.5","state-value":e.stateValue},null,8,["state-value"]),V(e.$slots,"default")]),_:3},8,["style"])}}}),Jl={key:0,class:"fixed inset-0 z-11 bg-black/5"},Zl={key:0,class:"container px-4 lg:px-6"},en={class:"flex flex-wrap md:flex-nowrap gap-y-4 gap-x-2"},tn={class:"flex items-baseline min-w-0"},an={key:0,class:"mb-4 flex flex-wrap items-center gap-2"},ln={key:1,class:"contents"},nn={class:"flex items-center @2xl/root-card:hidden"},sn={class:"flex flex-col flex-wrap gap-4"},rn={key:0},on={"data-row-action":"",role:"presentation"},un={class:"truncate"},cn={key:0,class:"absolute -inset-2"},dn={key:1,class:"size-2.5 bg-primary rounded-full"},pn=["innerHTML"],fn={class:"flex justify-center items-center size-10"},hn={class:"truncate"},vn={key:1,class:"pt-2 text-muted-foreground"},gt=50,mn=50,_n=P({__name:"EntityList",props:{entityKey:{},entityList:{},filters:{},commands:{},title:{},inline:{type:Boolean,default:!0},showCount:{type:Boolean,default:!0},showCreateButton:{type:Boolean,default:!0},showReorderButton:{type:Boolean,default:!0},showSearchField:{type:Boolean,default:!0},showEntityState:{type:Boolean,default:!0},collapsed:{type:Boolean},highlightedInstanceId:{}},emits:["update:query","filter-change","reset","reordering"],setup(o,{emit:e}){const a=o,s=L(),u=e,p=L(null),r=O(()=>!!p.value),n=O(()=>a.entityList.data.filter(l=>{var g;return(g=p.value)==null?void 0:g[a.entityList.instanceId(l)]}));function i(l){p.value={...p.value,...Object.fromEntries(a.entityList.data.map(g=>[a.entityList.instanceId(g),l]))}}function f(){p.value=Object.fromEntries(a.entityList.data.map(l=>[a.entityList.instanceId(l),!1]))}function y(l,g){u("filter-change",l,g)}const C=L(!1);function _(l){u("update:query",{...a.entityList.query,page:null,search:l})}function S(){u("reset")}function R(l){u("update:query",{...a.entityList.query,page:l})}function N(l){return a.entityList.currentSort===l.key?a.entityList.currentSortDir==="desc"?a.entityList.config.defaultSort===a.entityList.currentSort?"asc":null:"desc":"asc"}function U(l){const g=N(l);u("update:query",{...a.entityList.query,page:null,sort:g?l.key:null,dir:g||null})}function v(l,g){const{commands:K,entityKey:G}=a;Oe.post(ne("code16.sharp.api.list.state",{entityKey:G,instanceId:g}),{value:l}).then(X=>{K.handleCommandResponse(X.data)}).catch(X=>{var he,ve;const Le=(he=X.response)==null?void 0:he.data;((ve=X.response)==null?void 0:ve.status)===422&&Va(Le.message,{title:z("modals.state.422.title"),isError:!0})})}async function A(l,g){if(l.metaKey||l.ctrlKey||l.shiftKey)return;const{entityKey:K}=a;l.preventDefault(),a.entityList.config.quickCreationForm?await a.commands.send({hasForm:!0},{postCommand:ne("code16.sharp.api.list.command.quick-creation-form.store",{entityKey:K,formEntityKey:g?g.entityKey:K}),getForm:ne("code16.sharp.api.list.command.quick-creation-form.create",{entityKey:K,formEntityKey:g?g.entityKey:K}),query:a.entityList.query,entityKey:g?g.entityKey:K}):La.visit(g?g.formCreateUrl:a.entityList.config.formCreateUrl)}async function $(l,g){const{commands:K,entityKey:G}=a;l.confirmation&&s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await K.send(l,{postCommand:ne("code16.sharp.api.list.command.instance",{entityKey:G,instanceId:g,commandKey:l.key}),getForm:ne("code16.sharp.api.list.command.instance.form",{entityKey:G,instanceId:g,commandKey:l.key}),query:a.entityList.query,entityKey:G,instanceId:g},{highlightElement:()=>{var X;return(X=s.value)==null?void 0:X.querySelector(`[data-instance-row="${g}"]`)}})}async function te(l){const{commands:g,entityKey:K}=a;await g.send(l,{postCommand:ne("code16.sharp.api.list.command.entity",{entityKey:K,commandKey:l.key}),getForm:ne("code16.sharp.api.list.command.entity.form",{entityKey:K,commandKey:l.key}),query:{...a.entityList.query,ids:Object.entries(p.value??{}).filter(([G,X])=>X).map(([G,X])=>G)},entityKey:K,onSuccess(){p.value=null}})}async function ae(l){const{entityKey:g,entityList:K,commands:G}=a;s.value.querySelector("[data-reka-scroll-area-viewport]").scrollTo({left:0,behavior:"smooth"}),await Ha(K.config.deleteConfirmationText,{highlightElement:()=>{var X;return(X=s.value)==null?void 0:X.querySelector(`[data-instance-row="${l}"]`)}})&&(await Oe.delete(ne("code16.sharp.api.list.delete",{entityKey:g,instanceId:l})),G.handleCommandResponse({action:"reload"}))}const le=L(null),W=O(()=>!!le.value),we=L(),Ge=ca(()=>W.value?we.value.$el:null,O({get:()=>le.value??[],set:l=>{le.value=l}}),{animation:150}),Se=L(gt),Qe=da("tableBottom");Y(pa(Qe,{rootMargin:"0px 0px 500px"}),l=>{l&&Se.value<a.entityList.data.length&&(Se.value+=mn)});const Pt=O(()=>le.value??a.entityList.data.slice(0,Se.value));Y(W,()=>{W.value?Ge.start():Ge.stop(),u("reordering",W.value)});function Je(){le.value=[...a.entityList.data]}async function qt(){const{entityKey:l,commands:g}=a;await Oe.post(ne("code16.sharp.api.list.reorder",{entityKey:l}),{instances:le.value.map(K=>a.entityList.instanceId(K))}),a.entityList.data.length<=gt?await g.handleCommandResponse({action:"reload"}):(a.entityList.data=[...le.value],Se.value=a.entityList.data.length),le.value=null}const Dt=Oa(),ke=O(()=>a.entityList.fields.filter(l=>(Dt.md||!l.hideOnXS)&&a.entityList.fieldShouldBeVisible(l,a.showEntityState)));return Y([we,()=>a.highlightedInstanceId],()=>{var l;if(we.value&&a.highlightedInstanceId){const g=(l=s.value)==null?void 0:l.querySelector(`[data-instance-row="${a.highlightedInstanceId}"] a`);g&&g.focus()}}),(l,g)=>(d(),m(Ma,{commands:l.commands},{default:c(()=>{var K;return[I("div",{ref_key:"el",ref:s},[h(fa,{"enter-active-class":"transition","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:c(()=>[W.value?(d(),w("div",Jl)):E("",!0)]),_:1}),(K=l.entityList)!=null&&K.pageAlert?(d(),w("div",Zl,[h(ha,{class:"mb-4","page-alert":l.entityList.pageAlert},null,8,["page-alert"])])):E("",!0),h(ka,{class:H(W.value?"relative z-12":"")},{default:c(()=>{var G,X,Le,he,ve,Ze,et;return[h(va,{class:H(W.value||r.value?"sticky":"data-overflowing-viewport:sticky"),collapsed:l.collapsed||!l.entityList},{default:c(()=>{var q,b,ue,D,Q;return[I("div",en,[I("div",tn,[V(l.$slots,"card-header"),l.entityList&&a.showCount?(d(),m(t(ht),{key:0,class:H(["hidden @2xl/root-card:block text-xs text-muted-foreground ml-4 mr-2 lg:ml-6 whitespace-nowrap",[l.inline?"lg:mr-9":"lg:mr-5"]])},{default:c(()=>{var F;return[(F=l.entityList.query)!=null&&F.search?(d(),w(B,{key:0},[T(k(t(me)("sharp::action_bar.list.search.title",l.entityList.count,{count:l.entityList.count,search:l.entityList.query.search})),1)],64)):(d(),w(B,{key:1},[T(k(t(me)("sharp::action_bar.list.items_count",l.entityList.count,{count:l.entityList.count})),1)],64))]}),_:1},8,["class"])):E("",!0)]),l.entityList?(d(),w(B,{key:0},[l.showReorderButton&&l.entityList.canReorder||l.entityList.canSelect||(q=l.entityList.dropdownEntityCommands(r.value))!=null&&q.flat().length||l.entityList.primaryCommand||l.showCreateButton&&l.entityList.authorizations.create?Ce((d(),w("div",{key:0,class:H(["ml-auto self-start flex -my-1 justify-end pointer-events-auto gap-2",(l.inline,"")])},[l.showReorderButton&&l.entityList.canReorder&&!r.value?(d(),w(B,{key:0},[W.value?(d(),w(B,{key:0},[h(t(M),{class:"h-8",size:"sm",variant:"outline",onClick:g[0]||(g[0]=F=>le.value=null)},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1}),h(t(M),{class:"h-8",size:"sm",onClick:qt},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.reorder_button.finish")),1)]),_:1})],64)):(d(),m(t(M),{key:1,class:H(["h-8",(b=l.entityList.dropdownEntityCommands(r.value))!=null&&b.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:Je},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.reorder_button")),1)]),_:1},8,["class"]))],64)):E("",!0),l.entityList.canSelect&&!W.value?(d(),w(B,{key:1},[r.value?(d(),m(t(M),{key:0,class:"h-8",size:"sm",variant:"outline",onClick:g[1]||(g[1]=F=>p.value=null)},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.reorder_button.cancel")),1)]),_:1})):(d(),m(t(M),{key:1,class:H(["h-8",(ue=l.entityList.dropdownEntityCommands(r.value))!=null&&ue.flat().length?"max-sm:hidden":""]),size:"sm",variant:"outline",onClick:f},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.select_button")),1)]),_:1},8,["class"]))],64)):E("",!0),(D=l.entityList.dropdownEntityCommands(r.value))!=null&&D.flat().length&&!W.value?(d(),m(t(Ee),{key:2},{default:c(()=>[h(t(ze),{"as-child":""},{default:c(()=>[h(t(M),{class:"h-8",variant:r.value?"default":"outline",size:"sm",disabled:W.value},{default:c(()=>[r.value?(d(),w(B,{key:0},[T(k(t(me)("sharp::entity_list.commands.entity.label.selected",Object.values(p.value).filter(Boolean).length,{count:Object.values(p.value).filter(Boolean).length})),1)],64)):(d(),w(B,{key:1},[T(k(t(z)("sharp::entity_list.commands.entity.label")),1)],64)),h(dt)]),_:1},8,["variant","disabled"])]),_:1}),h(t(Ae),null,{default:c(()=>[l.showReorderButton&&l.entityList.canReorder&&!r.value?(d(),w(B,{key:0},[h(t(Ie),{class:"sm:hidden",onClick:Je},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.reorder_button")),1)]),_:1}),h(t(Re),{class:"sm:hidden"})],64)):E("",!0),l.entityList.canSelect&&!r.value?(d(),w(B,{key:1},[h(t(Ie),{class:"sm:hidden",onClick:f},{default:c(()=>[T(k(t(z)("sharp::action_bar.list.select_button")),1)]),_:1}),h(t(Re),{class:"sm:hidden"})],64)):E("",!0),h(pt,{commands:l.entityList.dropdownEntityCommands(r.value),selecting:r.value,onSelect:te},null,8,["commands","selecting"])]),_:1})]),_:1})):E("",!0),l.entityList.primaryCommand&&!W.value&&!r.value?(d(),m(t(M),{key:3,class:"h-8",size:"sm",onClick:g[2]||(g[2]=F=>te(l.entityList.primaryCommand))},{default:c(()=>[T(k(l.entityList.primaryCommand.label),1)]),_:1})):E("",!0),l.showCreateButton&&l.entityList.authorizations.create&&!W.value&&!r.value?(d(),w(B,{key:4},[(Q=l.entityList.entities)!=null&&Q.length?(d(),m(t(Ee),{key:0},{default:c(()=>[h(t(ze),{"as-child":""},{default:c(()=>[h(t(M),{class:"h-8",size:"sm"},{default:c(()=>[T(k(a.entityList.config.createButtonLabel||t(z)("sharp::action_bar.list.forms_dropdown"))+" ",1),h(dt,{class:"opacity-75"})]),_:1})]),_:1}),h(t(Ae),null,{default:c(()=>[(d(!0),w(B,null,se(l.entityList.entities,F=>(d(),m(t(Ie),{as:"a",href:F.formCreateUrl,onClick:ce=>A(ce,F)},{default:c(()=>[F.icon?(d(),m(Ca,{key:0,class:"size-4",icon:F.icon},null,8,["icon"])):E("",!0),T(" "+k(F.label),1)]),_:2},1032,["href","onClick"]))),256))]),_:1})]),_:1})):(d(),m(t(M),{key:1,as:"a",class:"h-8 gap-1",size:"sm",disabled:W.value||r.value,href:l.entityList.config.formCreateUrl,onClick:A},{default:c(()=>[T(k(a.entityList.config.createButtonLabel||t(z)("sharp::action_bar.list.create_button")),1)]),_:1},8,["disabled","href"]))],64)):E("",!0)],2)),[[$e,!l.collapsed]]):E("",!0)],64)):E("",!0)])]}),_:3},8,["class","collapsed"]),l.entityList&&(l.showSearchField&&l.entityList.config.searchable||(G=l.entityList.visibleFilters)!=null&&G.length)?Ce((d(),w("div",an,[l.showSearchField&&l.entityList.config.searchable?(d(),w("div",{key:0,class:H(["self-center pointer-events-auto",{"hidden @2xl/root-card:block":(X=l.entityList.visibleFilters)==null?void 0:X.length}])},[h(bt,{inline:"",expanded:C.value,"onUpdate:expanded":g[3]||(g[3]=q=>C.value=q),"entity-list":l.entityList,disabled:W.value||r.value,onSubmit:_},null,8,["expanded","entity-list","disabled"])],2)):E("",!0),(Le=l.entityList.visibleFilters)!=null&&Le.length?(d(),w("div",ln,[I("div",nn,[h(t(ma),null,{default:c(()=>[h(t(Wa),{"as-child":""},{default:c(()=>[h(t(M),{class:"h-8 gap-1",variant:"outline",disabled:W.value||r.value,size:"sm"},{default:c(()=>[h(t(Fa),{class:"h-3.5 w-3.5"}),I("span",null,k(t(z)("sharp::filters.popover_button")),1)]),_:1},8,["disabled"])]),_:1}),h(t(ya),{onOpenAutoFocus:g[5]||(g[5]=wt(()=>{},["prevent"]))},{default:c(()=>[h(t(ba),null,{default:c(()=>[h(t(ga),null,{default:c(()=>[T(k(t(z)("sharp::filters.popover_button"))+" : "+k(l.title),1)]),_:1})]),_:1}),I("div",sn,[l.showSearchField&&l.entityList.config.searchable?(d(),m(bt,{key:0,expanded:C.value,"onUpdate:expanded":g[4]||(g[4]=q=>C.value=q),"entity-list":l.entityList,onSubmit:_},null,8,["expanded","entity-list"])):E("",!0),(d(!0),w(B,null,se(l.entityList.visibleFilters,q=>(d(),m(ft,{key:q.key,filter:q,value:l.filters.currentValues[q.key],disabled:W.value,valuated:l.filters.isValuated([q]),"entity-key":l.entityKey,onInput:b=>y(q,b)},null,8,["filter","value","disabled","valuated","entity-key","onInput"]))),128))]),h(t(_a),{class:"flex-row gap-2 mt-2"},{default:c(()=>[h(t(lt),{"as-child":""},{default:c(()=>{var q;return[h(t(M),{class:"flex-1",variant:"secondary",disabled:!l.filters.isValuated(l.entityList.visibleFilters)&&!((q=l.entityList.query)!=null&&q.search),onClick:S},{default:c(()=>[T(k(t(z)("sharp::filters.reset_all")),1)]),_:1},8,["disabled"])]}),_:1}),h(t(lt),{"as-child":""},{default:c(()=>[h(t(M),{class:"flex-1"},{default:c(()=>[T(k(t(z)("sharp::filters.dialog.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l.filters.isValuated(l.filters.rootFilters)?(d(),m(t(Ue),{key:0,class:"ml-2"},{default:c(()=>[T(k(l.filters.valuatedCount(l.filters.rootFilters)),1)]),_:1})):E("",!0),l.entityList?(d(),m(t(ht),{key:1,class:H(["text-xs text-muted-foreground ml-4 mr-2 lg:ml-6 whitespace-nowrap",[l.inline?"lg:mr-9":"lg:mr-5"]])},{default:c(()=>{var q;return[(q=l.entityList.query)!=null&&q.search?(d(),w(B,{key:0},[T(k(t(me)("sharp::action_bar.list.search.title",l.entityList.count,{count:l.entityList.count,search:l.entityList.query.search})),1)],64)):(d(),w(B,{key:1},[T(k(t(me)("sharp::action_bar.list.items_count",l.entityList.count,{count:l.entityList.count})),1)],64))]}),_:1},8,["class"])):E("",!0)]),I("div",{class:H(["hidden @2xl/root-card:contents",{"*:opacity-0 *:pointer-events-none":C.value}])},[(d(!0),w(B,null,se(l.entityList.visibleFilters,q=>(d(),m(ft,{key:q.key,filter:q,value:l.filters.currentValues[q.key],disabled:W.value||r.value,valuated:l.filters.isValuated([q]),"entity-key":l.entityKey,inline:"",onInput:b=>y(q,b)},null,8,["filter","value","disabled","valuated","entity-key","onInput"]))),128)),l.filters.isValuated(l.entityList.visibleFilters)||(he=l.entityList.query)!=null&&he.search?(d(),m(t(M),{key:0,class:"h-8 underline underline-offset-4 -ml-2",variant:"ghost",size:"sm",onClick:S},{default:c(()=>[T(k(t(z)("sharp::filters.reset_all")),1)]),_:1})):E("",!0)],2)])):E("",!0)],512)),[[$e,!l.collapsed]]):E("",!0),l.entityList?(d(),w(B,{key:1},[Ce(h(t(wa),{class:H(((ve=l.entityList.data)==null?void 0:ve.length)>0?"pb-2 px-0!":"")},{default:c(()=>{var q;return[((q=l.entityList.data)==null?void 0:q.length)>0?(d(),m(t(Pl),{key:0,class:"w-full data-scrollbar-x-visible:pb-4",type:"auto","touch-type":"scroll"},{scrollbar:c(()=>[h(t(Gl),null,{default:c(({height:b})=>[h(t(Yl),{class:"absolute inset-0 pointer-events-none"},{default:c(({bottom:ue})=>[h(t(Rt),{class:"z-20 [@media(hover:hover)]:bg-background pointer-events-auto will-change-transform",orientation:"horizontal",style:re({transform:`translate3d(0, ${Math.max(0,ue-b)*-1}px, 0)`})},null,8,["style"])]),_:2},1024)]),_:1})]),default:c(()=>[h(t(Rl),{"no-scroll":"",class:"w-max min-w-full max-w-[768px] md:max-w-[1024px] @3xl:w-full @3xl:max-w-none"},{default:c(()=>[h(t(Tl),{class:H(ke.value.some(b=>b.label)?"":"collapse [&_tr]:border-0"),role:"rowgroup"},{default:c(()=>[h(t(yt),{class:"hover:bg-transparent lg:*:first:pl-6 lg:*:last:pr-6"},{default:c(()=>[r.value?(d(),m(t(Te),{key:0,scope:"col",class:"w-2","aria-label":"Select..."},{default:c(()=>[h(t(nt),null,{default:c(()=>[h(t(st),{"delay-duration":0},{default:c(()=>[h(t(rt),{"as-child":""},{default:c(()=>[h(t(ot),{class:"block","model-value":n.value.length===l.entityList.data.length?!0:n.value.length>0?"indeterminate":!1,"onUpdate:modelValue":i,"aria-label":t(z)("sharp::entity_list.select_all_in_page_checkbox.tooltip.select")},null,8,["model-value","aria-label"])]),_:1}),h(t(it),{side:"top","side-offset":10},{default:c(()=>[n.value.length===l.entityList.data.length?(d(),w(B,{key:0},[T(k(t(z)("sharp::entity_list.select_all_in_page_checkbox.tooltip.unselect")),1)],64)):(d(),w(B,{key:1},[T(k(t(z)("sharp::entity_list.select_all_in_page_checkbox.tooltip.select")),1)],64))]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0),(d(!0),w(B,null,se(ke.value,(b,ue)=>(d(),m(t(Te),{key:b.key,class:"max-w-[70cqw] md:w-(--width,auto)",scope:"col",style:re({"--width":b.width==="fill"?100/ke.value.length+"%":b.width?b.width:b.type==="state"||b.type==="badge"?0:null})},{default:c(()=>[b.sortable?(d(),m(t(M),{key:0,variant:"ghost",size:"sm",class:"-ml-3 h-8 gap-2 data-[state=open]:bg-accent",onClick:D=>U(b),"aria-label":N(b)==="asc"?t(z)("sharp::entity_list.sort_asc",{field_label:b.label}):N(b)==="desc"?t(z)("sharp::entity_list.sort_desc",{field_label:b.label}):t(z)("sharp::entity_list.sort_default")},{default:c(()=>[b.label?(d(),w("span",rn,k(b.label),1)):E("",!0),l.entityList.currentSort===b.key?(d(),w(B,{key:1},[l.entityList.currentSortDir==="desc"?(d(),m(t(Ua),{key:0,class:"size-3.5"})):l.entityList.currentSortDir==="asc"?(d(),m(t(Ka),{key:1,class:"size-3.5"})):E("",!0)],64)):(d(),m(t($a),{key:2,class:"size-3.5"}))]),_:2},1032,["onClick","aria-label"])):(d(),w(B,{key:1},[T(k(b.label),1)],64))]),_:2},1032,["style"]))),128)),!W.value&&!r.value&&l.entityList.data.some(b=>l.entityList.instanceHasActions(b,l.showEntityState))?(d(),m(t(Te),{key:1,scope:"col",class:"w-2"},{default:c(()=>g[6]||(g[6]=[I("span",{class:"sr-only"},"Edit",-1)])),_:1})):E("",!0),W.value?(d(),m(t(Te),{key:2,scope:"col"},{default:c(()=>g[7]||(g[7]=[I("span",{class:"sr-only"},"Select...",-1)])),_:1})):E("",!0)]),_:1})]),_:1},8,["class"]),h(t(Bl),{class:"group",role:"rowgroup","data-reordering":W.value?!0:null,"data-selecting":r.value?!0:null,ref_key:"sortableTableBody",ref:we},{default:c(()=>[(d(!0),w(B,null,se(Pt.value,(b,ue)=>(d(),m(t(yt),{key:l.entityList.instanceId(b),class:"group/row relative hover:bg-transparent has-[[data-row-action]:hover]:bg-muted/50 has-[[aria-expanded=true]]:bg-muted/50 group-data-reordering:cursor-move group-data-[reordering]:hover:bg-muted/50 group-[:has(.sortable-chosen)]:bg-background [&.sortable-chosen]:transition-none lg:*:first:pl-6 lg:*:last:pr-6","data-instance-row":l.entityList.instanceId(b),"data-highlighted":a.highlightedInstanceId&&a.highlightedInstanceId==l.entityList.instanceId(b)?!0:null},{default:c(()=>[r.value&&p.value?(d(),m(t(ye),{key:0},{default:c(()=>[I("label",on,[g[8]||(g[8]=I("span",{class:"absolute inset-0 z-20"},null,-1)),h(t(ot),{class:"block relative z-20","model-value":p.value[l.entityList.instanceId(b)],"aria-label":t(z)("sharp::entity_list.select_checkbox.aria_label"),"onUpdate:modelValue":D=>p.value[l.entityList.instanceId(b)]=D},null,8,["model-value","aria-label","onUpdate:modelValue"])])]),_:2},1024)):E("",!0),(d(!0),w(B,null,se(ke.value,(D,Q)=>(d(),m(t(ye),{key:D.key,class:"max-w-[70cqw]"},{default:c(()=>[D.type==="state"?(d(),m(t(Ee),{key:0},{default:c(()=>[h(t(ze),{"as-child":""},{default:c(()=>{var F;return[h(t(M),{class:"relative z-10 disabled:opacity-100 -mx-3 hover:bg-transparent aria-expanded:bg-transparent",variant:"ghost",size:"sm",disabled:!l.entityList.instanceCanUpdateState(b)||W.value||r.value,"aria-label":t(z)("sharp::entity_list.state_dropdown.aria_label",{current_state_label:(F=l.entityList.instanceStateValue(b))==null?void 0:F.label})},{default:c(()=>[h(Ql,{"state-value":l.entityList.instanceStateValue(b)},{default:c(()=>{var ce;return[T(k((ce=l.entityList.instanceStateValue(b))==null?void 0:ce.label),1)]}),_:2},1032,["state-value"])]),_:2},1032,["disabled","aria-label"])]}),_:2},1024),h(t(Ae),{align:"start","align-offset":-16},{default:c(()=>[(d(!0),w(B,null,se(l.entityList.config.state.values,F=>(d(),m(t(ut),{key:F.value,"model-value":F.value==l.entityList.instanceState(b),"onUpdate:modelValue":ce=>ce&&v(F.value,l.entityList.instanceId(b))},{default:c(()=>[h(Ke,{class:"mr-2","state-value":F},null,8,["state-value"]),I("span",un,k(F.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)):D.type==="badge"?(d(),w(B,{key:1},[l.entityList.instanceHasBadge(b,D)?(d(),m(t(nt),{key:0},{default:c(()=>[h(t(st),{disabled:!D.tooltip||W.value||r.value,"delay-duration":0},{default:c(()=>[h(t(rt),{"as-child":""},{default:c(()=>[I("div",{class:H(D.tooltip?"relative z-2":"")},[D.tooltip?(d(),w("div",cn)):E("",!0),b[D.key]===!0?(d(),w("div",dn)):(d(),m(t(Ue),{key:2,class:"px-1.5 justify-center min-w-5.5"},{default:c(()=>[T(k(b[D.key]),1)]),_:2},1024))],2)]),_:2},1024),h(t(it),{"side-offset":10},{default:c(()=>[I("div",{innerHTML:D.tooltip},null,8,pn)]),_:2},1024)]),_:2},1032,["disabled"])]),_:2},1024)):E("",!0)],64)):(d(),w(B,{key:2},[D.html&&typeof b[D.key]=="string"?(d(),m(Ea,{key:0,class:H(["break-words [&_a]:relative [&_a]:z-10",{"[&_a]:pointer-events-none":r.value||W.value}]),html:D.sanitize?t(za)(b[D.key]):b[D.key]},null,8,["class","html"])):(d(),w(B,{key:1},[T(k(b[D.key]),1)],64))],64)),Q===0&&b._meta.url&&!r.value&&!W.value?(d(),m(t(Aa),{key:3,class:"absolute inset-0 ring-ring ring-inset focus-visible:outline-none focus-visible:ring-2 focus:group-data-highlighted/row:ring-2","data-row-action":"",href:b._meta.url},null,8,["href"])):E("",!0)]),_:2},1024))),128)),h(t(ye),{class:"w-0 pr-6 @5xl:pl-4 hidden group-data-reordering:table-cell"},{default:c(()=>[I("div",fn,[h(t(Ia),{class:"w-4 h-4 opacity-50"})])]),_:1}),l.entityList.instanceHasActions(b,l.showEntityState)?(d(),m(t(ye),{key:1,class:"sticky bg-background pl-1 -right-3 z-10 group-data-[scroll-arrived-right=true]/scroll-area:bg-transparent group-data-reordering:hidden group-data-selecting:hidden @5xl:pl-4 @5xl:bg-transparent"},{default:c(()=>[g[9]||(g[9]=I("div",{class:"absolute inset-0 -left-2 overflow-hidden","aria-hidden":"true"},null,-1)),g[10]||(g[10]=I("div",{class:"absolute inset-0 -left-4 overflow-hidden pointer-events-none","aria-hidden":"true"},[I("div",{class:"absolute inset-0 left-4 shadow-l-xl dark:border-l shadow-border transition-opacity group-data-[scroll-arrived-right=true]/scroll-area:opacity-0 @5xl:opacity-0","aria-hidden":"true"})],-1)),h(t(Ee),null,{default:c(()=>[h(t(ze),{"as-child":""},{default:c(()=>[h(t(M),{class:"[@media(hover:hover)]:pointer-events-auto relative","aria-label":t(z)("sharp::entity_list.commands.instance.label"),variant:"ghost",size:"icon"},{default:c(()=>[h(t(Ra),{class:"w-4 h-4"})]),_:1},8,["aria-label"])]),_:1}),h(t(Ae),{side:"bottom",align:"center"},{default:c(()=>{var D;return[l.entityList.config.state&&l.showEntityState&&l.entityList.instanceCanUpdateState(b)?(d(),w(B,{key:0},[h(t(Ba),null,{default:c(()=>[h(t(Ta),null,{default:c(()=>[h(t(Pa),null,{default:c(()=>[T(k(t(z)("sharp::modals.entity_state.edit.title")),1)]),_:1}),h(t(qa),null,{default:c(()=>[h(t(Da),null,{default:c(()=>[(d(!0),w(B,null,se(l.entityList.config.state.values,Q=>(d(),m(t(ut),{key:Q.value,"model-value":Q.value==l.entityList.instanceState(b),"onUpdate:modelValue":F=>F&&v(Q.value,l.entityList.instanceId(b))},{default:c(()=>[h(Ke,{class:"mr-2","state-value":Q},null,8,["state-value"]),I("span",hn,k(Q.label),1)]),_:2},1032,["model-value","onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),h(t(Re),{class:"last:hidden"})],64)):E("",!0),h(pt,{commands:l.entityList.instanceCommands(b),onSelect:Q=>$(Q,l.entityList.instanceId(b))},null,8,["commands","onSelect"]),!l.entityList.config.deleteHidden&&l.entityList.instanceCanDelete(b)?(d(),w(B,{key:1},[(D=l.entityList.instanceCommands(b))!=null&&D.flat().length?(d(),m(t(Re),{key:0,class:"first:hidden"})):E("",!0),h(t(Ie),{class:"text-destructive",onClick:Q=>ae(l.entityList.instanceId(b))},{default:c(()=>[T(k(t(z)("sharp::action_bar.form.delete_button")),1)]),_:2},1032,["onClick"])],64)):E("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1024)):l.entityList.data.some(D=>l.entityList.instanceHasActions(D,l.showEntityState))?(d(),m(t(ye),{key:2,class:"w-2"})):E("",!0)]),_:2},1032,["data-instance-row","data-highlighted"]))),128))]),_:1},8,["data-reordering","data-selecting"])]),_:1}),I("div",{ref_key:"tableBottom",ref:Qe},null,512)]),_:1})):(d(),w("div",vn,k(t(z)("sharp::entity_list.empty_text")),1))]}),_:1},8,["class"]),[[$e,!l.collapsed]]),(Ze=l.entityList.meta)!=null&&Ze.prev_page_url||(et=l.entityList.meta)!=null&&et.next_page_url?Ce((d(),m(t(Sa),{key:0,class:"px-4 pt-4 lg:px-6"},{default:c(()=>[h(Il,{"entity-list":l.entityList,"links-openable":!l.inline,onChange:R},null,8,["entity-list","links-openable"])]),_:1},512)),[[$e,!l.collapsed]]):E("",!0)],64)):E("",!0)]}),_:3},8,["class"])],512)]}),_:3},8,["commands"]))}});class Tt{constructor(e,a,s,u){Object.assign(this,e),this.entityKey=a,this.hiddenFilters=s,this.hiddenCommands=u}get count(){var e;return((e=this.meta)==null?void 0:e.total)??this.data.length}get currentSort(){var e;return((e=this.query)==null?void 0:e.sort)??this.config.defaultSort}get currentSortDir(){var e;return((e=this.query)==null?void 0:e.dir)??this.config.defaultSortDir}get visibleFilters(){var e,a;return this.hiddenFilters?(e=this.config.filters)==null?void 0:e._root.filter(s=>!(s.key in this.hiddenFilters)):(a=this.config.filters)==null?void 0:a._root}get visibleCommands(){var e,a,s,u;return{instance:(a=(e=this.config.commands)==null?void 0:e.instance)==null?void 0:a.map(p=>p.filter(r=>{var n,i;return!((i=(n=this.hiddenCommands)==null?void 0:n.instance)!=null&&i.includes(r.key))})),entity:(u=(s=this.config.commands)==null?void 0:s.entity)==null?void 0:u.map(p=>p.filter(r=>{var n,i;return!((i=(n=this.hiddenCommands)==null?void 0:n.entity)!=null&&i.includes(r.key))}))}}get allowedEntityCommands(){var e;return((e=this.visibleCommands.entity)==null?void 0:e.map(a=>a.filter(s=>s.authorization)))??[]}get primaryCommand(){return this.allowedEntityCommands.flat().find(e=>e.primary)}get canSelect(){return this.allowedEntityCommands.flat().some(e=>e.instanceSelection)}get canReorder(){return this.config.reorderable&&this.authorizations.reorder&&this.data.length>1}withRefreshedItems(e){return this.data=this.data.map(a=>e.find(s=>this.instanceId(s)===this.instanceId(a))??a),new Tt(this,this.entityKey,this.hiddenFilters,this.hiddenCommands)}dropdownEntityCommands(e){return this.allowedEntityCommands.map(a=>a.filter(s=>e?!!s.instanceSelection:!s.primary))}instanceId(e){return e[this.config.instanceIdAttribute]}instanceState(e){return this.config.state?e[this.config.state.attribute]:null}instanceStateValue(e){var a;return(a=this.config.state)==null?void 0:a.values.find(s=>s.value===this.instanceState(e))}instanceCanUpdateState(e){return Array.isArray(this.config.state.authorization)?this.config.state.authorization.includes(this.instanceId(e)):!!this.config.state.authorization}instanceCanDelete(e){return e._meta.authorizations.delete}instanceCommands(e){var a,s;return(s=(a=this.visibleCommands)==null?void 0:a.instance)==null?void 0:s.map(u=>u.filter(p=>Array.isArray(p.authorization)?p.authorization.includes(this.instanceId(e)):p.authorization))}instanceHasActions(e,a){var s;return((s=this.instanceCommands(e))==null?void 0:s.flat().length)>0||this.config.state&&a&&this.instanceCanUpdateState(e)||!this.config.deleteHidden&&this.instanceCanDelete(e)}instanceHasBadge(e,a){return e[a.key]===!0||typeof e[a.key]=="number"||typeof e[a.key]=="string"&&e[a.key].length>0}fieldShouldBeVisible(e,a){return e.type==="badge"?this.data.some(s=>this.instanceHasBadge(s,e)):e.type==="state"?this.config.state&&a:!0}}function wn(){var a,s;const o=(a=ct().props.query)==null?void 0:a.highlighted_entity_key,e=(s=ct().props.query)==null?void 0:s.highlighted_instance_id;return{highlightedEntityKey:o,highlightedInstanceId:e}}export{Tt as E,_n as _,Ql as a,Ke as b,wn as u};

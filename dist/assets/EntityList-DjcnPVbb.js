import{d as g,r as l,a0 as L,ah as V,ai as w,ab as S,c as C,w as o,aj as q,o as E,a as u,j as d,V as $,u as n,Q as k,b as I,t as x,au as c}from"./sharp-CQt6mj3s.js";import{E as f,u as B,_ as F}from"./useEntityListHighlightedItem-BPpU5QeQ.js";import{_ as K}from"./Title.vue_vue_type_script_setup_true_lang-BJyOip89.js";import{s as m}from"./DropdownChevronDown.vue_vue_type_script_setup_true_lang-BkILNKz9.js";import{_ as N}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-ARKnautn.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-FJvQ-TL-.js";const Q={class:"@container"},U=g({__name:"EntityList",props:{entityList:{},breadcrumb:{}},setup(p){const a=p,s=l().params.entityKey,e=L(new f(a.entityList,s)),i=V(e.value.config.filters,e.value.filterValues),y=w("entityList",{refresh:(t,{formModal:r})=>{e.value=e.value.withRefreshedItems(t.items),r.shouldReopen&&r.reopen()}}),{highlightedEntityKey:R,highlightedInstanceId:h}=B();S(()=>a.entityList,()=>{e.value=new f(a.entityList,s),i.update(a.entityList.config.filters,a.entityList.filterValues)});function b(t){m(e.value.query)!==m(t)&&c.visit(l("code16.sharp.list",{entityKey:s})+m(t),{preserveState:!0,preserveScroll:!1})}function _(t,r){c.post(l("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:i.nextValues(t,r),query:e.value.query},{preserveState:!0,preserveScroll:!1})}function v(){c.post(l("code16.sharp.list.filters.store",{entityKey:s}),{filterValues:i.defaultValues(i.rootFilters),query:{...e.value.query,search:null}},{preserveState:!0,preserveScroll:!1})}return(t,r)=>(E(),C(q,null,{breadcrumb:o(()=>[u(N,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"])]),default:o(()=>[u(K,{breadcrumb:t.breadcrumb},null,8,["breadcrumb"]),d("div",Q,[d("div",{class:$(e.value.pageAlert?"pt-4":"pt-6 @3xl:pt-10")},[u(F,{"entity-key":n(s),"entity-list":e.value,filters:n(i),commands:n(y),title:t.breadcrumb.items[0].label,"highlighted-instance-id":n(h),onReset:v,onFilterChange:_,"onUpdate:query":b},{"card-header":o(()=>[u(n(k),{class:"line-clamp-2 py-1 -my-1 min-w-0"},{default:o(()=>[I(x(e.value.title),1)]),_:1})]),_:1},8,["entity-key","entity-list","filters","commands","title","highlighted-instance-id"])],2)])]),_:1}))}});export{U as default};
